<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>数据库学习笔记 | 薯片菌のBlog</title><meta name="author" content="薯片菌"><meta name="copyright" content="薯片菌"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="数据库（基于SQL Server）T-SQL语句的代码所有的基础部分我直接用单独一个sql文件讲完，追求最高效率包括数据库的创建、文件更改、文件增加、表的增删改查、数据的增删改查、连接、子查询、视图、存储过程 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152">
<meta property="og:type" content="article">
<meta property="og:title" content="数据库学习笔记">
<meta property="og:url" content="http://example.com/posts/769d2f87.html">
<meta property="og:site_name" content="薯片菌のBlog">
<meta property="og:description" content="数据库（基于SQL Server）T-SQL语句的代码所有的基础部分我直接用单独一个sql文件讲完，追求最高效率包括数据库的创建、文件更改、文件增加、表的增删改查、数据的增删改查、连接、子查询、视图、存储过程 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://spjblogimg-1329562662.cos.ap-shanghai.myqcloud.com/img/wp13618007-clean-4k-desktop-wallpapers.png">
<meta property="article:published_time" content="2023-10-03T23:53:58.000Z">
<meta property="article:modified_time" content="2025-01-04T15:51:05.556Z">
<meta property="article:author" content="薯片菌">
<meta property="article:tag" content="博客、薯片菌、薯片、学习、blog">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://spjblogimg-1329562662.cos.ap-shanghai.myqcloud.com/img/wp13618007-clean-4k-desktop-wallpapers.png"><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="http://example.com/posts/769d2f87.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="manifest" href="/pwa/manifest.json"/><link rel="apple-touch-icon" sizes="180x180" href="/pwa/apple-touch-icon.png"/><link rel="icon" type="image/png" sizes="32x32" href="/pwa/32.png"/><link rel="icon" type="image/png" sizes="16x16" href="/pwa/16.png"/><link rel="mask-icon" href="/pwa/safari-pinned-tab.svg" color="#5bbad5"/><link rel="stylesheet" href="/css/index.css?v=4.13.0"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.5.1/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui@5.0.33/dist/fancybox/fancybox.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: {"path":"/search.xml","preload":false,"top_n_per_article":1,"unescape":false,"languages":{"hits_empty":"找不到您查询的内容：${query}","hits_stats":"共找到 ${hits} 篇文章"}},
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  dateSuffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  infinitegrid: {
    js: 'https://cdn.jsdelivr.net/npm/@egjs/infinitegrid@4.11.1/dist/infinitegrid.min.js',
    buttonText: '加载更多'
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: false,
  },
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: '数据库学习笔记',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2025-01-04 23:51:05'
}</script><script>(win=>{
      win.saveToLocal = {
        set: (key, value, ttl) => {
          if (ttl === 0) return
          const now = Date.now()
          const expiry = now + ttl * 86400000
          const item = {
            value,
            expiry
          }
          localStorage.setItem(key, JSON.stringify(item))
        },
      
        get: key => {
          const itemStr = localStorage.getItem(key)
      
          if (!itemStr) {
            return undefined
          }
          const item = JSON.parse(itemStr)
          const now = Date.now()
      
          if (now > item.expiry) {
            localStorage.removeItem(key)
            return undefined
          }
          return item.value
        }
      }
    
      win.getScript = (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        script.onerror = reject
        script.onload = script.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          script.onload = script.onreadystatechange = null
          resolve()
        }

        Object.keys(attr).forEach(key => {
          script.setAttribute(key, attr[key])
        })

        document.head.appendChild(script)
      })
    
      win.getCSS = (url, id = false) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onerror = reject
        link.onload = link.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          link.onload = link.onreadystatechange = null
          resolve()
        }
        document.head.appendChild(link)
      })
    
      win.activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          const now = new Date()
          const hour = now.getHours()
          const isNight = hour <= 6 || hour >= 18
          if (t === undefined) isNight ? activateDarkMode() : activateLightMode()
          else if (t === 'light') activateLightMode()
          else activateDarkMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
      const detectApple = () => {
        if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
          document.documentElement.classList.add('apple')
        }
      }
      detectApple()
    })(window)</script><link rel="stylesheet" href="/css/custom.css" media="defer" onload="this.media='all'"><script async src="/js/title.js"></script><link rel="stylesheet" href="/css/app966.css"><!-- hexo injector head_end start --><link rel="stylesheet" href="https://cdn.cbd.int/hexo-butterfly-clock-anzhiyu/lib/clock.min.css" /><link rel="stylesheet" href="https://npm.elemecdn.com/anzhiyu-blog@2.0.4/css/runtime/runtime.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.cbd.int/hexo-butterfly-wowjs/lib/animate.min.css" media="print" onload="this.media='screen'"><link rel="stylesheet" href="https://cdn.cbd.int/hexo-butterfly-tag-plugins-plus@latest/lib/assets/font-awesome-animation.min.css" media="defer" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.cbd.int/hexo-butterfly-tag-plugins-plus@latest/lib/tag_plugins.css" media="defer" onload="this.media='all'"><script src="https://cdn.cbd.int/hexo-butterfly-tag-plugins-plus@latest/lib/assets/carousel-touch.js"></script><!-- hexo injector head_end end --><meta name="generator" content="Hexo 7.3.0"><link rel="alternate" href="/atom.xml" title="薯片菌のBlog" type="application/atom+xml">
</head><body><div id="web_bg" style="background:url(https://spjblogimg-1329562662.cos.ap-shanghai.myqcloud.com/img/wp13618007-clean-4k-desktop-wallpapers.png);background-attachment: local;background-position: center;background-size: cover;background-repeat: no-repeat;"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="https://imgbed.yiyunt.cn/img/220" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">7</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">0</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">0</div></a></div><hr class="custom-hr"/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/bangumis/index.html"><i class="fa-fw fas fa-home"></i><span> 追番</span></a></div><div class="menus_item"><a class="site-page" href="/comments/"><i class="fa-fw fas fa-envelope"></i><span> 留言板</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url('https://spjblogimg-1329562662.cos.ap-shanghai.myqcloud.com/img/wp13618007-clean-4k-desktop-wallpapers.png')"><nav id="nav"><span id="blog-info"><a href="/" title="薯片菌のBlog"><span class="site-name">薯片菌のBlog</span></a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search" href="javascript:void(0);"><i class="fas fa-search fa-fw"></i><span> 搜索</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/bangumis/index.html"><i class="fa-fw fas fa-home"></i><span> 追番</span></a></div><div class="menus_item"><a class="site-page" href="/comments/"><i class="fa-fw fas fa-envelope"></i><span> 留言板</span></a></div></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">数据库学习笔记</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2023-10-03T23:53:58.000Z" title="发表于 2023-10-04 07:53:58">2023-10-04</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2025-01-04T15:51:05.556Z" title="更新于 2025-01-04 23:51:05">2025-01-04</time></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="数据库学习笔记"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">阅读量:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h1 id="数据库（基于SQL-Server）"><a href="#数据库（基于SQL-Server）" class="headerlink" title="数据库（基于SQL Server）"></a>数据库（基于SQL Server）</h1><h2 id="T-SQL语句的代码"><a href="#T-SQL语句的代码" class="headerlink" title="T-SQL语句的代码"></a>T-SQL语句的代码</h2><p>所有的基础部分我直接用单独一个sql文件讲完，追求最高效率<br>包括数据库的创建、文件更改、文件增加、表的增删改查、数据的增删改查、连接、子查询、视图、存储过程</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br><span class="line">395</span><br><span class="line">396</span><br><span class="line">397</span><br><span class="line">398</span><br><span class="line">399</span><br><span class="line">400</span><br><span class="line">401</span><br><span class="line">402</span><br><span class="line">403</span><br><span class="line">404</span><br><span class="line">405</span><br><span class="line">406</span><br><span class="line">407</span><br><span class="line">408</span><br><span class="line">409</span><br><span class="line">410</span><br><span class="line">411</span><br><span class="line">412</span><br><span class="line">413</span><br><span class="line">414</span><br><span class="line">415</span><br><span class="line">416</span><br><span class="line">417</span><br><span class="line">418</span><br><span class="line">419</span><br><span class="line">420</span><br><span class="line">421</span><br><span class="line">422</span><br><span class="line">423</span><br><span class="line">424</span><br><span class="line">425</span><br><span class="line">426</span><br><span class="line">427</span><br><span class="line">428</span><br><span class="line">429</span><br><span class="line">430</span><br><span class="line">431</span><br><span class="line">432</span><br><span class="line">433</span><br><span class="line">434</span><br><span class="line">435</span><br><span class="line">436</span><br><span class="line">437</span><br><span class="line">438</span><br><span class="line">439</span><br><span class="line">440</span><br><span class="line">441</span><br><span class="line">442</span><br><span class="line">443</span><br><span class="line">444</span><br><span class="line">445</span><br><span class="line">446</span><br><span class="line">447</span><br><span class="line">448</span><br><span class="line">449</span><br><span class="line">450</span><br><span class="line">451</span><br><span class="line">452</span><br><span class="line">453</span><br><span class="line">454</span><br><span class="line">455</span><br><span class="line">456</span><br><span class="line">457</span><br><span class="line">458</span><br><span class="line">459</span><br><span class="line">460</span><br><span class="line">461</span><br><span class="line">462</span><br><span class="line">463</span><br><span class="line">464</span><br><span class="line">465</span><br><span class="line">466</span><br><span class="line">467</span><br><span class="line">468</span><br><span class="line">469</span><br><span class="line">470</span><br><span class="line">471</span><br><span class="line">472</span><br><span class="line">473</span><br><span class="line">474</span><br><span class="line">475</span><br><span class="line">476</span><br><span class="line">477</span><br><span class="line">478</span><br><span class="line">479</span><br><span class="line">480</span><br><span class="line">481</span><br><span class="line">482</span><br><span class="line">483</span><br><span class="line">484</span><br><span class="line">485</span><br><span class="line">486</span><br><span class="line">487</span><br><span class="line">488</span><br><span class="line">489</span><br><span class="line">490</span><br><span class="line">491</span><br><span class="line">492</span><br><span class="line">493</span><br><span class="line">494</span><br><span class="line">495</span><br><span class="line">496</span><br><span class="line">497</span><br><span class="line">498</span><br><span class="line">499</span><br><span class="line">500</span><br><span class="line">501</span><br><span class="line">502</span><br><span class="line">503</span><br><span class="line">504</span><br><span class="line">505</span><br><span class="line">506</span><br><span class="line">507</span><br><span class="line">508</span><br><span class="line">509</span><br><span class="line">510</span><br><span class="line">511</span><br><span class="line">512</span><br><span class="line">513</span><br><span class="line">514</span><br><span class="line">515</span><br><span class="line">516</span><br><span class="line">517</span><br><span class="line">518</span><br><span class="line">519</span><br><span class="line">520</span><br><span class="line">521</span><br><span class="line">522</span><br><span class="line">523</span><br><span class="line">524</span><br><span class="line">525</span><br><span class="line">526</span><br><span class="line">527</span><br><span class="line">528</span><br><span class="line">529</span><br><span class="line">530</span><br><span class="line">531</span><br><span class="line">532</span><br><span class="line">533</span><br><span class="line">534</span><br><span class="line">535</span><br><span class="line">536</span><br><span class="line">537</span><br><span class="line">538</span><br><span class="line">539</span><br><span class="line">540</span><br><span class="line">541</span><br><span class="line">542</span><br><span class="line">543</span><br><span class="line">544</span><br><span class="line">545</span><br><span class="line">546</span><br><span class="line">547</span><br><span class="line">548</span><br><span class="line">549</span><br><span class="line">550</span><br><span class="line">551</span><br><span class="line">552</span><br><span class="line">553</span><br><span class="line">554</span><br><span class="line">555</span><br><span class="line">556</span><br><span class="line">557</span><br><span class="line">558</span><br><span class="line">559</span><br><span class="line">560</span><br><span class="line">561</span><br><span class="line">562</span><br><span class="line">563</span><br><span class="line">564</span><br><span class="line">565</span><br><span class="line">566</span><br><span class="line">567</span><br><span class="line">568</span><br><span class="line">569</span><br><span class="line">570</span><br><span class="line">571</span><br><span class="line">572</span><br><span class="line">573</span><br><span class="line">574</span><br><span class="line">575</span><br><span class="line">576</span><br><span class="line">577</span><br><span class="line">578</span><br><span class="line">579</span><br><span class="line">580</span><br><span class="line">581</span><br><span class="line">582</span><br><span class="line">583</span><br><span class="line">584</span><br><span class="line">585</span><br><span class="line">586</span><br><span class="line">587</span><br><span class="line">588</span><br><span class="line">589</span><br><span class="line">590</span><br><span class="line">591</span><br><span class="line">592</span><br><span class="line">593</span><br><span class="line">594</span><br><span class="line">595</span><br><span class="line">596</span><br><span class="line">597</span><br><span class="line">598</span><br><span class="line">599</span><br><span class="line">600</span><br><span class="line">601</span><br><span class="line">602</span><br><span class="line">603</span><br><span class="line">604</span><br><span class="line">605</span><br><span class="line">606</span><br><span class="line">607</span><br><span class="line">608</span><br><span class="line">609</span><br><span class="line">610</span><br><span class="line">611</span><br><span class="line">612</span><br><span class="line">613</span><br><span class="line">614</span><br><span class="line">615</span><br><span class="line">616</span><br><span class="line">617</span><br><span class="line">618</span><br><span class="line">619</span><br><span class="line">620</span><br><span class="line">621</span><br><span class="line">622</span><br><span class="line">623</span><br><span class="line">624</span><br><span class="line">625</span><br><span class="line">626</span><br><span class="line">627</span><br><span class="line">628</span><br><span class="line">629</span><br><span class="line">630</span><br><span class="line">631</span><br><span class="line">632</span><br><span class="line">633</span><br><span class="line">634</span><br><span class="line">635</span><br><span class="line">636</span><br><span class="line">637</span><br><span class="line">638</span><br><span class="line">639</span><br><span class="line">640</span><br><span class="line">641</span><br><span class="line">642</span><br><span class="line">643</span><br><span class="line">644</span><br><span class="line">645</span><br><span class="line">646</span><br><span class="line">647</span><br><span class="line">648</span><br><span class="line">649</span><br><span class="line">650</span><br><span class="line">651</span><br><span class="line">652</span><br><span class="line">653</span><br><span class="line">654</span><br><span class="line">655</span><br><span class="line">656</span><br><span class="line">657</span><br><span class="line">658</span><br><span class="line">659</span><br><span class="line">660</span><br><span class="line">661</span><br><span class="line">662</span><br><span class="line">663</span><br><span class="line">664</span><br><span class="line">665</span><br><span class="line">666</span><br><span class="line">667</span><br><span class="line">668</span><br><span class="line">669</span><br><span class="line">670</span><br><span class="line">671</span><br><span class="line">672</span><br><span class="line">673</span><br><span class="line">674</span><br><span class="line">675</span><br><span class="line">676</span><br><span class="line">677</span><br><span class="line">678</span><br><span class="line">679</span><br><span class="line">680</span><br><span class="line">681</span><br><span class="line">682</span><br><span class="line">683</span><br><span class="line">684</span><br><span class="line">685</span><br><span class="line">686</span><br><span class="line">687</span><br><span class="line">688</span><br><span class="line">689</span><br><span class="line">690</span><br><span class="line">691</span><br><span class="line">692</span><br><span class="line">693</span><br><span class="line">694</span><br><span class="line">695</span><br><span class="line">696</span><br><span class="line">697</span><br><span class="line">698</span><br><span class="line">699</span><br><span class="line">700</span><br><span class="line">701</span><br><span class="line">702</span><br><span class="line">703</span><br><span class="line">704</span><br><span class="line">705</span><br><span class="line">706</span><br><span class="line">707</span><br><span class="line">708</span><br><span class="line">709</span><br><span class="line">710</span><br><span class="line">711</span><br><span class="line">712</span><br><span class="line">713</span><br><span class="line">714</span><br><span class="line">715</span><br><span class="line">716</span><br><span class="line">717</span><br><span class="line">718</span><br><span class="line">719</span><br><span class="line">720</span><br><span class="line">721</span><br><span class="line">722</span><br><span class="line">723</span><br><span class="line">724</span><br><span class="line">725</span><br><span class="line">726</span><br><span class="line">727</span><br><span class="line">728</span><br><span class="line">729</span><br><span class="line">730</span><br><span class="line">731</span><br><span class="line">732</span><br><span class="line">733</span><br><span class="line">734</span><br><span class="line">735</span><br><span class="line">736</span><br><span class="line">737</span><br><span class="line">738</span><br><span class="line">739</span><br><span class="line">740</span><br><span class="line">741</span><br><span class="line">742</span><br><span class="line">743</span><br><span class="line">744</span><br><span class="line">745</span><br><span class="line">746</span><br><span class="line">747</span><br><span class="line">748</span><br><span class="line">749</span><br><span class="line">750</span><br><span class="line">751</span><br><span class="line">752</span><br><span class="line">753</span><br><span class="line">754</span><br><span class="line">755</span><br><span class="line">756</span><br><span class="line">757</span><br><span class="line">758</span><br><span class="line">759</span><br><span class="line">760</span><br><span class="line">761</span><br><span class="line">762</span><br><span class="line">763</span><br><span class="line">764</span><br><span class="line">765</span><br><span class="line">766</span><br><span class="line">767</span><br><span class="line">768</span><br><span class="line">769</span><br><span class="line">770</span><br><span class="line">771</span><br><span class="line">772</span><br><span class="line">773</span><br><span class="line">774</span><br><span class="line">775</span><br><span class="line">776</span><br><span class="line">777</span><br><span class="line">778</span><br><span class="line">779</span><br><span class="line">780</span><br><span class="line">781</span><br><span class="line">782</span><br><span class="line">783</span><br><span class="line">784</span><br><span class="line">785</span><br><span class="line">786</span><br><span class="line">787</span><br><span class="line">788</span><br><span class="line">789</span><br><span class="line">790</span><br><span class="line">791</span><br><span class="line">792</span><br><span class="line">793</span><br><span class="line">794</span><br><span class="line">795</span><br><span class="line">796</span><br><span class="line">797</span><br><span class="line">798</span><br><span class="line">799</span><br><span class="line">800</span><br><span class="line">801</span><br><span class="line">802</span><br><span class="line">803</span><br><span class="line">804</span><br><span class="line">805</span><br><span class="line">806</span><br><span class="line">807</span><br><span class="line">808</span><br><span class="line">809</span><br><span class="line">810</span><br><span class="line">811</span><br><span class="line">812</span><br><span class="line">813</span><br><span class="line">814</span><br><span class="line">815</span><br><span class="line">816</span><br><span class="line">817</span><br><span class="line">818</span><br><span class="line">819</span><br><span class="line">820</span><br><span class="line">821</span><br><span class="line">822</span><br><span class="line">823</span><br><span class="line">824</span><br><span class="line">825</span><br><span class="line">826</span><br><span class="line">827</span><br><span class="line">828</span><br><span class="line">829</span><br><span class="line">830</span><br><span class="line">831</span><br><span class="line">832</span><br><span class="line">833</span><br><span class="line">834</span><br><span class="line">835</span><br><span class="line">836</span><br><span class="line">837</span><br><span class="line">838</span><br><span class="line">839</span><br><span class="line">840</span><br><span class="line">841</span><br><span class="line">842</span><br><span class="line">843</span><br><span class="line">844</span><br><span class="line">845</span><br><span class="line">846</span><br><span class="line">847</span><br><span class="line">848</span><br><span class="line">849</span><br><span class="line">850</span><br><span class="line">851</span><br><span class="line">852</span><br><span class="line">853</span><br><span class="line">854</span><br><span class="line">855</span><br><span class="line">856</span><br><span class="line">857</span><br><span class="line">858</span><br><span class="line">859</span><br><span class="line">860</span><br><span class="line">861</span><br><span class="line">862</span><br><span class="line">863</span><br><span class="line">864</span><br><span class="line">865</span><br><span class="line">866</span><br><span class="line">867</span><br><span class="line">868</span><br><span class="line">869</span><br><span class="line">870</span><br><span class="line">871</span><br><span class="line">872</span><br><span class="line">873</span><br><span class="line">874</span><br><span class="line">875</span><br><span class="line">876</span><br><span class="line">877</span><br><span class="line">878</span><br><span class="line">879</span><br><span class="line">880</span><br><span class="line">881</span><br><span class="line">882</span><br><span class="line">883</span><br><span class="line">884</span><br><span class="line">885</span><br><span class="line">886</span><br><span class="line">887</span><br><span class="line">888</span><br><span class="line">889</span><br><span class="line">890</span><br><span class="line">891</span><br><span class="line">892</span><br><span class="line">893</span><br><span class="line">894</span><br><span class="line">895</span><br><span class="line">896</span><br><span class="line">897</span><br><span class="line">898</span><br><span class="line">899</span><br><span class="line">900</span><br><span class="line">901</span><br><span class="line">902</span><br><span class="line">903</span><br><span class="line">904</span><br><span class="line">905</span><br><span class="line">906</span><br><span class="line">907</span><br><span class="line">908</span><br><span class="line">909</span><br><span class="line">910</span><br><span class="line">911</span><br><span class="line">912</span><br><span class="line">913</span><br><span class="line">914</span><br><span class="line">915</span><br><span class="line">916</span><br><span class="line">917</span><br><span class="line">918</span><br><span class="line">919</span><br><span class="line">920</span><br><span class="line">921</span><br><span class="line">922</span><br><span class="line">923</span><br><span class="line">924</span><br><span class="line">925</span><br><span class="line">926</span><br><span class="line">927</span><br><span class="line">928</span><br><span class="line">929</span><br><span class="line">930</span><br><span class="line">931</span><br><span class="line">932</span><br><span class="line">933</span><br><span class="line">934</span><br><span class="line">935</span><br><span class="line">936</span><br><span class="line">937</span><br><span class="line">938</span><br><span class="line">939</span><br><span class="line">940</span><br><span class="line">941</span><br><span class="line">942</span><br><span class="line">943</span><br><span class="line">944</span><br><span class="line">945</span><br><span class="line">946</span><br><span class="line">947</span><br><span class="line">948</span><br><span class="line">949</span><br><span class="line">950</span><br><span class="line">951</span><br><span class="line">952</span><br><span class="line">953</span><br><span class="line">954</span><br><span class="line">955</span><br><span class="line">956</span><br><span class="line">957</span><br><span class="line">958</span><br><span class="line">959</span><br><span class="line">960</span><br><span class="line">961</span><br><span class="line">962</span><br><span class="line">963</span><br><span class="line">964</span><br><span class="line">965</span><br><span class="line">966</span><br><span class="line">967</span><br><span class="line">968</span><br><span class="line">969</span><br><span class="line">970</span><br><span class="line">971</span><br><span class="line">972</span><br><span class="line">973</span><br><span class="line">974</span><br><span class="line">975</span><br><span class="line">976</span><br><span class="line">977</span><br><span class="line">978</span><br><span class="line">979</span><br><span class="line">980</span><br><span class="line">981</span><br><span class="line">982</span><br><span class="line">983</span><br><span class="line">984</span><br><span class="line">985</span><br><span class="line">986</span><br><span class="line">987</span><br><span class="line">988</span><br><span class="line">989</span><br><span class="line">990</span><br><span class="line">991</span><br><span class="line">992</span><br><span class="line">993</span><br><span class="line">994</span><br><span class="line">995</span><br><span class="line">996</span><br><span class="line">997</span><br><span class="line">998</span><br><span class="line">999</span><br><span class="line">1000</span><br><span class="line">1001</span><br><span class="line">1002</span><br><span class="line">1003</span><br><span class="line">1004</span><br><span class="line">1005</span><br><span class="line">1006</span><br><span class="line">1007</span><br><span class="line">1008</span><br><span class="line">1009</span><br><span class="line">1010</span><br><span class="line">1011</span><br><span class="line">1012</span><br><span class="line">1013</span><br><span class="line">1014</span><br><span class="line">1015</span><br><span class="line">1016</span><br><span class="line">1017</span><br><span class="line">1018</span><br><span class="line">1019</span><br><span class="line">1020</span><br><span class="line">1021</span><br><span class="line">1022</span><br><span class="line">1023</span><br><span class="line">1024</span><br><span class="line">1025</span><br><span class="line">1026</span><br><span class="line">1027</span><br><span class="line">1028</span><br><span class="line">1029</span><br><span class="line">1030</span><br><span class="line">1031</span><br><span class="line">1032</span><br><span class="line">1033</span><br><span class="line">1034</span><br><span class="line">1035</span><br><span class="line">1036</span><br><span class="line">1037</span><br><span class="line">1038</span><br><span class="line">1039</span><br><span class="line">1040</span><br><span class="line">1041</span><br><span class="line">1042</span><br><span class="line">1043</span><br><span class="line">1044</span><br><span class="line">1045</span><br><span class="line">1046</span><br><span class="line">1047</span><br><span class="line">1048</span><br><span class="line">1049</span><br><span class="line">1050</span><br><span class="line">1051</span><br><span class="line">1052</span><br><span class="line">1053</span><br><span class="line">1054</span><br><span class="line">1055</span><br><span class="line">1056</span><br><span class="line">1057</span><br><span class="line">1058</span><br><span class="line">1059</span><br><span class="line">1060</span><br><span class="line">1061</span><br><span class="line">1062</span><br><span class="line">1063</span><br><span class="line">1064</span><br><span class="line">1065</span><br><span class="line">1066</span><br><span class="line">1067</span><br><span class="line">1068</span><br><span class="line">1069</span><br><span class="line">1070</span><br><span class="line">1071</span><br><span class="line">1072</span><br><span class="line">1073</span><br><span class="line">1074</span><br><span class="line">1075</span><br><span class="line">1076</span><br><span class="line">1077</span><br><span class="line">1078</span><br><span class="line">1079</span><br><span class="line">1080</span><br><span class="line">1081</span><br><span class="line">1082</span><br><span class="line">1083</span><br><span class="line">1084</span><br><span class="line">1085</span><br><span class="line">1086</span><br><span class="line">1087</span><br><span class="line">1088</span><br><span class="line">1089</span><br><span class="line">1090</span><br><span class="line">1091</span><br><span class="line">1092</span><br><span class="line">1093</span><br><span class="line">1094</span><br><span class="line">1095</span><br><span class="line">1096</span><br><span class="line">1097</span><br><span class="line">1098</span><br><span class="line">1099</span><br><span class="line">1100</span><br><span class="line">1101</span><br><span class="line">1102</span><br><span class="line">1103</span><br><span class="line">1104</span><br><span class="line">1105</span><br><span class="line">1106</span><br><span class="line">1107</span><br><span class="line">1108</span><br><span class="line">1109</span><br><span class="line">1110</span><br><span class="line">1111</span><br><span class="line">1112</span><br><span class="line">1113</span><br><span class="line">1114</span><br><span class="line">1115</span><br><span class="line">1116</span><br><span class="line">1117</span><br><span class="line">1118</span><br><span class="line">1119</span><br><span class="line">1120</span><br><span class="line">1121</span><br><span class="line">1122</span><br><span class="line">1123</span><br><span class="line">1124</span><br><span class="line">1125</span><br><span class="line">1126</span><br><span class="line">1127</span><br><span class="line">1128</span><br><span class="line">1129</span><br><span class="line">1130</span><br><span class="line">1131</span><br><span class="line">1132</span><br><span class="line">1133</span><br><span class="line">1134</span><br><span class="line">1135</span><br><span class="line">1136</span><br><span class="line">1137</span><br><span class="line">1138</span><br><span class="line">1139</span><br><span class="line">1140</span><br><span class="line">1141</span><br><span class="line">1142</span><br><span class="line">1143</span><br><span class="line">1144</span><br><span class="line">1145</span><br><span class="line">1146</span><br><span class="line">1147</span><br><span class="line">1148</span><br><span class="line">1149</span><br><span class="line">1150</span><br><span class="line">1151</span><br><span class="line">1152</span><br><span class="line">1153</span><br><span class="line">1154</span><br><span class="line">1155</span><br><span class="line">1156</span><br><span class="line">1157</span><br><span class="line">1158</span><br><span class="line">1159</span><br><span class="line">1160</span><br><span class="line">1161</span><br><span class="line">1162</span><br><span class="line">1163</span><br><span class="line">1164</span><br><span class="line">1165</span><br><span class="line">1166</span><br><span class="line">1167</span><br><span class="line">1168</span><br><span class="line">1169</span><br><span class="line">1170</span><br><span class="line">1171</span><br><span class="line">1172</span><br><span class="line">1173</span><br><span class="line">1174</span><br><span class="line">1175</span><br><span class="line">1176</span><br><span class="line">1177</span><br><span class="line">1178</span><br><span class="line">1179</span><br><span class="line">1180</span><br><span class="line">1181</span><br><span class="line">1182</span><br><span class="line">1183</span><br><span class="line">1184</span><br><span class="line">1185</span><br><span class="line">1186</span><br><span class="line">1187</span><br><span class="line">1188</span><br><span class="line">1189</span><br><span class="line">1190</span><br><span class="line">1191</span><br><span class="line">1192</span><br><span class="line">1193</span><br><span class="line">1194</span><br><span class="line">1195</span><br><span class="line">1196</span><br><span class="line">1197</span><br><span class="line">1198</span><br><span class="line">1199</span><br><span class="line">1200</span><br><span class="line">1201</span><br><span class="line">1202</span><br><span class="line">1203</span><br><span class="line">1204</span><br><span class="line">1205</span><br><span class="line">1206</span><br><span class="line">1207</span><br><span class="line">1208</span><br><span class="line">1209</span><br><span class="line">1210</span><br><span class="line">1211</span><br><span class="line">1212</span><br><span class="line">1213</span><br><span class="line">1214</span><br><span class="line">1215</span><br><span class="line">1216</span><br><span class="line">1217</span><br><span class="line">1218</span><br><span class="line">1219</span><br><span class="line">1220</span><br><span class="line">1221</span><br><span class="line">1222</span><br><span class="line">1223</span><br><span class="line">1224</span><br><span class="line">1225</span><br><span class="line">1226</span><br><span class="line">1227</span><br><span class="line">1228</span><br><span class="line">1229</span><br><span class="line">1230</span><br><span class="line">1231</span><br><span class="line">1232</span><br><span class="line">1233</span><br><span class="line">1234</span><br><span class="line">1235</span><br><span class="line">1236</span><br><span class="line">1237</span><br><span class="line">1238</span><br><span class="line">1239</span><br><span class="line">1240</span><br><span class="line">1241</span><br><span class="line">1242</span><br><span class="line">1243</span><br><span class="line">1244</span><br><span class="line">1245</span><br><span class="line">1246</span><br><span class="line">1247</span><br><span class="line">1248</span><br><span class="line">1249</span><br><span class="line">1250</span><br><span class="line">1251</span><br><span class="line">1252</span><br><span class="line">1253</span><br><span class="line">1254</span><br><span class="line">1255</span><br><span class="line">1256</span><br><span class="line">1257</span><br><span class="line">1258</span><br><span class="line">1259</span><br><span class="line">1260</span><br><span class="line">1261</span><br><span class="line">1262</span><br><span class="line">1263</span><br><span class="line">1264</span><br><span class="line">1265</span><br><span class="line">1266</span><br><span class="line">1267</span><br><span class="line">1268</span><br><span class="line">1269</span><br><span class="line">1270</span><br><span class="line">1271</span><br><span class="line">1272</span><br><span class="line">1273</span><br><span class="line">1274</span><br><span class="line">1275</span><br><span class="line">1276</span><br><span class="line">1277</span><br><span class="line">1278</span><br><span class="line">1279</span><br><span class="line">1280</span><br><span class="line">1281</span><br><span class="line">1282</span><br><span class="line">1283</span><br><span class="line">1284</span><br><span class="line">1285</span><br><span class="line">1286</span><br><span class="line">1287</span><br><span class="line">1288</span><br><span class="line">1289</span><br><span class="line">1290</span><br><span class="line">1291</span><br><span class="line">1292</span><br><span class="line">1293</span><br><span class="line">1294</span><br><span class="line">1295</span><br><span class="line">1296</span><br><span class="line">1297</span><br><span class="line">1298</span><br><span class="line">1299</span><br><span class="line">1300</span><br><span class="line">1301</span><br><span class="line">1302</span><br><span class="line">1303</span><br><span class="line">1304</span><br><span class="line">1305</span><br><span class="line">1306</span><br><span class="line">1307</span><br><span class="line">1308</span><br><span class="line">1309</span><br><span class="line">1310</span><br><span class="line">1311</span><br><span class="line">1312</span><br><span class="line">1313</span><br><span class="line">1314</span><br><span class="line">1315</span><br><span class="line">1316</span><br><span class="line">1317</span><br><span class="line">1318</span><br><span class="line">1319</span><br><span class="line">1320</span><br><span class="line">1321</span><br><span class="line">1322</span><br><span class="line">1323</span><br><span class="line">1324</span><br><span class="line">1325</span><br><span class="line">1326</span><br><span class="line">1327</span><br><span class="line">1328</span><br><span class="line">1329</span><br><span class="line">1330</span><br><span class="line">1331</span><br><span class="line">1332</span><br><span class="line">1333</span><br><span class="line">1334</span><br><span class="line">1335</span><br><span class="line">1336</span><br><span class="line">1337</span><br><span class="line">1338</span><br><span class="line">1339</span><br><span class="line">1340</span><br><span class="line">1341</span><br><span class="line">1342</span><br><span class="line">1343</span><br><span class="line">1344</span><br><span class="line">1345</span><br><span class="line">1346</span><br><span class="line">1347</span><br><span class="line">1348</span><br><span class="line">1349</span><br><span class="line">1350</span><br><span class="line">1351</span><br><span class="line">1352</span><br><span class="line">1353</span><br><span class="line">1354</span><br><span class="line">1355</span><br><span class="line">1356</span><br><span class="line">1357</span><br><span class="line">1358</span><br><span class="line">1359</span><br><span class="line">1360</span><br><span class="line">1361</span><br><span class="line">1362</span><br><span class="line">1363</span><br><span class="line">1364</span><br><span class="line">1365</span><br><span class="line">1366</span><br><span class="line">1367</span><br><span class="line">1368</span><br><span class="line">1369</span><br><span class="line">1370</span><br><span class="line">1371</span><br><span class="line">1372</span><br><span class="line">1373</span><br><span class="line">1374</span><br><span class="line">1375</span><br><span class="line">1376</span><br><span class="line">1377</span><br><span class="line">1378</span><br><span class="line">1379</span><br><span class="line">1380</span><br><span class="line">1381</span><br><span class="line">1382</span><br><span class="line">1383</span><br><span class="line">1384</span><br><span class="line">1385</span><br><span class="line">1386</span><br><span class="line">1387</span><br><span class="line">1388</span><br><span class="line">1389</span><br><span class="line">1390</span><br><span class="line">1391</span><br><span class="line">1392</span><br><span class="line">1393</span><br><span class="line">1394</span><br><span class="line">1395</span><br><span class="line">1396</span><br><span class="line">1397</span><br><span class="line">1398</span><br><span class="line">1399</span><br><span class="line">1400</span><br><span class="line">1401</span><br><span class="line">1402</span><br><span class="line">1403</span><br><span class="line">1404</span><br><span class="line">1405</span><br><span class="line">1406</span><br><span class="line">1407</span><br><span class="line">1408</span><br><span class="line">1409</span><br><span class="line">1410</span><br><span class="line">1411</span><br><span class="line">1412</span><br><span class="line">1413</span><br><span class="line">1414</span><br><span class="line">1415</span><br><span class="line">1416</span><br><span class="line">1417</span><br><span class="line">1418</span><br><span class="line">1419</span><br><span class="line">1420</span><br><span class="line">1421</span><br><span class="line">1422</span><br><span class="line">1423</span><br><span class="line">1424</span><br><span class="line">1425</span><br><span class="line">1426</span><br><span class="line">1427</span><br><span class="line">1428</span><br><span class="line">1429</span><br><span class="line">1430</span><br><span class="line">1431</span><br><span class="line">1432</span><br><span class="line">1433</span><br><span class="line">1434</span><br><span class="line">1435</span><br><span class="line">1436</span><br><span class="line">1437</span><br><span class="line">1438</span><br><span class="line">1439</span><br><span class="line">1440</span><br><span class="line">1441</span><br><span class="line">1442</span><br><span class="line">1443</span><br><span class="line">1444</span><br><span class="line">1445</span><br><span class="line">1446</span><br><span class="line">1447</span><br><span class="line">1448</span><br><span class="line">1449</span><br><span class="line">1450</span><br><span class="line">1451</span><br><span class="line">1452</span><br><span class="line">1453</span><br><span class="line">1454</span><br><span class="line">1455</span><br><span class="line">1456</span><br><span class="line">1457</span><br><span class="line">1458</span><br><span class="line">1459</span><br><span class="line">1460</span><br><span class="line">1461</span><br><span class="line">1462</span><br><span class="line">1463</span><br><span class="line">1464</span><br><span class="line">1465</span><br><span class="line">1466</span><br><span class="line">1467</span><br><span class="line">1468</span><br><span class="line">1469</span><br><span class="line">1470</span><br><span class="line">1471</span><br><span class="line">1472</span><br><span class="line">1473</span><br><span class="line">1474</span><br><span class="line">1475</span><br><span class="line">1476</span><br><span class="line">1477</span><br><span class="line">1478</span><br><span class="line">1479</span><br><span class="line">1480</span><br><span class="line">1481</span><br><span class="line">1482</span><br><span class="line">1483</span><br><span class="line">1484</span><br><span class="line">1485</span><br><span class="line">1486</span><br><span class="line">1487</span><br><span class="line">1488</span><br><span class="line">1489</span><br><span class="line">1490</span><br><span class="line">1491</span><br><span class="line">1492</span><br><span class="line">1493</span><br><span class="line">1494</span><br><span class="line">1495</span><br><span class="line">1496</span><br><span class="line">1497</span><br><span class="line">1498</span><br><span class="line">1499</span><br><span class="line">1500</span><br><span class="line">1501</span><br><span class="line">1502</span><br><span class="line">1503</span><br><span class="line">1504</span><br><span class="line">1505</span><br><span class="line">1506</span><br><span class="line">1507</span><br><span class="line">1508</span><br><span class="line">1509</span><br><span class="line">1510</span><br><span class="line">1511</span><br><span class="line">1512</span><br><span class="line">1513</span><br><span class="line">1514</span><br><span class="line">1515</span><br><span class="line">1516</span><br><span class="line">1517</span><br><span class="line">1518</span><br><span class="line">1519</span><br><span class="line">1520</span><br><span class="line">1521</span><br><span class="line">1522</span><br><span class="line">1523</span><br><span class="line">1524</span><br><span class="line">1525</span><br><span class="line">1526</span><br><span class="line">1527</span><br><span class="line">1528</span><br><span class="line">1529</span><br><span class="line">1530</span><br><span class="line">1531</span><br><span class="line">1532</span><br><span class="line">1533</span><br><span class="line">1534</span><br><span class="line">1535</span><br><span class="line">1536</span><br></pre></td><td class="code"><pre><span class="line">	<span class="comment">/*验证数据库是否存在，存在的话直接删除*/</span></span><br><span class="line">if <span class="keyword">exists</span>(<span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> sys.databases <span class="keyword">where</span> name <span class="operator">=</span> <span class="string">&#x27;DBTEST&#x27;</span>)</span><br><span class="line"><span class="keyword">drop</span> database DBTEST</span><br><span class="line"><span class="comment">--创建数据库</span></span><br><span class="line"><span class="keyword">create</span> database DBTEST</span><br><span class="line"><span class="comment">--创建数据库 数据库的名称为DBTest</span></span><br><span class="line"><span class="keyword">on</span>(<span class="comment">/*on 的意思就是创建数据文件，然后后面跟着的是括号</span></span><br><span class="line"><span class="comment">这个括号就是用来描述这个数据文件的，也就是写一些数据文件</span></span><br><span class="line"><span class="comment">基本的内容*/</span></span><br><span class="line">name <span class="operator">=</span> <span class="string">&#x27;DBTEST&#x27;</span>,</span><br><span class="line"><span class="comment">/*name就是逻辑名称，就是在数据库里面的代号</span></span><br><span class="line"><span class="comment">习惯上主数据文件的文件逻辑名称和数据库的名称一样</span></span><br><span class="line"><span class="comment">然后日志文件一般就是加上log</span></span><br><span class="line"><span class="comment">然后每两个描述句式之间要用逗号隔开*/</span></span><br><span class="line">filename <span class="operator">=</span> <span class="string">&#x27;D:\SqlS\SelfStudy\DBTest\DBTEST.mdf&#x27;</span>,</span><br><span class="line"><span class="comment">/*物理路径，就是实际上在计算机内的文件的文件路径和文件名</span></span><br><span class="line"><span class="comment">设置物理路径的时候不要忘记加上.mdf或者.ldf的后缀*/</span></span><br><span class="line">size <span class="operator">=</span> <span class="number">5</span>mb,<span class="comment">--设置初始大小</span></span><br><span class="line">filegrowth <span class="operator">=</span> <span class="number">2</span>mb,</span><br><span class="line"><span class="comment">--filegrowth = 10%</span></span><br><span class="line"><span class="comment">/*文件的增长方式，文件的增长方式可以写大小</span></span><br><span class="line"><span class="comment">也可以写百分比。*/</span></span><br><span class="line">maxsize <span class="operator">=</span> <span class="number">10</span>mb <span class="comment">/*最大大小，可以不设置*/</span></span><br><span class="line">)</span><br><span class="line">log <span class="keyword">on</span>(</span><br><span class="line"><span class="comment">/*同理 log on 用于编写日志文件</span></span><br><span class="line"><span class="comment">log内的描述方式和数据文件相同*/</span></span><br><span class="line">name <span class="operator">=</span> <span class="string">&#x27;DBTEST_log&#x27;</span>,</span><br><span class="line">filename <span class="operator">=</span>  <span class="string">&#x27;D:\SqlS\SelfStudy\DBTest\DBTEST_log.ldf&#x27;</span>,</span><br><span class="line">size <span class="operator">=</span> <span class="number">5</span>mb,</span><br><span class="line">filegrowth <span class="operator">=</span> <span class="number">2</span>mb</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="comment">--创建数据库简写</span></span><br><span class="line"><span class="keyword">create</span> database DBTEST1</span><br><span class="line"><span class="comment">--如果按照上述见到那的方法创建数据库，所有设置都采用默认值</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*==========以上为创建数据库相关语句============*/</span></span><br><span class="line"> </span><br><span class="line"><span class="comment">/*==========创建数据表============*/</span></span><br><span class="line"></span><br><span class="line">use DBTEST</span><br><span class="line"><span class="comment">/*正常的新建咨询会默认使用master的系统表</span></span><br><span class="line"><span class="comment">如果这个时候直接建表会建到master里面去</span></span><br><span class="line"><span class="comment">所以这里可以在左上角店家更改使用的数据库</span></span><br><span class="line"><span class="comment">也可以直接使用useDBTEST语句*/</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/*删除表*/</span></span><br><span class="line"><span class="keyword">drop</span> <span class="keyword">table</span> Department</span><br><span class="line"><span class="keyword">drop</span> <span class="keyword">table</span> People</span><br><span class="line"><span class="keyword">drop</span> <span class="keyword">table</span> [Rank]</span><br><span class="line"><span class="comment">/*删除表中的数据（表中的列）*/</span></span><br><span class="line"><span class="keyword">DELETE</span> <span class="keyword">FROM</span> Department;</span><br><span class="line"><span class="keyword">DELETE</span> <span class="keyword">FROM</span> People;</span><br><span class="line"><span class="keyword">DELETE</span> <span class="keyword">FROM</span> [Rank];</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/*创建表的基本语法</span></span><br><span class="line"><span class="comment">create table 表名</span></span><br><span class="line"><span class="comment">（字段名1 数据类型，</span></span><br><span class="line"><span class="comment">字段名2，数据类型）</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line">if <span class="keyword">exists</span>(<span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> sys.objects <span class="keyword">where</span> name <span class="operator">=</span> <span class="string">&#x27;Department&#x27;</span><span class="keyword">and</span> type <span class="operator">=</span> <span class="string">&#x27;U&#x27;</span>)</span><br><span class="line">	<span class="keyword">drop</span> <span class="keyword">table</span> Department</span><br><span class="line"><span class="comment">/*建表（部门，职级，员工）*/</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> Department</span><br><span class="line">( </span><br><span class="line">	DepartmentId <span class="type">int</span> <span class="keyword">primary</span> key <span class="keyword">identity</span>(<span class="number">1</span>,<span class="number">1</span>),</span><br><span class="line">	<span class="comment">/*部门编号</span></span><br><span class="line"><span class="comment">	一般的表格都会加一个单独的编号</span></span><br><span class="line"><span class="comment">	一方面防止名称有重复的</span></span><br><span class="line"><span class="comment">	第二方面可以作为主键标识</span></span><br><span class="line"><span class="comment">	primary key 是设置主键</span></span><br><span class="line"><span class="comment">	作为唯一标识</span></span><br><span class="line"><span class="comment">	identity(1,1)自动增长，初始值1，增长步长为1*/</span></span><br><span class="line">	DepartmentName nVarchar(<span class="number">50</span>) <span class="keyword">not</span> <span class="keyword">null</span>, </span><br><span class="line">	<span class="comment">/*部门的名称 字符串类型</span></span><br><span class="line"><span class="comment">	 其中有varchar和nvarchar</span></span><br><span class="line"><span class="comment">	 其中varchar（50）代表50个字符</span></span><br><span class="line"><span class="comment">	 前面加上n变成nvarchar代表50个中文字符或者50个英文字符</span></span><br><span class="line"><span class="comment">	 其中varchar代表可变长度，如果你输入的是一个字符</span></span><br><span class="line"><span class="comment">	 那么这个varchar（50）就是一个字符的长度和大小</span></span><br><span class="line"><span class="comment">	 但是如果是char类型的话就是定长，不管你输入了多少字符 </span></span><br><span class="line"><span class="comment">	 他都是50个字符的大小，所以用varchar大部分情况下更加的 灵活</span></span><br><span class="line"><span class="comment">	 而且可以节省资源*/</span></span><br><span class="line">	 <span class="comment">/*部门描述*/</span></span><br><span class="line">	 DepartmentRemark text</span><br><span class="line">	 <span class="comment">/*text长文本,*/</span></span><br><span class="line">)</span><br><span class="line"><span class="comment">--建立职级表</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> [Rank] </span><br><span class="line"><span class="comment">/*这里 Rank是sql中的关键字  所以需要用[]*/</span></span><br><span class="line">(</span><br><span class="line">	RankId <span class="type">int</span> <span class="keyword">primary</span> key <span class="keyword">identity</span>(<span class="number">1</span>,<span class="number">1</span>),</span><br><span class="line">	RankName nvarchar(<span class="number">50</span>) <span class="keyword">not</span> <span class="keyword">null</span>,</span><br><span class="line">	RankRemark text</span><br><span class="line">	<span class="comment">/*分别床架按了职级的编号</span></span><br><span class="line"><span class="comment">	职级的名称、职级的描述*/</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="comment">--建立员工表</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> People</span><br><span class="line">(</span><br><span class="line">	PeopleId <span class="type">int</span> <span class="keyword">primary</span> key <span class="keyword">identity</span>(<span class="number">1</span>,<span class="number">1</span>),</span><br><span class="line">	PeopleName  nvarchar(<span class="number">20</span>) <span class="keyword">not</span> <span class="keyword">null</span>,</span><br><span class="line">	PeopleGender nvarchar(<span class="number">1</span>) <span class="keyword">default</span>(<span class="string">&#x27;男&#x27;</span>)<span class="keyword">check</span>(PeoPleGender <span class="operator">=</span> <span class="string">&#x27;男&#x27;</span><span class="keyword">or</span> PeoPleGender <span class="operator">=</span> <span class="string">&#x27;女&#x27;</span>)<span class="keyword">not</span> <span class="keyword">null</span>,</span><br><span class="line">	<span class="comment">/*这里通过check加了一个约束，设置性别的值只能为男或者女</span></span><br><span class="line"><span class="comment">	同时还添加了一个默认值，让这个性别默认为男*/</span></span><br><span class="line">	PeopleBirth datetime <span class="keyword">not</span> <span class="keyword">null</span>,</span><br><span class="line">	PeopleSalary  <span class="type">decimal</span>(<span class="number">12</span>,<span class="number">2</span>) <span class="keyword">check</span>(Peoplesalary <span class="operator">&gt;=</span> <span class="number">1000</span> <span class="keyword">and</span> Peoplesalary <span class="operator">&lt;=</span> <span class="number">1000000</span>)<span class="keyword">not</span> <span class="keyword">null</span>,</span><br><span class="line">	PeoplePhone <span class="type">varchar</span>(<span class="number">20</span>) <span class="keyword">unique</span> <span class="keyword">not</span> <span class="keyword">null</span>, </span><br><span class="line">	<span class="comment">/*unique关键字用于创建唯一约束，首先他的本质也是一个约束</span></span><br><span class="line"><span class="comment">	然后唯一约束就是爆炸该列中所以的值都是唯一的，不能有重复的值*/</span></span><br><span class="line">	PeopleAddress <span class="type">varchar</span>(<span class="number">100</span>),</span><br><span class="line">	PeopleAddTime smalldatetime <span class="keyword">default</span>(getdate()),  <span class="comment">--添加时间</span></span><br><span class="line">	<span class="comment">/*这里用了一个getdate，是系统默认的函数，这个函数可以获取当前的时间</span></span><br><span class="line"><span class="comment">	*/</span></span><br><span class="line">	<span class="comment">/*添加外键*/</span></span><br><span class="line">	DepartmentId <span class="type">int</span> <span class="keyword">references</span> Department(DepartmentId) <span class="keyword">not</span> <span class="keyword">null</span>,</span><br><span class="line">	RankId <span class="type">int</span> <span class="keyword">references</span> [Rank](RankId) <span class="keyword">not</span> <span class="keyword">null</span></span><br><span class="line"><span class="comment">/*添加这个reference字段就是添加了外键</span></span><br><span class="line"><span class="comment">然后添加了reference字段之后他就会自动去</span></span><br><span class="line"><span class="comment">外键对应的表中去寻找，如果找不到对应的值</span></span><br><span class="line"><span class="comment">他就不会添加</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="comment">/*关于getdate（）</span></span><br><span class="line"><span class="comment">在sqls中 getdate()是一个内置函数，用于获取对当前的系统日期和时间。它返回一个datetime类型的值，</span></span><br><span class="line"><span class="comment">表示当前的日期和时间</span></span><br><span class="line"><span class="comment">基本用法</span></span><br><span class="line"><span class="comment">select getdate() as currentdatetime</span></span><br><span class="line"><span class="comment">用于插入数据</span></span><br><span class="line"><span class="comment">在插入数据时，你可以使用getdate（）来记录当前的时间。例如</span></span><br><span class="line"><span class="comment">INSERT INTO Orders (OrderDate) VALUES (GETDATE());</span></span><br><span class="line"><span class="comment">***与其他函数结合使用</span></span><br><span class="line"><span class="comment">很多时候需要我们得到当前的年份月份，所以我们可以用getdate（）提取年月日</span></span><br><span class="line"><span class="comment">语法</span></span><br><span class="line"><span class="comment">select year(getdate()) as currentyear</span></span><br><span class="line"><span class="comment">select month(getdate()) as currentmonth</span></span><br><span class="line"><span class="comment">select day(getdate()) as currentday</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="comment">/*关于日期</span></span><br><span class="line"><span class="comment">datetime:</span></span><br><span class="line"><span class="comment">范围：1753-9999 年。</span></span><br><span class="line"><span class="comment">精度：可以存储的时间精度为 3.33 毫秒。</span></span><br><span class="line"><span class="comment">存储大小：8 字节。</span></span><br><span class="line"><span class="comment">适用场景：适合需要高精度和大范围的日期时间。</span></span><br><span class="line"><span class="comment">smalldatetime:</span></span><br><span class="line"><span class="comment">范围：1900-2079 年。</span></span><br><span class="line"><span class="comment">精度：可以存储的时间精度为 1 分钟。</span></span><br><span class="line"><span class="comment">存储大小：4 字节。</span></span><br><span class="line"><span class="comment">适用场景：适合对时间精度要求不高且范围较小的应用。</span></span><br><span class="line"><span class="comment">date:</span></span><br><span class="line"><span class="comment">范围：0001-9999 年（不包括时间部分）。</span></span><br><span class="line"><span class="comment">精度：只存储日期，不存储时间。</span></span><br><span class="line"><span class="comment">存储大小：3 字节。</span></span><br><span class="line"><span class="comment">适用场景：适合仅需要存储日期信息的场合，不需要时间。*/</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/* 关于refence</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">在sqls中，reference关键字用于定义外键约束，它用于在一个表中建立对另一个表的引用。</span></span><br><span class="line"><span class="comment">外键约束的作用是确保了数字的一致性和完整性，它运行的逻辑就是你通过这个关键字添加的值</span></span><br><span class="line"><span class="comment">本质上是一种引用，你去引用别的表里面的数值，所以如果你通过这个关键字去添加列，再你输入值的时候</span></span><br><span class="line"><span class="comment">他就回去查找这个值在主表中是否存在，如果不存在就不会添加，也就是说没办法引用主表中不存在的数据*/</span></span><br><span class="line"></span><br><span class="line">use DBTEST</span><br><span class="line"><span class="comment">/*===表结构和约束的维护=====*/</span></span><br><span class="line"><span class="comment">/*基础知识 sqls中的几种约束</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">主键约束（PRIMARY KEY）：</span></span><br><span class="line"><span class="comment">确保表中每一行的唯一性。</span></span><br><span class="line"><span class="comment">不允许为空（NULL），每个主键值必须唯一。</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">外键约束（FOREIGN KEY）：</span></span><br><span class="line"><span class="comment">用于在两个表之间建立关系。</span></span><br><span class="line"><span class="comment">确保外键列的值必须在参考表的主键或唯一键中存在，以保持数据的完整性。</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">唯一约束（UNIQUE）：</span></span><br><span class="line"><span class="comment">确保列中的所有值都是唯一的，但允许空值（NULL）。</span></span><br><span class="line"><span class="comment">可以应用于一个或多个列的组合。</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">非空约束（NOT NULL）：</span></span><br><span class="line"><span class="comment">确保列不能包含空值（NULL），强制要求输入数据。</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">检查约束（CHECK）：</span></span><br><span class="line"><span class="comment">限制列中允许的值范围，例如，可以要求某个年龄列的值必须大于 0。</span></span><br><span class="line"><span class="comment">可以使用表达式来定义条件。</span></span><br><span class="line"><span class="comment">默认约束（DEFAULT）：</span></span><br><span class="line"><span class="comment">为列设置一个默认值，当插入新行时如果未提供该列的值，将使用默认值。</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/*修改表结构*/</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*下面三个操作本质上都是在修改原有的表格的结构</span></span><br><span class="line"><span class="comment">所以都要用alter table起手</span></span><br><span class="line"><span class="comment">比如添加就是alter table 表名  add 新列名 数据类型</span></span><br><span class="line"><span class="comment">删除列的语法就是</span></span><br><span class="line"><span class="comment">alter table 表名 drop column 列名</span></span><br><span class="line"><span class="comment">drop 就不需要类型了 但是要加一个关键字</span></span><br><span class="line"><span class="comment">column 就是列的意思</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">修改列的语法</span></span><br><span class="line"><span class="comment">alter table 表名 alter column  列名 数据类型 </span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/* 添加列*/</span></span><br><span class="line"> <span class="comment">/*假设现在给员工表添加一列邮箱*/</span></span><br><span class="line"> <span class="keyword">alter</span> <span class="keyword">table</span> People <span class="keyword">add</span> PeopleMail <span class="type">varchar</span>(<span class="number">50</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">/*删除列*/</span></span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> People <span class="keyword">drop</span> <span class="keyword">column</span> PeopleMail</span><br><span class="line"></span><br><span class="line"><span class="comment">/*3、修改列*/</span></span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> People <span class="keyword">alter</span> <span class="keyword">column</span> PeopleAddress <span class="type">varchar</span>(<span class="number">40</span>)</span><br><span class="line"><span class="comment">/*这种情况下 这种语句非常有可能报错</span></span><br><span class="line"><span class="comment">因为现在表中是空的没有数据，但是实际上如果有人输入了一个</span></span><br><span class="line"><span class="comment">超过40个字符的地址，那么这里执行语句的时候就会报错。*/</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*维护约束*/</span></span><br><span class="line"><span class="comment">--删除约束</span></span><br><span class="line"><span class="comment">/*删除约束他的本质也是要去修改表</span></span><br><span class="line"><span class="comment">所以这里也是要用alter table起手</span></span><br><span class="line"><span class="comment">语法 alter table 表名 drop constraint 约束名*/</span></span><br><span class="line"><span class="comment">--删除月薪的约束</span></span><br><span class="line"><span class="keyword">alter</span>  <span class="keyword">table</span> People <span class="keyword">drop</span> <span class="keyword">constraint</span> CK__People__PeopleSa__5165187F</span><br><span class="line"></span><br><span class="line"><span class="comment">/*添加约束</span></span><br><span class="line"><span class="comment">添加check约束的语法</span></span><br><span class="line"><span class="comment">check约束是用来判断输入的值是不是我们想要的值</span></span><br><span class="line"><span class="comment">添加工资字段约束，工资必须在1000-一百万之间*/</span></span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> PeoPle <span class="keyword">add</span> <span class="keyword">constraint</span> Ck_PeoPle_Salary </span><br><span class="line"><span class="keyword">check</span>(Peoplesalary <span class="operator">&gt;=</span> <span class="number">1000</span> <span class="keyword">and</span> Peoplesalary <span class="operator">&lt;=</span><span class="number">1000000</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/*添加主键约束的语法</span></span><br><span class="line"><span class="comment">alter table 表名 add constraint 约束名 primary key(列名)</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">添加唯一约束的语法</span></span><br><span class="line"><span class="comment">alter table 表名 add constraint 约束名 unique(列名)</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">添加默认值约束</span></span><br><span class="line"><span class="comment">alter table 表名 add constraint 约束名 default 默认值 for 列名</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">添加外键约束</span></span><br><span class="line"><span class="comment">alter table 表名 add constraint 约束名 foreign fey (列名)</span></span><br><span class="line"><span class="comment">reference 关联表名（列名（主键））</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*===插入数据=====*/</span></span><br><span class="line"><span class="comment">--向部门表插入数据</span></span><br><span class="line"><span class="comment">/*insert into 表名 (列1,列2)</span></span><br><span class="line"><span class="comment">values(&#x27;值1&#x27;,&#x27;值2&#x27;)</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> Department(DepartmentName,DepartmentRemark)</span><br><span class="line"><span class="keyword">values</span>(<span class="string">&#x27;市场部&#x27;</span>,<span class="string">&#x27;...&#x27;</span>)</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> Department(DepartmentName,DepartmentRemark)</span><br><span class="line"><span class="keyword">values</span>(<span class="string">&#x27;软件部&#x27;</span>,<span class="string">&#x27;...&#x27;</span>)</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> Department(DepartmentName,DepartmentRemark)</span><br><span class="line"><span class="keyword">values</span>(<span class="string">&#x27;企划部&#x27;</span>,<span class="string">&#x27;...&#x27;</span>) </span><br><span class="line"><span class="comment">/*关于数据的插入还有一种简写*/</span></span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> Department</span><br><span class="line"><span class="keyword">values</span> (<span class="string">&#x27;硬件部&#x27;</span>,<span class="string">&#x27;...&#x27;</span>)</span><br><span class="line"><span class="comment">/*但是这种简写一般不会用，因为这种简写有非常大的缺点</span></span><br><span class="line"><span class="comment">就是简写是根据默认的字段顺序写的，所以可能会遇到插入的值</span></span><br><span class="line"><span class="comment">插入错了列</span></span><br><span class="line"><span class="comment">比如上面的部门名和部门描述的值插入反了的情况</span></span><br><span class="line"><span class="comment">所以一般情况下不会用这种简写*/</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*一次性插入多行数据*/</span></span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> Department(DepartmentName,DepartmentRemark)</span><br><span class="line"><span class="keyword">select</span> <span class="string">&#x27;测试部&#x27;</span>,<span class="string">&#x27;...&#x27;</span><span class="keyword">union</span></span><br><span class="line"><span class="keyword">select</span><span class="string">&#x27;实施部&#x27;</span>,<span class="string">&#x27;...&#x27;</span><span class="keyword">union</span></span><br><span class="line"><span class="keyword">select</span><span class="string">&#x27;产品部&#x27;</span>,<span class="string">&#x27;...&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*向职级表插入数据*/</span></span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> [Rank](RankName,RankRemark)</span><br><span class="line"><span class="keyword">values</span>(<span class="string">&#x27;初级&#x27;</span>,<span class="string">&#x27;...&#x27;</span>)</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> [Rank](RankName,RankRemark)</span><br><span class="line"><span class="keyword">values</span>(<span class="string">&#x27;中级&#x27;</span>,<span class="string">&#x27;...&#x27;</span>)</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> [Rank](RankName,RankRemark)</span><br><span class="line"><span class="keyword">values</span>(<span class="string">&#x27;高级&#x27;</span>,<span class="string">&#x27;...&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">/*向员工表中插入数据*/</span></span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> People(DepartmentId,RankId,PeopleName,PeopleGender,PeopleBirth,</span><br><span class="line">PeopleSalary,PeoplePhone,PeopleAddress,PeopleAddTime)</span><br><span class="line"><span class="keyword">values</span>(<span class="number">1</span>,<span class="number">3</span>,<span class="string">&#x27;刘备&#x27;</span>,<span class="string">&#x27;男&#x27;</span>,<span class="string">&#x27;1984-7-9&#x27;</span>,<span class="number">20000</span>,<span class="string">&#x27;13554785452&#x27;</span>,<span class="string">&#x27;成都&#x27;</span>,GETDATE())</span><br><span class="line"></span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> People(DepartmentId,RankId,PeopleName,PeopleGender,PeopleBirth,</span><br><span class="line">PeopleSalary,PeoplePhone,PeopleAddress,PeopleAddTime)</span><br><span class="line"><span class="keyword">values</span>(<span class="number">1</span>,<span class="number">2</span>,<span class="string">&#x27;孙尚香&#x27;</span>,<span class="string">&#x27;女&#x27;</span>,<span class="string">&#x27;1987-7-9&#x27;</span>,<span class="number">15000</span>,<span class="string">&#x27;13256854578&#x27;</span>,<span class="string">&#x27;荆州&#x27;</span>,GETDATE())</span><br><span class="line"></span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> People(DepartmentId,RankId,PeopleName,PeopleGender,PeopleBirth,</span><br><span class="line">PeopleSalary,PeoplePhone,PeopleAddress,PeopleAddTime)</span><br><span class="line"><span class="keyword">values</span>(<span class="number">1</span>,<span class="number">1</span>,<span class="string">&#x27;关羽&#x27;</span>,<span class="string">&#x27;男&#x27;</span>,<span class="string">&#x27;1988-8-8&#x27;</span>,<span class="number">12000</span>,<span class="string">&#x27;13985745871&#x27;</span>,<span class="string">&#x27;荆州&#x27;</span>,GETDATE())</span><br><span class="line"></span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> People(DepartmentId,RankId,PeopleName,PeopleGender,PeopleBirth,</span><br><span class="line">PeopleSalary,PeoplePhone,PeopleAddress,PeopleAddTime)</span><br><span class="line"><span class="keyword">values</span>(<span class="number">1</span>,<span class="number">1</span>,<span class="string">&#x27;张飞&#x27;</span>,<span class="string">&#x27;男&#x27;</span>,<span class="string">&#x27;1990-8-8&#x27;</span>,<span class="number">8000</span>,<span class="string">&#x27;13535987412&#x27;</span>,<span class="string">&#x27;宜昌&#x27;</span>,GETDATE())</span><br><span class="line"></span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> People(DepartmentId,RankId,PeopleName,PeopleGender,PeopleBirth,</span><br><span class="line">PeopleSalary,PeoplePhone,PeopleAddress,PeopleAddTime)</span><br><span class="line"><span class="keyword">values</span>(<span class="number">2</span>,<span class="number">3</span>,<span class="string">&#x27;赵云&#x27;</span>,<span class="string">&#x27;男&#x27;</span>,<span class="string">&#x27;1989-8-8&#x27;</span>,<span class="number">9000</span>,<span class="string">&#x27;13845789568&#x27;</span>,<span class="string">&#x27;宜昌&#x27;</span>,GETDATE())</span><br><span class="line"></span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> People(DepartmentId,RankId,PeopleName,PeopleGender,PeopleBirth,</span><br><span class="line">PeopleSalary,PeoplePhone,PeopleAddress,PeopleAddTime)</span><br><span class="line"><span class="keyword">values</span>(<span class="number">3</span>,<span class="number">3</span>,<span class="string">&#x27;马超&#x27;</span>,<span class="string">&#x27;男&#x27;</span>,<span class="string">&#x27;1995-4-8&#x27;</span>,<span class="number">9500</span>,<span class="string">&#x27;13878562568&#x27;</span>,<span class="string">&#x27;香港&#x27;</span>,GETDATE())</span><br><span class="line"></span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> People(DepartmentId,RankId,PeopleName,PeopleGender,PeopleBirth,</span><br><span class="line">PeopleSalary,PeoplePhone,PeopleAddress,PeopleAddTime)</span><br><span class="line"><span class="keyword">values</span>(<span class="number">3</span>,<span class="number">2</span>,<span class="string">&#x27;黄盖&#x27;</span>,<span class="string">&#x27;男&#x27;</span>,<span class="string">&#x27;1989-4-20&#x27;</span>,<span class="number">8500</span>,<span class="string">&#x27;13335457412&#x27;</span>,<span class="string">&#x27;武汉&#x27;</span>,GETDATE())</span><br><span class="line"></span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> People(DepartmentId,RankId,PeopleName,PeopleGender,PeopleBirth,</span><br><span class="line">PeopleSalary,PeoplePhone,PeopleAddress,PeopleAddTime)</span><br><span class="line"><span class="keyword">values</span>(<span class="number">3</span>,<span class="number">1</span>,<span class="string">&#x27;貂蝉&#x27;</span>,<span class="string">&#x27;女&#x27;</span>,<span class="string">&#x27;1989-4-20&#x27;</span>,<span class="number">6500</span>,<span class="string">&#x27;13437100050&#x27;</span>,<span class="string">&#x27;武汉&#x27;</span>,GETDATE())</span><br><span class="line"></span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> People(DepartmentId,RankId,PeopleName,PeopleGender,PeopleBirth,</span><br><span class="line">PeopleSalary,PeoplePhone,PeopleAddress,PeopleAddTime)</span><br><span class="line"><span class="keyword">values</span>(<span class="number">2</span>,<span class="number">2</span>,<span class="string">&#x27;曹操&#x27;</span>,<span class="string">&#x27;男&#x27;</span>,<span class="string">&#x27;1987-12-20&#x27;</span>,<span class="number">25000</span>,<span class="string">&#x27;13889562354&#x27;</span>,<span class="string">&#x27;北京&#x27;</span>,GETDATE())</span><br><span class="line"></span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> People(DepartmentId,RankId,PeopleName,PeopleGender,PeopleBirth,</span><br><span class="line">PeopleSalary,PeoplePhone,PeopleAddress,PeopleAddTime)</span><br><span class="line"><span class="keyword">values</span>(<span class="number">2</span>,<span class="number">3</span>,<span class="string">&#x27;许褚&#x27;</span>,<span class="string">&#x27;男&#x27;</span>,<span class="string">&#x27;1981-11-11&#x27;</span>,<span class="number">9000</span>,<span class="string">&#x27;13385299632&#x27;</span>,<span class="string">&#x27;北京&#x27;</span>,GETDATE())</span><br><span class="line"></span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> People(DepartmentId,RankId,PeopleName,PeopleGender,PeopleBirth,</span><br><span class="line">PeopleSalary,PeoplePhone,PeopleAddress,PeopleAddTime)</span><br><span class="line"><span class="keyword">values</span>(<span class="number">2</span>,<span class="number">1</span>,<span class="string">&#x27;典韦&#x27;</span>,<span class="string">&#x27;男&#x27;</span>,<span class="string">&#x27;1978-1-13&#x27;</span>,<span class="number">8000</span>,<span class="string">&#x27;1347854263&#x27;</span>,<span class="string">&#x27;上海&#x27;</span>,GETDATE())</span><br><span class="line"></span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> People(DepartmentId,RankId,PeopleName,PeopleGender,PeopleBirth,</span><br><span class="line">PeopleSalary,PeoplePhone,PeopleAddress,PeopleAddTime)</span><br><span class="line"><span class="keyword">values</span>(<span class="number">1</span>,<span class="number">1</span>,<span class="string">&#x27;曹仁&#x27;</span>,<span class="string">&#x27;男&#x27;</span>,<span class="string">&#x27;1998-12-12&#x27;</span>,<span class="number">7500</span>,<span class="string">&#x27;13878523695&#x27;</span>,<span class="string">&#x27;深圳&#x27;</span>,GETDATE())</span><br><span class="line"></span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> People(DepartmentId,RankId,PeopleName,PeopleGender,PeopleBirth,</span><br><span class="line">PeopleSalary,PeoplePhone,PeopleAddress,PeopleAddTime)</span><br><span class="line"><span class="keyword">values</span>(<span class="number">1</span>,<span class="number">3</span>,<span class="string">&#x27;孙坚&#x27;</span>,<span class="string">&#x27;男&#x27;</span>,<span class="string">&#x27;1968-11-22&#x27;</span>,<span class="number">11000</span>,<span class="string">&#x27;13558745874&#x27;</span>,<span class="string">&#x27;深圳&#x27;</span>,GETDATE())</span><br><span class="line"></span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> People(DepartmentId,RankId,PeopleName,PeopleGender,PeopleBirth,</span><br><span class="line">PeopleSalary,PeoplePhone,PeopleAddress,PeopleAddTime)</span><br><span class="line"><span class="keyword">values</span>(<span class="number">3</span>,<span class="number">1</span>,<span class="string">&#x27;孙策&#x27;</span>,<span class="string">&#x27;男&#x27;</span>,<span class="string">&#x27;1988-1-22&#x27;</span>,<span class="number">11000</span>,<span class="string">&#x27;1355874874&#x27;</span>,<span class="string">&#x27;深圳&#x27;</span>,GETDATE())</span><br><span class="line"></span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> People(DepartmentId,RankId,PeopleName,PeopleGender,PeopleBirth,</span><br><span class="line">PeopleSalary,PeoplePhone,PeopleAddress,PeopleAddTime)</span><br><span class="line"><span class="keyword">values</span>(<span class="number">3</span>,<span class="number">2</span>,<span class="string">&#x27;孙权&#x27;</span>,<span class="string">&#x27;男&#x27;</span>,<span class="string">&#x27;1990-2-21&#x27;</span>,<span class="number">12000</span>,<span class="string">&#x27;13698745214&#x27;</span>,<span class="string">&#x27;深圳&#x27;</span>,GETDATE())</span><br><span class="line"></span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> People(DepartmentId,RankId,PeopleName,PeopleGender,PeopleBirth,</span><br><span class="line">PeopleSalary,PeoplePhone,PeopleAddress,PeopleAddTime)</span><br><span class="line"><span class="keyword">values</span>(<span class="number">3</span>,<span class="number">2</span>,<span class="string">&#x27;大乔&#x27;</span>,<span class="string">&#x27;女&#x27;</span>,<span class="string">&#x27;1995-2-21&#x27;</span>,<span class="number">13000</span>,<span class="string">&#x27;13985478512&#x27;</span>,<span class="string">&#x27;上海&#x27;</span>,GETDATE())</span><br><span class="line"></span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> People(DepartmentId,RankId,PeopleName,PeopleGender,PeopleBirth,</span><br><span class="line">PeopleSalary,PeoplePhone,PeopleAddress,PeopleAddTime)</span><br><span class="line"><span class="keyword">values</span>(<span class="number">2</span>,<span class="number">1</span>,<span class="string">&#x27;小乔&#x27;</span>,<span class="string">&#x27;女&#x27;</span>,<span class="string">&#x27;1996-2-21&#x27;</span>,<span class="number">13500</span>,<span class="string">&#x27;13778787874&#x27;</span>,<span class="string">&#x27;北京&#x27;</span>,GETDATE())</span><br><span class="line"></span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> People(DepartmentId,RankId,PeopleName,PeopleGender,PeopleBirth,</span><br><span class="line">PeopleSalary,PeoplePhone,PeopleAddress,PeopleAddTime)</span><br><span class="line"><span class="keyword">values</span>(<span class="number">1</span>,<span class="number">2</span>,<span class="string">&#x27;周瑜&#x27;</span>,<span class="string">&#x27;男&#x27;</span>,<span class="string">&#x27;1992-10-11&#x27;</span>,<span class="number">8000</span>,<span class="string">&#x27;13987455214&#x27;</span>,<span class="string">&#x27;武汉&#x27;</span>,GETDATE())</span><br><span class="line"></span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> People(DepartmentId,RankId,PeopleName,PeopleGender,PeopleBirth,</span><br><span class="line">PeopleSalary,PeoplePhone,PeopleAddress,PeopleAddTime)</span><br><span class="line"><span class="keyword">values</span>(<span class="number">2</span>,<span class="number">3</span>,<span class="string">&#x27;鲁肃&#x27;</span>,<span class="string">&#x27;男&#x27;</span>,<span class="string">&#x27;1984-9-10&#x27;</span>,<span class="number">5500</span>,<span class="string">&#x27;13254785965&#x27;</span>,<span class="string">&#x27;成都&#x27;</span>,GETDATE())</span><br><span class="line"></span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> People(DepartmentId,RankId,PeopleName,PeopleGender,PeopleBirth,</span><br><span class="line">PeopleSalary,PeoplePhone,PeopleAddress,PeopleAddTime)</span><br><span class="line"><span class="keyword">values</span>(<span class="number">3</span>,<span class="number">3</span>,<span class="string">&#x27;吕蒙&#x27;</span>,<span class="string">&#x27;男&#x27;</span>,<span class="string">&#x27;1987-5-19&#x27;</span>,<span class="number">8500</span>,<span class="string">&#x27;13352197364&#x27;</span>,<span class="string">&#x27;成都 &#x27;</span>,GETDATE())</span><br><span class="line"></span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> People(DepartmentId,RankId,PeopleName,PeopleGender,PeopleBirth,</span><br><span class="line">PeopleSalary,PeoplePhone,PeopleAddress,PeopleAddTime)</span><br><span class="line"><span class="keyword">values</span>(<span class="number">1</span>,<span class="number">1</span>,<span class="string">&#x27;陆逊&#x27;</span>,<span class="string">&#x27;男&#x27;</span>,<span class="string">&#x27;1996-5-19&#x27;</span>,<span class="number">7500</span>,<span class="string">&#x27;13025457392&#x27;</span>,<span class="string">&#x27;南京&#x27;</span>,GETDATE())</span><br><span class="line"></span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> People(DepartmentId,RankId,PeopleName,PeopleGender,PeopleBirth,</span><br><span class="line">PeopleSalary,PeoplePhone,PeopleAddress,PeopleAddTime)</span><br><span class="line"><span class="keyword">values</span>(<span class="number">1</span>,<span class="number">2</span>,<span class="string">&#x27;太史慈&#x27;</span>,<span class="string">&#x27;男&#x27;</span>,<span class="string">&#x27;1983-6-1&#x27;</span>,<span class="number">7500</span>,<span class="string">&#x27;13077778888&#x27;</span>,<span class="string">&#x27;上海&#x27;</span>,GETDATE())</span><br><span class="line"></span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> People(DepartmentId,RankId,PeopleName,PeopleGender,PeopleBirth,</span><br><span class="line">PeopleSalary,PeoplePhone,PeopleAddress,PeopleAddTime)</span><br><span class="line"><span class="keyword">values</span>(<span class="number">1</span>,<span class="number">2</span>,<span class="string">&#x27;aaaa&#x27;</span>,<span class="string">&#x27;男&#x27;</span>,<span class="string">&#x27;1983-6-1&#x27;</span>,<span class="number">7500</span>,<span class="string">&#x27;13177778888&#x27;</span>,<span class="string">&#x27;上海&#x27;</span>,GETDATE())</span><br><span class="line"></span><br><span class="line">use DBTEST</span><br><span class="line"><span class="comment">/*修改表格中的数据</span></span><br><span class="line"><span class="comment">语法</span></span><br><span class="line"><span class="comment">update 表名 set 字段1 = 值1, 字段2 = 值2 where  条件</span></span><br><span class="line"><span class="comment">*/</span> </span><br><span class="line"><span class="comment">/*工资调整，每个人加薪一千块*/</span></span><br><span class="line"><span class="keyword">update</span> People <span class="keyword">set</span> PeopleSalary <span class="operator">=</span> PeopleSalary<span class="operator">+</span><span class="number">1000</span></span><br><span class="line"><span class="comment">/*这里一般要用where 来确定自己要更改的到底是哪一行数据</span></span><br><span class="line"><span class="comment">但是因为这里是要给所有人都加薪，所以无所谓*/</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> People</span><br><span class="line"><span class="comment">/*上面的语句是用来直接查询People表中的所有 数据的*/</span></span><br><span class="line"><span class="comment">/*给黄盖一个人的工资加500*/</span></span><br><span class="line"><span class="keyword">update</span> People <span class="keyword">set</span> PeopleSalary <span class="operator">=</span> PeopleSalary <span class="operator">+</span> <span class="number">500</span> <span class="keyword">where</span> PeopleName <span class="operator">=</span> <span class="string">&#x27;黄盖&#x27;</span></span><br><span class="line"><span class="comment">/*给员工编号为7的人减薪500*/</span></span><br><span class="line"><span class="keyword">update</span> People <span class="keyword">set</span> PeopleSalary <span class="operator">=</span> PeopleSalary <span class="operator">-</span> <span class="number">500</span> <span class="keyword">where</span> PeopleId <span class="operator">=</span> <span class="number">7</span></span><br><span class="line"><span class="comment">/*将软件部(部门编号1)人员工资低于15000的调整成15000*/</span></span><br><span class="line"><span class="keyword">update</span> PeoPle <span class="keyword">set</span> PeoPleSalary <span class="operator">=</span> <span class="number">15000</span> </span><br><span class="line"><span class="keyword">where</span> DepartmentId <span class="operator">=</span> <span class="number">1</span> <span class="keyword">and</span> PeopleSalary <span class="operator">&lt;</span><span class="number">15000</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*多字段修改</span></span><br><span class="line"><span class="comment">修改刘备的工资为以前的两倍，再把地址改为北京*/</span></span><br><span class="line"><span class="keyword">update</span> People <span class="keyword">set</span> PeopleSalary <span class="operator">=</span> PeopleSalary<span class="operator">*</span><span class="number">2</span>,</span><br><span class="line">PeopleAddress <span class="operator">=</span> <span class="string">&#x27;北京&#x27;</span></span><br><span class="line"><span class="keyword">where</span> PeopleName <span class="operator">=</span> <span class="string">&#x27;刘备&#x27;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/*删除数据的语法*/</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">delete  from 表名 where 条件 </span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">删除员工表所有记录</span></span><br><span class="line"><span class="comment">delete from People</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*删除市场部 中 工资大于1w的人*/</span></span><br><span class="line"><span class="keyword">delete</span> <span class="keyword">from</span> People</span><br><span class="line"><span class="keyword">where</span> PeopleSalary <span class="operator">&gt;</span> <span class="number">10000</span> <span class="keyword">and</span> DepartmentId <span class="operator">=</span> <span class="number">3</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*关于删除</span></span><br><span class="line"><span class="comment">drop,truncate,delete</span></span><br><span class="line"><span class="comment">drop table People 删除表对象</span></span><br><span class="line"><span class="comment">这个操作实际上是把整个表删除了</span></span><br><span class="line"><span class="comment">不单单是 删除了表中的数据，是连表格本身都删除掉了 </span></span><br><span class="line"><span class="comment">truncate table People 清空数据 表依然存在</span></span><br><span class="line"><span class="comment">delete from People 删除所有数据 表依然存在</span></span><br><span class="line"><span class="comment">truncate 和delete的区别</span></span><br><span class="line"><span class="comment">truncate直接删除所有数据，不可以带附加条件</span></span><br><span class="line"><span class="comment">不可以删除部分数据，直接清空表内容</span></span><br><span class="line"><span class="comment">delete可以带条件可以只删除部分数据</span></span><br><span class="line"><span class="comment">自动编号：</span></span><br><span class="line"><span class="comment">假设表中自动编号为12345</span></span><br><span class="line"><span class="comment">如果使用truncate之后添加数据 编号仍然是12345</span></span><br><span class="line"><span class="comment">使用delete删除数据，删除的自动编号永远不会在存在</span></span><br><span class="line"><span class="comment">如果用delete删除 之后添加数据就会变成67891</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*======查询语句=====*/</span></span><br><span class="line"><span class="comment">/*查询基本语法</span></span><br><span class="line"><span class="comment">select * from 表名</span></span><br><span class="line"><span class="comment">查询所有列所有行</span></span><br><span class="line"><span class="comment">select 列名 from 表名 where 条件（用于 筛选行）</span></span><br><span class="line"><span class="comment"> </span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*查询所有列所有行*/</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> Department</span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> [Rank]</span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> People</span><br><span class="line"></span><br><span class="line"><span class="comment">/*查询指定列（姓名性别生日月薪电话）*/</span></span><br><span class="line"><span class="keyword">select</span> PeopleName <span class="keyword">as</span> 姓名,</span><br><span class="line">PeopleGender <span class="keyword">as</span> 性别,</span><br><span class="line">PeopleBirth <span class="keyword">as</span> 生日,</span><br><span class="line">PeopleSalary <span class="keyword">as</span> 月薪,</span><br><span class="line">PeoplePhone <span class="keyword">as</span> 电话</span><br><span class="line"><span class="keyword">from</span> People</span><br><span class="line"></span><br><span class="line"><span class="comment">/*查询出员工都来自于那些城市城市*/</span></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">distinct</span> (PeopleAddress) </span><br><span class="line"> <span class="keyword">from</span> People</span><br><span class="line"> <span class="comment">/*distinct 就是不重复显示相同的数据</span></span><br><span class="line"><span class="comment"> distinct的用法 就是distinct（列名）</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"> <span class="comment">/*假设准备加工资，现在还没有加</span></span><br><span class="line"><span class="comment"> 然后现在想要咨询加工资后的员工的数据</span></span><br><span class="line"><span class="comment"> 假设工资上调20%*/</span></span><br><span class="line"><span class="keyword">select</span> PeopleName <span class="keyword">as</span> 姓名,</span><br><span class="line">PeopleSalary<span class="operator">*</span><span class="number">1.2</span> <span class="keyword">as</span> 调薪后工资,</span><br><span class="line">PeopleSalary <span class="keyword">as</span> 原本工资,</span><br><span class="line">PeopleSalary <span class="operator">*</span> <span class="number">0.2</span> <span class="keyword">as</span> 工资涨幅</span><br><span class="line"><span class="keyword">from</span> People</span><br><span class="line"></span><br><span class="line"><span class="comment">/*条件查询*/</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">sql中常用的运算符</span></span><br><span class="line"><span class="comment">= 等于 比较是否相等及赋值</span></span><br><span class="line"><span class="comment">!= 不等于</span></span><br><span class="line"><span class="comment">&gt; 大于</span></span><br><span class="line"><span class="comment">&lt; 小于</span></span><br><span class="line"><span class="comment">&gt;= 大于等于</span></span><br><span class="line"><span class="comment">&lt;= 小于等于</span></span><br><span class="line"><span class="comment">is null 为空</span></span><br><span class="line"><span class="comment">is not null 不为空</span></span><br><span class="line"><span class="comment">in 比较是否在其中</span></span><br><span class="line"><span class="comment">like 模糊查询</span></span><br><span class="line"><span class="comment">between...and,,, 比较是否在两者之间</span></span><br><span class="line"><span class="comment">and 逻辑与</span></span><br><span class="line"><span class="comment">or 逻辑或</span></span><br><span class="line"><span class="comment">not 逻辑非</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line">use DBTEST</span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> People</span><br><span class="line"></span><br><span class="line"><span class="comment">/*查询性别为女的员工信息*/</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span></span><br><span class="line"><span class="keyword">from</span> People</span><br><span class="line"><span class="keyword">where</span> PeopleGender  <span class="operator">=</span> <span class="string">&#x27;女&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*查询工资&gt;=1w的员工信息*/</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> </span><br><span class="line"><span class="keyword">from</span> People</span><br><span class="line"><span class="keyword">where</span> PeopleSalary <span class="operator">&gt;=</span> <span class="number">10000</span></span><br><span class="line"><span class="comment">/*查询出性别为女 工资大于等于1w的员工信息*/</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> </span><br><span class="line"><span class="keyword">from</span> People</span><br><span class="line"><span class="keyword">where</span> PeopleGender <span class="operator">=</span> <span class="string">&#x27;女&#x27;</span> </span><br><span class="line"><span class="keyword">and</span> PeopleSalary <span class="operator">&gt;=</span> <span class="number">10000</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> </span><br><span class="line"><span class="keyword">from</span> People</span><br><span class="line"><span class="keyword">where</span> PeopleGender <span class="operator">=</span> <span class="string">&#x27;女&#x27;</span> </span><br><span class="line"><span class="keyword">and</span> PeopleSalary <span class="operator">&gt;=</span> <span class="number">10000</span></span><br><span class="line"><span class="keyword">and</span> DepartmentId <span class="operator">=</span> <span class="number">1</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*查询月薪大于等于1w或者月薪大于等于8k的女员工*/</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span></span><br><span class="line"><span class="keyword">from</span> People</span><br><span class="line"><span class="keyword">where</span> PeopleSalary <span class="operator">&gt;=</span> <span class="number">15000</span></span><br><span class="line"><span class="keyword">or</span> (PeopleSalary <span class="operator">&gt;=</span> <span class="number">8000</span></span><br><span class="line"><span class="keyword">and</span> PeopleGender <span class="operator">=</span> <span class="string">&#x27;女&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">/*查询出出生年月在1980-1-1之后，而且月薪大于等于1w的女员工 </span></span><br><span class="line"><span class="comment">语法 select * from People where 条件1 and 条件2</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> People</span><br><span class="line"><span class="keyword">where</span> PeopleBirth <span class="operator">&gt;=</span> <span class="string">&#x27;1980-1-1&#x27;</span> </span><br><span class="line"><span class="keyword">and</span> PeopleSalary <span class="operator">&gt;=</span> <span class="number">10000</span></span><br><span class="line"><span class="keyword">and</span> PeopleGender <span class="operator">=</span> <span class="string">&#x27;女&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*查询月薪在1w-2w之间的员工信息*/</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> People</span><br><span class="line"><span class="keyword">where</span> PeopleSalary <span class="operator">&gt;=</span> <span class="number">10000</span> <span class="keyword">and</span> PeopleSalary <span class="operator">&lt;=</span> <span class="number">20000</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> People</span><br><span class="line"><span class="keyword">where</span> PeopleSalary <span class="keyword">between</span> <span class="number">10000</span> <span class="keyword">and</span> <span class="number">20000</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*查询出地址在武汉或北京的员工信息*/</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span></span><br><span class="line">People <span class="keyword">where</span> PeopleAddress <span class="operator">=</span> <span class="string">&#x27;武汉&#x27;</span></span><br><span class="line"><span class="keyword">or</span> PeopleAddress <span class="operator">=</span> <span class="string">&#x27;北京&#x27;</span></span><br><span class="line">  </span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span></span><br><span class="line">People <span class="keyword">where</span> PeopleAddress <span class="keyword">in</span>(<span class="string">&#x27;武汉&#x27;</span>,<span class="string">&#x27;北京 &#x27;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/*排序</span></span><br><span class="line"><span class="comment">查询所偶有的员工信息 工具工资排序 降序 </span></span><br><span class="line"><span class="comment">在默认的情况下 查询出来的虚表是工具主键来进行排序</span></span><br><span class="line"><span class="comment">在默认情况下  展现出来的结果是工具表格的主键来排序</span></span><br><span class="line"><span class="comment">比如在上面查询的语句中</span></span><br><span class="line"><span class="comment">People表格的主键是PeopleId 所以结果以此排序</span></span><br><span class="line"><span class="comment">（执行查询语句后 在下面的结果 部分</span></span><br><span class="line"><span class="comment">展现出来的表格就是一张虚表 </span></span><br><span class="line"><span class="comment">他不是真正存储在数据库中的表格 只是作为结果展示）</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">排序的关键字 order by</span></span><br><span class="line"><span class="comment">order by 就是根据 根据什么信息进行排序</span></span><br><span class="line"><span class="comment">默认情况下虚表根据主键排序</span></span><br><span class="line"><span class="comment">order by 列名 asc(升序） desc （降序）</span></span><br><span class="line"><span class="comment">其中 asc是默认值</span></span><br><span class="line"><span class="comment">只要用了order by 语法之后</span></span><br><span class="line"><span class="comment">就会按照你的列名 升序查询</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*查询所有员工的信息 根据工资排序 降序 */</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> People </span><br><span class="line"><span class="keyword">order</span> <span class="keyword">by</span> PeopleSalary  <span class="keyword">desc</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*查询所有员工信息 根据名字长度排序（降序）*/</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> People </span><br><span class="line"><span class="keyword">order</span> <span class="keyword">by</span> len(PeopleName) <span class="keyword">desc</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*在上方的代码中 len是sql提供给我们取长度的一个函数</span></span><br><span class="line"><span class="comment">len（） */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*查询出工资最高的五个人的信息*/</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> top <span class="number">5</span> <span class="operator">*</span> <span class="keyword">from</span> People</span><br><span class="line"><span class="keyword">order</span> <span class="keyword">by</span> PeopleSalary <span class="keyword">desc</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*查询出工资最高的10%的员工信息*/</span></span><br><span class="line"><span class="keyword">select</span> top <span class="number">10</span><span class="keyword">percent</span> </span><br><span class="line"><span class="operator">*</span> <span class="keyword">from</span> People</span><br><span class="line"><span class="keyword">order</span> <span class="keyword">by</span> PeopleSalary <span class="keyword">desc</span></span><br><span class="line"><span class="comment">/*注意上面的查询百分之多少</span></span><br><span class="line"><span class="comment">不能直接用百分号% 而是要用percent</span></span><br><span class="line"><span class="comment">不然会报错</span></span><br><span class="line"><span class="comment">然后这个查询的结果会自动的四舍五入</span></span><br><span class="line"><span class="comment">比如一共有22条数据 就是四舍五入2条*/</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*null 空值*/</span></span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> People(DepartmentId,RankId,PeopleName,PeopleGender,PeopleBirth,</span><br><span class="line">PeopleSalary,PeoplePhone,PeopleAddTime)</span><br><span class="line"><span class="keyword">values</span>(<span class="number">1</span>,<span class="number">1</span>,<span class="string">&#x27;马云&#x27;</span>,<span class="string">&#x27;男&#x27;</span>,<span class="string">&#x27;1977-7-7&#x27;</span>,<span class="number">500000</span>,<span class="string">&#x27;138585858&#x27;</span>,GETDATE())</span><br><span class="line"></span><br><span class="line"><span class="comment">/*查询出地址没有填写的员工信息*/</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> People</span><br><span class="line"><span class="keyword">where</span> PeopleAddress <span class="keyword">is</span> <span class="keyword">null</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> People</span><br><span class="line"><span class="keyword">where</span> PeopleAddress <span class="keyword">is</span> <span class="keyword">not</span> <span class="keyword">null</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*查询出80 后的员工信息*/</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> </span><br><span class="line"><span class="keyword">from</span> People </span><br><span class="line"><span class="keyword">where</span> PeopleBirth <span class="operator">&gt;=</span> <span class="string">&#x27;1980-1-1&#x27;</span></span><br><span class="line"><span class="keyword">and</span> PeopleBirth <span class="operator">&lt;=</span><span class="string">&#x27;1989-12-31&#x27;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> </span><br><span class="line"><span class="keyword">from</span> People </span><br><span class="line"><span class="keyword">where</span> PeopleBirth <span class="keyword">between</span> <span class="string">&#x27;1980-1-1&#x27;</span></span><br><span class="line"><span class="keyword">and</span> <span class="string">&#x27;1989-12-31&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> </span><br><span class="line"><span class="keyword">from</span> People</span><br><span class="line"><span class="keyword">where</span> <span class="keyword">year</span>(PeopleBirth) <span class="keyword">between</span> <span class="number">1980</span> <span class="keyword">and</span> <span class="number">1989</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*查询30-40岁之间 并且 工资在1.5w - 3w 之间的员工信息*/</span></span><br><span class="line"><span class="comment">/* 年龄 =   当前年份 - 出生年份</span></span><br><span class="line"><span class="comment">age =  year(getdate) -  year (PeopleBirth)*/</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> </span><br><span class="line"><span class="keyword">from</span> People</span><br><span class="line"><span class="keyword">where</span> (<span class="keyword">year</span>(getdate()) <span class="operator">-</span> <span class="keyword">year</span>(PeopleBirth) <span class="keyword">between</span> <span class="number">30</span> <span class="keyword">and</span> <span class="number">40</span>)</span><br><span class="line"><span class="keyword">and</span> PeopleSalary <span class="keyword">between</span> <span class="number">15000</span> <span class="keyword">and</span> <span class="number">30000</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*查询出星座是巨蟹座的员工信息</span></span><br><span class="line"><span class="comment">6.22-7.22</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> People <span class="keyword">where</span> </span><br><span class="line">(<span class="keyword">month</span>(PeopleBirth) <span class="operator">=</span> <span class="number">6</span> <span class="keyword">and</span> <span class="keyword">day</span>(PeopleBirth) <span class="operator">&gt;=</span> <span class="number">22</span>)</span><br><span class="line"><span class="keyword">or</span></span><br><span class="line">(<span class="keyword">month</span>(PeopleBirth) <span class="operator">=</span> <span class="number">7</span> <span class="keyword">and</span> <span class="keyword">day</span>(PeopleBirth) <span class="operator">&lt;=</span> <span class="number">22</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">/*查询出工资比赵云高的人的信息*/</span></span><br><span class="line"><span class="comment">/*首先要查询出赵云的工资*/</span></span><br><span class="line"><span class="keyword">select</span> PeopleSalary</span><br><span class="line"><span class="keyword">from</span> People</span><br><span class="line"><span class="keyword">where</span> PeopleName <span class="operator">=</span> <span class="string">&#x27;赵云&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> </span><br><span class="line"><span class="keyword">from</span> People</span><br><span class="line"><span class="keyword">where</span> PeopleSalary <span class="operator">&gt;</span> </span><br><span class="line">(<span class="keyword">select</span> PeopleSalary</span><br><span class="line"><span class="keyword">from</span> People</span><br><span class="line"><span class="keyword">where</span> PeopleName <span class="operator">=</span> <span class="string">&#x27;赵云&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">/*查询出和赵云在一个城市的人的信息*/</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> </span><br><span class="line"><span class="keyword">from</span> People </span><br><span class="line"><span class="keyword">where</span> PeopleAddress </span><br><span class="line"><span class="operator">=</span> (<span class="keyword">select</span> PeopleAddress</span><br><span class="line"><span class="keyword">from</span> People</span><br><span class="line"><span class="keyword">where</span> PeopleName <span class="operator">=</span> <span class="string">&#x27;赵云&#x27;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> PeopleAddress</span><br><span class="line"><span class="keyword">from</span> People</span><br><span class="line"><span class="keyword">where</span> PeopleName <span class="operator">=</span> <span class="string">&#x27;赵云&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*查询出生肖是鼠的人的信息*/</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/* 鼠	牛	虎	兔	龙	蛇 马	羊	猴	鸡	狗	猪</span></span><br><span class="line"><span class="comment">	4    5   6   7   8   9  10   11  0   1   2   3*/</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> </span><br><span class="line"><span class="keyword">from</span> People</span><br><span class="line"><span class="keyword">where</span> <span class="keyword">year</span>(PeopleBirth)<span class="operator">%</span><span class="number">12</span> <span class="operator">=</span> <span class="number">4</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/*查询所有的员工信息，添加一列 显示生肖*/</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> ,</span><br><span class="line"><span class="keyword">case</span></span><br><span class="line">	<span class="keyword">when</span> <span class="keyword">year</span>(PeopleBirth)<span class="operator">%</span> <span class="number">12</span> <span class="operator">=</span> <span class="number">4</span> <span class="keyword">then</span> <span class="string">&#x27;鼠&#x27;</span></span><br><span class="line">	<span class="keyword">when</span> <span class="keyword">year</span>(PeopleBirth)<span class="operator">%</span> <span class="number">12</span> <span class="operator">=</span> <span class="number">5</span> <span class="keyword">then</span> <span class="string">&#x27;牛&#x27;</span></span><br><span class="line">	<span class="keyword">when</span> <span class="keyword">year</span>(PeopleBirth)<span class="operator">%</span> <span class="number">12</span> <span class="operator">=</span> <span class="number">6</span> <span class="keyword">then</span> <span class="string">&#x27;虎&#x27;</span></span><br><span class="line">	<span class="keyword">when</span> <span class="keyword">year</span>(PeopleBirth)<span class="operator">%</span> <span class="number">12</span> <span class="operator">=</span> <span class="number">7</span> <span class="keyword">then</span> <span class="string">&#x27;兔&#x27;</span></span><br><span class="line">	<span class="keyword">when</span> <span class="keyword">year</span>(PeopleBirth)<span class="operator">%</span> <span class="number">12</span> <span class="operator">=</span> <span class="number">8</span> <span class="keyword">then</span> <span class="string">&#x27;龙&#x27;</span></span><br><span class="line">	<span class="keyword">when</span> <span class="keyword">year</span>(PeopleBirth)<span class="operator">%</span> <span class="number">12</span> <span class="operator">=</span> <span class="number">9</span> <span class="keyword">then</span> <span class="string">&#x27;蛇&#x27;</span></span><br><span class="line">	<span class="keyword">when</span> <span class="keyword">year</span>(PeopleBirth)<span class="operator">%</span> <span class="number">12</span> <span class="operator">=</span> <span class="number">10</span> <span class="keyword">then</span> <span class="string">&#x27;马&#x27;</span></span><br><span class="line">	<span class="keyword">when</span> <span class="keyword">year</span>(PeopleBirth)<span class="operator">%</span> <span class="number">12</span> <span class="operator">=</span> <span class="number">11</span> <span class="keyword">then</span> <span class="string">&#x27;羊&#x27;</span></span><br><span class="line">	<span class="keyword">when</span> <span class="keyword">year</span>(PeopleBirth)<span class="operator">%</span> <span class="number">12</span> <span class="operator">=</span> <span class="number">0</span> <span class="keyword">then</span> <span class="string">&#x27;猴&#x27;</span></span><br><span class="line">	<span class="keyword">when</span> <span class="keyword">year</span>(PeopleBirth)<span class="operator">%</span> <span class="number">12</span> <span class="operator">=</span> <span class="number">1</span> <span class="keyword">then</span> <span class="string">&#x27;鸡&#x27;</span></span><br><span class="line">	<span class="keyword">when</span> <span class="keyword">year</span>(PeopleBirth)<span class="operator">%</span> <span class="number">12</span> <span class="operator">=</span> <span class="number">2</span> <span class="keyword">then</span> <span class="string">&#x27;狗&#x27;</span></span><br><span class="line">	<span class="keyword">when</span> <span class="keyword">year</span>(PeopleBirth)<span class="operator">%</span> <span class="number">12</span> <span class="operator">=</span> <span class="number">3</span> <span class="keyword">then</span> <span class="string">&#x27;猪&#x27;</span></span><br><span class="line">	<span class="keyword">else</span> <span class="string">&#x27;&#x27;</span></span><br><span class="line"><span class="keyword">end</span> <span class="keyword">as</span> 生肖</span><br><span class="line"><span class="keyword">from</span> People </span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> ,</span><br><span class="line"><span class="keyword">case</span> <span class="keyword">year</span>(PeopleBirth)<span class="operator">%</span> <span class="number">12</span></span><br><span class="line">	<span class="keyword">when</span>  <span class="number">4</span> <span class="keyword">then</span> <span class="string">&#x27;鼠&#x27;</span></span><br><span class="line">	<span class="keyword">when</span>  <span class="number">5</span> <span class="keyword">then</span> <span class="string">&#x27;牛&#x27;</span></span><br><span class="line">	<span class="keyword">when</span>  <span class="number">6</span> <span class="keyword">then</span> <span class="string">&#x27;虎&#x27;</span></span><br><span class="line">	<span class="keyword">when</span>  <span class="number">7</span> <span class="keyword">then</span> <span class="string">&#x27;兔&#x27;</span></span><br><span class="line">	<span class="keyword">when</span>  <span class="number">8</span> <span class="keyword">then</span> <span class="string">&#x27;龙&#x27;</span></span><br><span class="line">	<span class="keyword">when</span>  <span class="number">9</span> <span class="keyword">then</span> <span class="string">&#x27;蛇&#x27;</span></span><br><span class="line">	<span class="keyword">when</span>  <span class="number">10</span> <span class="keyword">then</span> <span class="string">&#x27;马&#x27;</span></span><br><span class="line">	<span class="keyword">when</span>  <span class="number">11</span> <span class="keyword">then</span> <span class="string">&#x27;羊&#x27;</span></span><br><span class="line">	<span class="keyword">when</span>  <span class="number">0</span> <span class="keyword">then</span> <span class="string">&#x27;猴&#x27;</span></span><br><span class="line">	<span class="keyword">when</span>  <span class="number">1</span> <span class="keyword">then</span> <span class="string">&#x27;鸡&#x27;</span></span><br><span class="line">	<span class="keyword">when</span>  <span class="number">2</span> <span class="keyword">then</span> <span class="string">&#x27;狗&#x27;</span></span><br><span class="line">	<span class="keyword">when</span>  <span class="number">3</span> <span class="keyword">then</span> <span class="string">&#x27;猪&#x27;</span></span><br><span class="line">	<span class="keyword">else</span> <span class="string">&#x27;&#x27;</span></span><br><span class="line"><span class="keyword">end</span> <span class="keyword">as</span> 生肖</span><br><span class="line"><span class="keyword">from</span> People </span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/*模糊查询*/</span></span><br><span class="line"><span class="comment">/*模糊查询使用like瓜庵案件之和通配符结合来实现</span></span><br><span class="line"><span class="comment">通配符如下</span></span><br><span class="line"><span class="comment">% 表示普配0个字符 1个字符或多个字符</span></span><br><span class="line"><span class="comment">_ 表示匹配有且仅有一个字符</span></span><br><span class="line"><span class="comment">[] 表示匹配范围内</span></span><br><span class="line"><span class="comment">[^] 表示不在匹配范围内</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*%（百分号）：</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">％ 通配符代表零个或多个字符，意思是可以匹配任意数量（包括零个）字符。</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">例如：</span></span><br><span class="line"><span class="comment">SELECT * FROM students WHERE name LIKE &#x27;J%&#x27;;</span></span><br><span class="line"><span class="comment">这个查询将返回所有名字以 &quot;J&quot; 开头的学生，后面可以跟任意数量的字符（例如：James、John、Jack 等）。</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">另外，如果你写成 LIKE &#x27;%J%&#x27;，则会匹配所有包含字母 &quot;J&quot; 的名字。</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">_（下划线）：</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">_ 通配符代表 单个字符。它只能匹配一个字符，不管这个字符是什么。</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">例如：</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">SELECT * FROM students WHERE name LIKE &#x27;_o&#x27;;</span></span><br><span class="line"><span class="comment">这个查询将返回所有名字的第二个字符是 &quot;o&quot; 的学生，例如 &quot;Tom&quot; 或 &quot;Bob&quot;。</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">如果使用 LIKE &#x27;_o_&#x27;，那么查询会返回所有名字中第二个字符是 &quot;o&quot;，且总长度为 3 的名字。</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">总结：</span></span><br><span class="line"><span class="comment">% 用来匹配 任意数量的字符，包括零个字符。</span></span><br><span class="line"><span class="comment">_ 用来匹配 单个字符。*/</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/*查询出姓刘的员工信息 */</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> People</span><br><span class="line"><span class="keyword">where</span> PeopleName <span class="keyword">like</span> <span class="string">&#x27;刘%&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*查询出名字中含有尚的员工信息*/</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> </span><br><span class="line"><span class="keyword">from</span> People</span><br><span class="line"><span class="keyword">where</span> PeopleName <span class="keyword">like</span> <span class="string">&#x27;%尚%&#x27;</span> <span class="keyword">or</span> PeopleName <span class="keyword">like</span> <span class="string">&#x27;史&#x27;</span></span><br><span class="line"><span class="comment">/*用这种两个百分号的方式查询出来的结果</span></span><br><span class="line"><span class="comment">只是名字中有尚的 可以在前面也可以在后面*/</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*查询出姓刘的员工信息，名字是两个字*/</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> </span><br><span class="line"><span class="keyword">from</span> People</span><br><span class="line"><span class="keyword">where</span> PeopleName <span class="keyword">like</span> <span class="string">&#x27;刘_&#x27;</span></span><br><span class="line"><span class="comment">/*用这个下划线就能查出来 刘后面只有一个字的了*/</span></span><br><span class="line"><span class="comment">/*另外一种写法 */</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> <span class="built_in">SUBSTRING</span>(<span class="string">&#x27;helko,world&#x27;</span>,<span class="number">3</span>,<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> </span><br><span class="line"><span class="keyword">from</span> People</span><br><span class="line"><span class="keyword">where</span> <span class="built_in">SUBSTRING</span>(PeopleName,<span class="number">1</span>,<span class="number">1</span>) <span class="operator">=</span> <span class="string">&#x27;刘&#x27;</span></span><br><span class="line"><span class="comment">/*上面 的条件仅仅表达了第一个字是刘，没有表达名字有两个字组成</span></span><br><span class="line"><span class="comment">所以要加上一个条件*/</span></span><br><span class="line"><span class="keyword">and</span> LEN(PeopleName) <span class="operator">=</span> <span class="number">2</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*查询名字最后一个字为香，名字一共是三个字的员工信息*/</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> </span><br><span class="line"><span class="keyword">from</span> People</span><br><span class="line"><span class="keyword">where</span> <span class="built_in">SUBSTRING</span>(PeopleName,<span class="number">3</span>,<span class="number">1</span>) <span class="operator">=</span> <span class="string">&#x27;香&#x27;</span></span><br><span class="line"><span class="keyword">and</span> len(PeopleName) <span class="operator">=</span> <span class="number">3</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> </span><br><span class="line"><span class="keyword">from</span> People</span><br><span class="line"><span class="keyword">where</span> PeopleName <span class="keyword">like</span> <span class="string">&#x27;__香&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*查询出电话号码开头为138的员工信息*/</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span></span><br><span class="line"><span class="keyword">from</span> People</span><br><span class="line"><span class="keyword">where</span>  PeoplePhone <span class="keyword">like</span> <span class="string">&#x27;138%&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*查询出电话开头 为138 第四位是 7或者8的 </span></span><br><span class="line"><span class="comment">最后一个号码是5*/</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span></span><br><span class="line"><span class="keyword">from</span> People</span><br><span class="line"><span class="keyword">where</span>  PeoplePhone <span class="keyword">like</span> <span class="string">&#x27;138[7,8]%5&#x27;</span></span><br><span class="line"><span class="comment">/*这里就是用[]通配符选择*/</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"> <span class="comment">/*查询出电话开头 为138 第四位是2-5之间的数字的 </span></span><br><span class="line"><span class="comment">最后一个号码是不是2和3*/</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span></span><br><span class="line"><span class="keyword">from</span> People</span><br><span class="line"><span class="keyword">where</span>  PeoplePhone <span class="keyword">like</span> <span class="string">&#x27;138[2-5]%[^2,3]&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*聚合函数*/</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">sqls中的聚合函数主要有</span></span><br><span class="line"><span class="comment">count 求数量</span></span><br><span class="line"><span class="comment">max 求最大值</span></span><br><span class="line"><span class="comment">min 求最小值</span></span><br><span class="line"><span class="comment">sum 求和</span></span><br><span class="line"><span class="comment">avg 求平均值</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line">use DBTEST</span><br><span class="line"></span><br><span class="line"><span class="comment">/*1. COUNT() — 求数量</span></span><br><span class="line"><span class="comment">作用：COUNT() 用于计算表中某列或记录的数量。如果指定了列名，它会计算该列中非 NULL 值的数量；如果不指定列名，它会计算记录的总数。</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">用法：</span></span><br><span class="line"><span class="comment">计算某列非 NULL 值的数量：</span></span><br><span class="line"><span class="comment">SELECT COUNT(column_name) FROM table_name;</span></span><br><span class="line"><span class="comment">计算所有记录的数量（即使某列有 NULL 值）：</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">SELECT COUNT(*) FROM table_name;</span></span><br><span class="line"><span class="comment">示例：</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">SELECT COUNT(*) FROM employees;</span></span><br><span class="line"><span class="comment">-- 计算 employees 表中的记录总数</span></span><br><span class="line"><span class="comment">2. MAX() — 求最大值</span></span><br><span class="line"><span class="comment">作用：MAX() 用于返回指定列中的最大值。该列的数据类型必须支持比较（如数字、日期等）。</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">用法：</span></span><br><span class="line"><span class="comment">SELECT MAX(column_name) FROM table_name;</span></span><br><span class="line"><span class="comment">示例：</span></span><br><span class="line"><span class="comment">SELECT MAX(salary) FROM employees;</span></span><br><span class="line"><span class="comment">-- 获取 employees 表中工资的最大值</span></span><br><span class="line"><span class="comment">3. MIN() — 求最小值</span></span><br><span class="line"><span class="comment">作用：MIN() 用于返回指定列中的最小值。与 MAX() 类似，该列的数据类型必须支持比较。</span></span><br><span class="line"><span class="comment">用法：</span></span><br><span class="line"><span class="comment">SELECT MIN(column_name) FROM table_name;</span></span><br><span class="line"><span class="comment">示例：</span></span><br><span class="line"><span class="comment">SELECT MIN(salary) FROM employees;</span></span><br><span class="line"><span class="comment">-- 获取 employees 表中工资的最小值</span></span><br><span class="line"><span class="comment">4. SUM() — 求和</span></span><br><span class="line"><span class="comment">作用：SUM() 用于返回指定列的所有数值之和。它只能用于数值类型的列（如整数或浮动类型的列）。</span></span><br><span class="line"><span class="comment">用法：</span></span><br><span class="line"><span class="comment">SELECT SUM(column_name) FROM table_name;</span></span><br><span class="line"><span class="comment">示例：</span></span><br><span class="line"><span class="comment">SELECT SUM(salary) FROM employees;</span></span><br><span class="line"><span class="comment">-- 计算 employees 表中所有员工的工资总和</span></span><br><span class="line"><span class="comment">5. AVG() — 求平均值</span></span><br><span class="line"><span class="comment">作用：AVG() 用于返回指定列的平均值。它只适用于数值类型的列，返回一个浮动类型的结果。</span></span><br><span class="line"><span class="comment">用法：</span></span><br><span class="line"><span class="comment">SELECT AVG(column_name) FROM table_name;</span></span><br><span class="line"><span class="comment">示例：</span></span><br><span class="line"><span class="comment">SELECT AVG(salary) FROM employees;</span></span><br><span class="line"><span class="comment">-- 获取 employees 表中所有员工的平均工资</span></span><br><span class="line"><span class="comment">聚合函数的使用注意事项：</span></span><br><span class="line"><span class="comment">聚合函数通常与 GROUP BY 子句一起使用，来对数据进行分组。例如，计算每个部门的员工人数、最大工资等：</span></span><br><span class="line"><span class="comment">SELECT department, COUNT(*), MAX(salary), MIN(salary), AVG(salary)</span></span><br><span class="line"><span class="comment">FROM employees</span></span><br><span class="line"><span class="comment">GROUP BY department;</span></span><br><span class="line"><span class="comment">如果不使用 GROUP BY，这些函数会对整张表进行计算，返回单个结果。</span></span><br><span class="line"><span class="comment">结论</span></span><br><span class="line"><span class="comment">COUNT()：计算记录数量。</span></span><br><span class="line"><span class="comment">MAX()：返回最大值。</span></span><br><span class="line"><span class="comment">MIN()：返回最小值。</span></span><br><span class="line"><span class="comment">SUM()：返回总和。</span></span><br><span class="line"><span class="comment">AVG()：返回平均值。</span></span><br><span class="line"><span class="comment">这些聚合函数广泛应用于数据分析、报告生成和业务统计等场景中。*/</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">--求员工总人数</span></span><br><span class="line"><span class="keyword">select</span> <span class="built_in">count</span>(<span class="operator">*</span>) <span class="keyword">as</span> 员工人数</span><br><span class="line"><span class="keyword">from</span> People</span><br><span class="line"><span class="comment">/*count 的意思 就是求列数</span></span><br><span class="line"><span class="comment">有几列 结果就是多少*/</span></span><br><span class="line"><span class="comment">--求最大值，求最高工资</span></span><br><span class="line"><span class="keyword">select</span> <span class="built_in">max</span>(PeopleSalary) <span class="keyword">as</span> 最高工资</span><br><span class="line"><span class="keyword">from</span> People</span><br><span class="line"><span class="comment">--求最小时，求最小工资</span></span><br><span class="line"><span class="keyword">select</span> <span class="built_in">min</span>(PeopleSalary) <span class="keyword">as</span> 最低工资</span><br><span class="line"><span class="keyword">from</span> People</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">--求和，求所有员工的工资总和</span></span><br><span class="line"><span class="keyword">select</span> <span class="built_in">sum</span>(PeopleSalary) <span class="keyword">as</span> 工资总和</span><br><span class="line"><span class="keyword">from</span> People</span><br><span class="line"></span><br><span class="line"><span class="comment">--求平均值，求所有员工的平均工资</span></span><br><span class="line"><span class="keyword">select</span> <span class="built_in">AVG</span>(PeopleSalary) <span class="keyword">as</span> 平均工资</span><br><span class="line"><span class="keyword">from</span> People</span><br><span class="line"></span><br><span class="line"><span class="comment">--平均工资如果要只保留两位小数</span></span><br><span class="line"><span class="comment">/*通过round 关键字*/</span></span><br><span class="line"><span class="keyword">SELECT</span> ROUND(<span class="built_in">AVG</span>(PeopleSalary), <span class="number">2</span>) <span class="keyword">AS</span> 平均工资</span><br><span class="line"><span class="keyword">FROM</span> People;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">--求数量，最大值，最小值，总和，平均值，在一行显示</span></span><br><span class="line"><span class="keyword">Select</span> <span class="built_in">count</span>(<span class="operator">*</span>) <span class="keyword">as</span> 员工人数,</span><br><span class="line"><span class="built_in">max</span>(PeopleSalary) <span class="keyword">as</span> 最高工资,</span><br><span class="line"><span class="built_in">min</span>(PeopleSalary) <span class="keyword">as</span> 最低工资,</span><br><span class="line"><span class="built_in">sum</span>(PeopleSalary) <span class="keyword">as</span> 工资总和,</span><br><span class="line"><span class="built_in">avg</span>(PeopleSalary) <span class="keyword">as</span> 平均工资</span><br><span class="line"><span class="keyword">from</span> People</span><br><span class="line"></span><br><span class="line"><span class="comment">/*查询出武汉地区的员工人数，总工资，最高工资，最低工资和平均工资*/</span></span><br><span class="line"><span class="keyword">Select</span> <span class="built_in">count</span>(<span class="operator">*</span>) <span class="keyword">as</span> 员工人数,</span><br><span class="line"><span class="built_in">max</span>(PeopleSalary) <span class="keyword">as</span> 最高工资,</span><br><span class="line"><span class="built_in">min</span>(PeopleSalary) <span class="keyword">as</span> 最低工资,</span><br><span class="line"><span class="built_in">sum</span>(PeopleSalary) <span class="keyword">as</span> 工资总和,</span><br><span class="line"><span class="built_in">avg</span>(PeopleSalary) <span class="keyword">as</span> 平均工资</span><br><span class="line"><span class="keyword">from</span> People</span><br><span class="line"><span class="keyword">where</span> PeopleAddress <span class="operator">=</span> <span class="string">&#x27;武汉&#x27;</span> </span><br><span class="line"></span><br><span class="line"><span class="comment">--求出工资比平均工资高的人员信息</span></span><br><span class="line"><span class="comment">--思路 先求出平均工资</span></span><br><span class="line"><span class="keyword">select</span> <span class="built_in">AVG</span>(PeopleSalary) <span class="keyword">from</span> People</span><br><span class="line"><span class="comment">--再通过where判断</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span></span><br><span class="line"><span class="keyword">from</span> People</span><br><span class="line"><span class="keyword">where</span> PeopleSalary <span class="operator">&gt;</span> </span><br><span class="line">(<span class="keyword">select</span> <span class="built_in">AVG</span>(PeopleSalary) <span class="keyword">from</span> People)</span><br><span class="line"></span><br><span class="line"><span class="comment">/*求数量，年龄最大值，最小值，总和，平均值</span></span><br><span class="line"><span class="comment">在一行内显示*/</span></span><br><span class="line"></span><br><span class="line"><span class="comment">--求年龄</span></span><br><span class="line"><span class="keyword">select</span> (<span class="keyword">year</span>(getdate()) <span class="operator">-</span> <span class="keyword">year</span>(PeopleBirth))</span><br><span class="line"><span class="keyword">from</span> People </span><br><span class="line"><span class="comment">/*求上题*/</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*方案一*/</span></span><br><span class="line"><span class="keyword">select</span> <span class="built_in">count</span>(<span class="operator">*</span>) <span class="keyword">as</span> 员工总数,</span><br><span class="line"><span class="built_in">max</span>(<span class="keyword">year</span>(getdate()) <span class="operator">-</span> <span class="keyword">year</span>(PeopleBirth)) <span class="keyword">as</span> 最高年龄,</span><br><span class="line"><span class="built_in">min</span>(<span class="keyword">year</span>(getdate()) <span class="operator">-</span> <span class="keyword">year</span>(PeopleBirth)) <span class="keyword">as</span> 最低年龄,</span><br><span class="line"><span class="built_in">sum</span>(<span class="keyword">year</span>(getdate()) <span class="operator">-</span> <span class="keyword">year</span>(PeopleBirth)) <span class="keyword">as</span> 年龄总和,</span><br><span class="line"><span class="built_in">avg</span>(<span class="keyword">year</span>(getdate()) <span class="operator">-</span> <span class="keyword">year</span>(PeopleBirth)) <span class="keyword">as</span> 平均年龄</span><br><span class="line"><span class="keyword">from</span> People</span><br><span class="line"></span><br><span class="line"><span class="comment">/*方案2*/</span></span><br><span class="line"><span class="comment">/*使用datediff算日期*/</span></span><br><span class="line"><span class="keyword">select</span> datediff(<span class="keyword">YEAR</span>,<span class="string">&#x27;1991-1-1&#x27;</span>,<span class="string">&#x27;1993-3-3&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">/*用这个datediff算出年龄*/</span></span><br><span class="line"><span class="keyword">select</span> PeopleName <span class="keyword">as</span> name,</span><br><span class="line">datediff(<span class="keyword">YEAR</span>,PeopleBirth,GETDATE()) <span class="keyword">as</span> age</span><br><span class="line"><span class="keyword">from</span> People</span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> <span class="built_in">count</span>(<span class="operator">*</span>) <span class="keyword">as</span> 员工总数,</span><br><span class="line"><span class="built_in">max</span>(datediff(<span class="keyword">YEAR</span>,PeopleBirth,GETDATE())) <span class="keyword">as</span> 最高年龄,</span><br><span class="line"><span class="built_in">min</span>(datediff(<span class="keyword">YEAR</span>,PeopleBirth,GETDATE())) <span class="keyword">as</span> 最低年龄,</span><br><span class="line"><span class="built_in">sum</span>(datediff(<span class="keyword">YEAR</span>,PeopleBirth,GETDATE())) <span class="keyword">as</span> 年龄总和,</span><br><span class="line"><span class="built_in">avg</span>(datediff(<span class="keyword">YEAR</span>,PeopleBirth,GETDATE())) <span class="keyword">as</span> 平均年龄</span><br><span class="line"><span class="keyword">from</span> People</span><br><span class="line"><span class="comment">/*datediff是一个日期函数，用于计算两个日期之间的差异。</span></span><br><span class="line"><span class="comment">它返回两个日期之间的天数差。</span></span><br><span class="line"><span class="comment">DATEDIFF 会返回一个整数值，表示 date1 和 date2 之间的天数差。</span></span><br><span class="line"><span class="comment">如果 date1 比 date2 晚，则返回正数；</span></span><br><span class="line"><span class="comment">如果 date1 比 date2 早，则返回负数；</span></span><br><span class="line"><span class="comment">如果两个日期相同，则返回 0*/</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*计算出月薪在10000 以上的男性员工的最大年龄 最小年龄和平均年龄*/</span></span><br><span class="line"><span class="keyword">select</span> <span class="built_in">count</span>(<span class="operator">*</span>) <span class="keyword">as</span> 员工总数,</span><br><span class="line"><span class="built_in">max</span>(datediff(<span class="keyword">YEAR</span>,<span class="keyword">YEAR</span>(getdate()),PeopleBirth) ) <span class="keyword">as</span> 最高年龄,</span><br><span class="line"><span class="built_in">min</span>(datediff(<span class="keyword">YEAR</span>,<span class="keyword">YEAR</span>(getdate()),PeopleBirth) ) <span class="keyword">as</span> 最低年龄,</span><br><span class="line"><span class="built_in">sum</span>(datediff(<span class="keyword">YEAR</span>,<span class="keyword">YEAR</span>(getdate()),PeopleBirth) ) <span class="keyword">as</span> 年龄总和,</span><br><span class="line"><span class="built_in">avg</span>(datediff(<span class="keyword">YEAR</span>,<span class="keyword">YEAR</span>(getdate()),PeopleBirth) ) <span class="keyword">as</span> 平均年龄</span><br><span class="line"><span class="keyword">from</span> People</span><br><span class="line"><span class="keyword">where</span> PeopleSalary <span class="operator">&gt;</span> <span class="number">10000</span></span><br><span class="line"><span class="keyword">and</span> PeopleGender <span class="operator">=</span> <span class="string">&#x27;男&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*统计出所在地在 武汉或上海的 所有女员工数量以及</span></span><br><span class="line"><span class="comment">最大年龄 最小年龄和平均年龄*/</span></span><br><span class="line"><span class="comment">/*正常做法*/</span></span><br><span class="line"><span class="keyword">select</span> <span class="built_in">count</span>(<span class="operator">*</span>) <span class="keyword">as</span> 女员工数量,</span><br><span class="line"><span class="built_in">max</span>(<span class="keyword">year</span>(GETDATE()) <span class="operator">-</span> <span class="keyword">year</span>(PeopleBirth)) <span class="keyword">as</span> 最大年龄,</span><br><span class="line"><span class="built_in">min</span>(<span class="keyword">year</span>(GETDATE()) <span class="operator">-</span> <span class="keyword">year</span>(PeopleBirth)) <span class="keyword">as</span> 最小年龄,</span><br><span class="line"><span class="built_in">avg</span>(<span class="keyword">year</span>(GETDATE())<span class="operator">-</span> <span class="keyword">year</span>(PeopleBirth)) <span class="keyword">as</span> 平均年龄</span><br><span class="line"><span class="keyword">from</span> People</span><br><span class="line"><span class="keyword">where</span> PeopleGender <span class="operator">=</span> <span class="string">&#x27;女&#x27;</span></span><br><span class="line"><span class="keyword">and</span> PeopleAddress <span class="keyword">in</span> (<span class="string">&#x27;上海&#x27;</span>,<span class="string">&#x27;武汉&#x27;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">--年龄</span></span><br><span class="line"><span class="keyword">select</span> DATEDIFF(<span class="keyword">year</span>,<span class="keyword">year</span>(GETDATE()),PeopleBirth)</span><br><span class="line"><span class="keyword">from</span> People</span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> <span class="built_in">count</span>(<span class="operator">*</span>) <span class="keyword">as</span> 员工总数,</span><br><span class="line"><span class="built_in">max</span>(datediff(<span class="keyword">YEAR</span>,PeopleBirth,GETDATE())) <span class="keyword">as</span> 最高年龄,</span><br><span class="line"><span class="built_in">min</span>(datediff(<span class="keyword">YEAR</span>,PeopleBirth,GETDATE())) <span class="keyword">as</span> 最低年龄,</span><br><span class="line"><span class="built_in">sum</span>(datediff(<span class="keyword">YEAR</span>,PeopleBirth,GETDATE())) <span class="keyword">as</span> 年龄总和,</span><br><span class="line"><span class="built_in">avg</span>(datediff(<span class="keyword">YEAR</span>,PeopleBirth,GETDATE())) <span class="keyword">as</span> 平均年龄</span><br><span class="line"><span class="keyword">from</span> People</span><br><span class="line"><span class="keyword">where</span> PeopleGender <span class="operator">=</span> <span class="string">&#x27;女&#x27;</span></span><br><span class="line"><span class="keyword">and</span> PeopleAddress <span class="keyword">in</span> (<span class="string">&#x27;武汉&#x27;</span>,<span class="string">&#x27;上海&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> <span class="built_in">count</span>(<span class="operator">*</span>) <span class="keyword">as</span> 女员工总数,</span><br><span class="line"><span class="built_in">max</span>(<span class="keyword">year</span>(getdate()) <span class="operator">-</span> <span class="keyword">year</span>(PeopleBirth)) <span class="keyword">as</span> 最高年龄,</span><br><span class="line"><span class="built_in">min</span>(<span class="keyword">year</span>(getdate()) <span class="operator">-</span> <span class="keyword">year</span>(PeopleBirth)) <span class="keyword">as</span> 最低年龄,</span><br><span class="line"><span class="built_in">sum</span>(<span class="keyword">year</span>(getdate()) <span class="operator">-</span> <span class="keyword">year</span>(PeopleBirth)) <span class="keyword">as</span> 年龄总和,</span><br><span class="line"><span class="built_in">avg</span>(<span class="keyword">year</span>(getdate()) <span class="operator">-</span> <span class="keyword">year</span>(PeopleBirth)) <span class="keyword">as</span> 平均年龄</span><br><span class="line"><span class="keyword">from</span> People</span><br><span class="line"><span class="keyword">where</span> PeopleGender <span class="operator">=</span> <span class="string">&#x27;女&#x27;</span></span><br><span class="line"><span class="keyword">and</span> PeopleAddress <span class="keyword">in</span> (<span class="string">&#x27;武汉&#x27;</span>,<span class="string">&#x27;上海&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">--求出年龄比平均年龄的人员信息</span></span><br><span class="line"><span class="comment">/*求年龄*/</span></span><br><span class="line"><span class="keyword">select</span> (<span class="keyword">year</span>(getdate()) <span class="operator">-</span> <span class="keyword">year</span>(PeopleBirth))</span><br><span class="line"><span class="keyword">from</span> People </span><br><span class="line"><span class="comment">/*求平均年龄*/</span></span><br><span class="line"><span class="keyword">select</span> <span class="built_in">avg</span>(<span class="keyword">year</span>(getdate()) <span class="operator">-</span> <span class="keyword">year</span>(PeopleBirth)) <span class="keyword">as</span> 平均年龄</span><br><span class="line"><span class="keyword">from</span> People </span><br><span class="line"></span><br><span class="line"><span class="comment">/* */</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span>,</span><br><span class="line">(<span class="keyword">year</span>(getdate()) <span class="operator">-</span> <span class="keyword">year</span>(PeopleBirth)) <span class="keyword">as</span> 年龄</span><br><span class="line"><span class="keyword">from</span> People</span><br><span class="line"><span class="keyword">where</span></span><br><span class="line">(<span class="keyword">year</span>(getdate()) <span class="operator">-</span> <span class="keyword">year</span>(PeopleBirth))</span><br><span class="line"><span class="operator">&gt;</span> (<span class="keyword">select</span> <span class="built_in">avg</span>(<span class="keyword">year</span>(getdate()) <span class="operator">-</span> <span class="keyword">year</span>(PeopleBirth)) <span class="keyword">as</span> 平均年龄</span><br><span class="line"><span class="keyword">from</span> People) </span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/*======分组查询=====*/</span></span><br><span class="line"><span class="comment">/*什么是分组查询？</span></span><br><span class="line"><span class="comment">为什么要用分组查询？</span></span><br><span class="line"><span class="comment">什么时候要用分组查询？*/</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">--根据员工所在地区分组统计员工人数,员工工资总和,平均工资，最高工资和最低工资</span></span><br><span class="line"><span class="keyword">select</span> <span class="built_in">count</span>(<span class="operator">*</span>) <span class="keyword">as</span> 员工人数,</span><br><span class="line"><span class="built_in">sum</span>(PeopleSalary) <span class="keyword">as</span> 员工工资总和,</span><br><span class="line"><span class="built_in">avg</span>(PeopleSalary) 平均工资,</span><br><span class="line"><span class="built_in">max</span>(PeopleSalary)  最高工资,</span><br><span class="line"><span class="built_in">min</span>(PeopleSalary) 最低工资</span><br><span class="line"><span class="keyword">from</span> People </span><br><span class="line"></span><br><span class="line"><span class="comment">/*如上面这道题 按这样的办法我们只能查出来一条信息</span></span><br><span class="line"><span class="comment">然后题目现在让我们根据地区进行分组</span></span><br><span class="line"><span class="comment">在引入group by之前 能用的方法就是union*/</span></span><br><span class="line"><span class="comment">/*使用union做*/</span></span><br><span class="line"><span class="keyword">select</span> <span class="string">&#x27;北京&#x27;</span> 地区,</span><br><span class="line"><span class="built_in">count</span>(<span class="operator">*</span>) <span class="keyword">as</span> 员工人数,</span><br><span class="line"><span class="built_in">sum</span>(PeopleSalary) <span class="keyword">as</span> 员工工资总和,</span><br><span class="line"><span class="built_in">avg</span>(PeopleSalary) 平均工资,</span><br><span class="line"><span class="built_in">max</span>(PeopleSalary)  最高工资,</span><br><span class="line"><span class="built_in">min</span>(PeopleSalary) 最低工资</span><br><span class="line"><span class="keyword">from</span> People </span><br><span class="line"><span class="keyword">where</span> PeopleAddress <span class="operator">=</span> <span class="string">&#x27;北京&#x27;</span></span><br><span class="line"><span class="keyword">union</span></span><br><span class="line"><span class="keyword">select</span> <span class="string">&#x27;武汉&#x27;</span> 地区,</span><br><span class="line"><span class="built_in">count</span>(<span class="operator">*</span>) <span class="keyword">as</span> 员工人数,</span><br><span class="line"><span class="built_in">sum</span>(PeopleSalary) <span class="keyword">as</span> 员工工资总和,</span><br><span class="line"><span class="built_in">avg</span>(PeopleSalary) 平均工资,</span><br><span class="line"><span class="built_in">max</span>(PeopleSalary)  最高工资,</span><br><span class="line"><span class="built_in">min</span>(PeopleSalary) 最低工资</span><br><span class="line"><span class="keyword">from</span> People </span><br><span class="line"><span class="keyword">where</span> PeopleAddress <span class="operator">=</span> <span class="string">&#x27;武汉&#x27;</span></span><br><span class="line"><span class="comment">/*如果不使用group by 分组查询</span></span><br><span class="line"><span class="comment">只能不断 通过这个union </span></span><br><span class="line"><span class="comment">把每一个地区的信息都咨询出来</span></span><br><span class="line"><span class="comment">=========注意==========</span></span><br><span class="line"><span class="comment">在通过union合并的时候</span></span><br><span class="line"><span class="comment">并不是所有的查询结果都可以合并</span></span><br><span class="line"><span class="comment">使用union要求两个查询结果的列的数量必须一致</span></span><br><span class="line"><span class="comment">同时数据类型也要求相同*/</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*方案二 使用group by*/</span></span><br><span class="line"><span class="keyword">select</span> PeopleAddress 地区,</span><br><span class="line"><span class="built_in">count</span>(<span class="operator">*</span>) <span class="keyword">as</span> 员工人数,</span><br><span class="line"><span class="built_in">sum</span>(PeopleSalary) <span class="keyword">as</span> 员工工资总和,</span><br><span class="line"><span class="built_in">avg</span>(PeopleSalary) 平均工资,</span><br><span class="line"><span class="built_in">max</span>(PeopleSalary)  最高工资,</span><br><span class="line"><span class="built_in">min</span>(PeopleSalary) 最低工资</span><br><span class="line"><span class="keyword">from</span> People </span><br><span class="line"><span class="keyword">Group</span> <span class="keyword">by</span> PeopleAddress</span><br><span class="line"><span class="comment">/*如果在上面加上一行PeopleName</span></span><br><span class="line"><span class="comment">就会报错</span></span><br><span class="line"><span class="comment">因为group by </span></span><br><span class="line"><span class="comment">只能显示</span></span><br><span class="line"><span class="comment">聚合函数的结果</span></span><br><span class="line"><span class="comment">或者 group by 本身的字段</span></span><br><span class="line"><span class="comment">其他的字段是无法显示的</span></span><br><span class="line"><span class="comment">从逻辑上面也说不过去</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">--根据员工所在地区分组统计员工人数，员工工资总和，平均工资，最高工资和最低工资</span></span><br><span class="line"><span class="comment">--1985 年及以后出身的员工不参与统计。</span></span><br><span class="line"><span class="keyword">select</span> <span class="built_in">count</span>(<span class="operator">*</span>) <span class="keyword">as</span> 员工人数,</span><br><span class="line"><span class="built_in">sum</span>(PeopleSalary) <span class="keyword">as</span> 工资总和,</span><br><span class="line"><span class="built_in">avg</span>(PeopleSalary) <span class="keyword">as</span> 平均工资,</span><br><span class="line"><span class="built_in">max</span>(PeopleSalary) <span class="keyword">as</span> 最高工资,</span><br><span class="line"><span class="built_in">min</span>(PeopleSalary) <span class="keyword">as</span> 最低工资</span><br><span class="line"><span class="keyword">from</span> People</span><br><span class="line"><span class="keyword">where</span> <span class="keyword">year</span>(PeopleBirth) <span class="operator">&lt;</span> <span class="number">1985</span></span><br><span class="line"><span class="keyword">group</span> <span class="keyword">by</span> PeopleAddress</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">--根据员工所在地区分组统计员工人数，员工工资总和，平均工资，最高工资和最低工资</span></span><br><span class="line"><span class="comment">--要求筛选出员工人数至少在2人及以上的记录，并且1985年及以后出身的员工不参与统计。</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">select count(*) as 员工人数,</span></span><br><span class="line"><span class="comment">sum(PeopleSalary) as 工资总和,</span></span><br><span class="line"><span class="comment">avg(PeopleSalary) as 平均工资,</span></span><br><span class="line"><span class="comment">max(PeopleSalary) as 最高工资,</span></span><br><span class="line"><span class="comment">min(PeopleSalary) as 最低工资</span></span><br><span class="line"><span class="comment">from People</span></span><br><span class="line"><span class="comment">where year(PeopleBirth) &lt; 1985</span></span><br><span class="line"><span class="comment">and 员工人数 &gt;= 2</span></span><br><span class="line"><span class="comment">group by PeopleAddress</span></span><br><span class="line"><span class="comment">一开始想到的是这种写法</span></span><br><span class="line"><span class="comment">然后这里报错 </span></span><br><span class="line"><span class="comment">显示 聚合不应该出现在where字句中</span></span><br><span class="line"><span class="comment">所以 where 子句中不能出现聚合函数</span></span><br><span class="line"><span class="comment">只能出现原始数据</span></span><br><span class="line"><span class="comment">所以这个时候我们就需要使用having 关键字</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*用下面的做法就正常了*/</span></span><br><span class="line"><span class="keyword">select</span> <span class="built_in">count</span>(<span class="operator">*</span>) <span class="keyword">as</span> 员工人数,</span><br><span class="line"><span class="built_in">sum</span>(PeopleSalary) <span class="keyword">as</span> 工资总和,</span><br><span class="line"><span class="built_in">avg</span>(PeopleSalary) <span class="keyword">as</span> 平均工资,</span><br><span class="line"><span class="built_in">max</span>(PeopleSalary) <span class="keyword">as</span> 最高工资,</span><br><span class="line"><span class="built_in">min</span>(PeopleSalary) <span class="keyword">as</span> 最低工资</span><br><span class="line"><span class="keyword">from</span> People</span><br><span class="line"><span class="keyword">where</span> <span class="keyword">year</span>(PeopleBirth) <span class="operator">&lt;</span> <span class="number">1985</span></span><br><span class="line"><span class="keyword">group</span> <span class="keyword">by</span> PeopleAddress</span><br><span class="line"><span class="keyword">having</span> <span class="built_in">count</span>(<span class="operator">*</span>)  <span class="operator">&gt;=</span><span class="number">2</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*然后联想到 如果不是聚合函数可不可以在having里面</span></span><br><span class="line"><span class="comment">比如说我把那个年龄的判断放在having里面*/</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> <span class="built_in">count</span>(<span class="operator">*</span>) <span class="keyword">as</span> 员工人数,</span><br><span class="line"><span class="built_in">sum</span>(PeopleSalary) <span class="keyword">as</span> 工资总和,</span><br><span class="line"><span class="built_in">avg</span>(PeopleSalary) <span class="keyword">as</span> 平均工资,</span><br><span class="line"><span class="built_in">max</span>(PeopleSalary) <span class="keyword">as</span> 最高工资,</span><br><span class="line"><span class="built_in">min</span>(PeopleSalary) <span class="keyword">as</span> 最低工资</span><br><span class="line"><span class="keyword">from</span> People</span><br><span class="line"><span class="keyword">group</span> <span class="keyword">by</span> PeopleAddress</span><br><span class="line"><span class="keyword">having</span> <span class="built_in">count</span>(<span class="operator">*</span>)  <span class="operator">&gt;=</span><span class="number">2</span></span><br><span class="line"><span class="keyword">and</span> <span class="keyword">year</span>(PeopleBirth) <span class="operator">&lt;</span> <span class="number">1985</span></span><br><span class="line"><span class="comment">/*上面的代码还是报错</span></span><br><span class="line"><span class="comment">HAVING 子句中的列 &#x27;People.PeopleBirth&#x27; 无效，因为该列没有包含在聚合函数或 GROUP BY 子句中。</span></span><br><span class="line"><span class="comment">说明没有包含聚合函数或者group by 的一般数据</span></span><br><span class="line"><span class="comment">having同样不接收*/</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*多表查询*/</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span></span><br><span class="line">Department</span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span></span><br><span class="line">People</span><br><span class="line"><span class="comment">/*笛卡尔乘机*/</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> </span><br><span class="line">People,Department</span><br><span class="line"><span class="comment">/*咨询结果将Department 所有记录</span></span><br><span class="line"><span class="comment">和People表所有记录依次排列组合</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">这个笛卡尔积 他不考虑这么多</span></span><br><span class="line"><span class="comment">直接将所有的数据相乘</span></span><br><span class="line"><span class="comment">之前的外键他也不考虑</span></span><br><span class="line"><span class="comment">所以这里出现了不应该出现的冗余数据</span></span><br><span class="line"><span class="comment">比如说每个人都有属于每个部门的数据</span></span><br><span class="line"><span class="comment">比如说刘备真实情况下属于软件部的</span></span><br><span class="line"><span class="comment">但是在这个笛卡尔积中既有属于软件部的刘备 </span></span><br><span class="line"><span class="comment">也有属于硬件部乃至其他所有部门的刘备</span></span><br><span class="line"><span class="comment">这样明显是不合理不科学的</span></span><br><span class="line"><span class="comment">所以这里要做的事情 就是</span></span><br><span class="line"><span class="comment">让员工表中的department id</span></span><br><span class="line"><span class="comment">和部门表中的department id 相同</span></span><br><span class="line"><span class="comment">关联 之后</span></span><br><span class="line"><span class="comment">再去显示他部门的id</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">之前有说到在建表的时候 通过创建外键的方式</span></span><br><span class="line"><span class="comment">关联了这个department id</span></span><br><span class="line"><span class="comment">所以部门表中没有的department id</span></span><br><span class="line"><span class="comment">无法在员工表中被创建 </span></span><br><span class="line"><span class="comment">这就使得在插入数据的时候就保证了数据是一一对应的</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">tips 外键可以为空 就是说这里 原则上可以存在部门为null的情况</span></span><br><span class="line"><span class="comment">不过我们在上面建表的时候加了not null的非空约束 */</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/*简单多表查询*/</span></span><br><span class="line"><span class="comment">/*查询员工信息 显示部门名称*/</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> </span><br><span class="line"><span class="keyword">from</span> People,</span><br><span class="line">Department</span><br><span class="line"><span class="keyword">where</span> People.DepartmentId <span class="operator">=</span> Department.DepartmentId</span><br><span class="line"><span class="comment">/*通过DepartmentId 连接两张表</span></span><br><span class="line"><span class="comment">使得两张表中的数据对应*/</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*查询出员工信息 显示职级名称*/</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> ,</span><br><span class="line">RankName <span class="keyword">as</span> 职级名称</span><br><span class="line"><span class="keyword">from</span> People,</span><br><span class="line">[Rank]</span><br><span class="line"><span class="keyword">where</span> People.RankId <span class="operator">=</span> [Rank].RankId</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/*查询出员工信息 显示部门名称，职级名称*/</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span>,</span><br><span class="line">DepartmentName,</span><br><span class="line">RankName</span><br><span class="line"><span class="keyword">from</span></span><br><span class="line">People,</span><br><span class="line">Department,</span><br><span class="line">[Rank]</span><br><span class="line"><span class="keyword">where</span> People.DepartmentId <span class="operator">=</span> Department.DepartmentId</span><br><span class="line"><span class="keyword">and</span> People.RankId <span class="operator">=</span> [Rank].RankId</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">--猜想 如果把where中的语句等号两边换位</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span>,</span><br><span class="line">DepartmentName,</span><br><span class="line">RankName</span><br><span class="line"><span class="keyword">from</span></span><br><span class="line">People,</span><br><span class="line">Department,</span><br><span class="line">[Rank]</span><br><span class="line"><span class="keyword">where</span> Department.DepartmentId <span class="operator">=</span> People.DepartmentId</span><br><span class="line"><span class="keyword">and</span> [Rank].RankId <span class="operator">=</span> People.RankId</span><br><span class="line"><span class="comment">/*得出结论 等号两边换位置不影响结果*/</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*直接把所有数据显示出来*/</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span></span><br><span class="line">People,</span><br><span class="line">Department,</span><br><span class="line">[Rank]</span><br><span class="line"><span class="keyword">where</span> People.DepartmentId <span class="operator">=</span> Department.DepartmentId</span><br><span class="line"><span class="keyword">and</span> People.RankId <span class="operator">=</span> [Rank].RankId</span><br><span class="line"></span><br><span class="line"><span class="comment">/*内连接查询*/</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*内连接（INNER JOIN）是一种常用的连接方式，</span></span><br><span class="line"><span class="comment">指的是只返回在两个表中都有匹配的记录。</span></span><br><span class="line"><span class="comment">在下面的咨询中，INNER JOIN会返回People表与</span></span><br><span class="line"><span class="comment">Department、Rank表中符合条件的所有行。</span></span><br><span class="line"><span class="comment">只要存在匹配行，结果才会返回。</span></span><br><span class="line"><span class="comment">同时如果遇到People中的DepartmentId为空值的情况下</span></span><br><span class="line"><span class="comment">就不会返回记录何结果 </span></span><br><span class="line"><span class="comment">但是因为我在前面添加了非空约束和外键约束</span></span><br><span class="line"><span class="comment">所以一不会出现不对应的情况 二不会出现空值的情况	*/</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*咨询员工信息  显示部门名称 */</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> </span><br><span class="line"><span class="keyword">from</span> People</span><br><span class="line"><span class="keyword">inner</span> <span class="keyword">join</span> Department <span class="keyword">on</span> People.DepartmentId <span class="operator">=</span> Department.DepartmentId</span><br><span class="line"><span class="comment">/**/</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/*咨询员工信息  显示职级名称 */</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> </span><br><span class="line"><span class="keyword">from</span> People</span><br><span class="line"><span class="keyword">inner</span> <span class="keyword">join</span> [Rank] <span class="keyword">on</span> People.RankId <span class="operator">=</span> [Rank].RankId</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/*咨询员工信息 显示部门名称 显示职级名称*/</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> </span><br><span class="line"><span class="keyword">from</span> People</span><br><span class="line"><span class="keyword">inner</span> <span class="keyword">join</span> Department <span class="keyword">on</span> People.DepartmentId <span class="operator">=</span> Department.DepartmentId</span><br><span class="line"><span class="keyword">inner</span> <span class="keyword">join</span> [Rank] <span class="keyword">on</span> People.RankId <span class="operator">=</span> [Rank].RankId</span><br><span class="line"></span><br><span class="line"><span class="comment">/*简单多表咨询和内连接共同的特点：</span></span><br><span class="line"><span class="comment">不符合主外键关系的数据不会被显示出来</span></span><br><span class="line"><span class="comment">也就是我上面说的  不满足上面约束的数据 咨询不到</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="comment">/*为了测试下面的外连接 和这里的内连接  现在我要手动删除外键约束</span></span><br><span class="line"><span class="comment">选择people表 然后选择关系 然后删除FK 接着插入下面的数据</span></span><br><span class="line"><span class="comment">insert into People(DepartmentId,RankId,PeopleName,PeopleGender,PeopleBirth,</span></span><br><span class="line"><span class="comment">PeopleSalary,PeoplePhone,PeopleAddress,PeopleAddTime)</span></span><br><span class="line"><span class="comment">values（99,99,&#x27;abc&#x27;,&#x27;男&#x27;,&#x27;1975-8-9&#x27;,&#x27;8000,&#x27;13556857548&#x27;,&#x27;香港&#x27;,getdate()）</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> People(DepartmentId,RankId,PeopleName,PeopleGender,PeopleBirth,</span><br><span class="line">PeopleSalary,PeoplePhone,PeopleAddress,PeopleAddTime)</span><br><span class="line"><span class="keyword">values</span>(<span class="number">99</span>,<span class="number">99</span>,<span class="string">&#x27;abc&#x27;</span>,<span class="string">&#x27;男&#x27;</span>,<span class="string">&#x27;1975-8-9&#x27;</span>,<span class="number">8000</span>,<span class="string">&#x27;1351123465&#x27;</span>,<span class="string">&#x27;香港&#x27;</span>,getdate())</span><br><span class="line"></span><br><span class="line"><span class="comment">/*插入成功后 首先我们先来进行查询 会发现我们查询不到abc这条数据</span></span><br><span class="line"><span class="comment">说明不满足主外键关系的数据不会被显示在内连接和简单多表咨询里面</span></span><br><span class="line"><span class="comment">这两种连接 的本质就是根据主外键关系连接*/</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> </span><br><span class="line"><span class="keyword">from</span> People</span><br><span class="line"><span class="keyword">inner</span> <span class="keyword">join</span> Department <span class="keyword">on</span> People.DepartmentId <span class="operator">=</span> Department.DepartmentId</span><br><span class="line"><span class="keyword">inner</span> <span class="keyword">join</span> [Rank] <span class="keyword">on</span> People.RankId <span class="operator">=</span> [Rank].RankId</span><br><span class="line"><span class="comment">/**/</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/*外连接</span></span><br><span class="line"><span class="comment">外连接分成三类</span></span><br><span class="line"><span class="comment">左外连接</span></span><br><span class="line"><span class="comment">右外连接 </span></span><br><span class="line"><span class="comment">全外连接*/</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/*咨询员工信息  显示部门名称 */</span></span><br><span class="line"><span class="comment">/*左外连接*/</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> People</span><br><span class="line"><span class="keyword">left</span> <span class="keyword">join</span> Department <span class="keyword">on</span> People.DepartmentId <span class="operator">=</span> Department.DepartmentId</span><br><span class="line"><span class="comment">/*首先左外连接的语法就是把内连接的inner改成left</span></span><br><span class="line"><span class="comment">然后咨询之后发现这个 数据的变化就是</span></span><br><span class="line"><span class="comment">左边出现了上面添加的abc</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">然后我们进行以下分析</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">什么是左表？怎么看？</span></span><br><span class="line"><span class="comment">上面的左外连接 可以写成</span></span><br><span class="line"><span class="comment">People left join Department</span></span><br><span class="line"><span class="comment">这里 People表在left join 语句的左边 所以是左表</span></span><br><span class="line"><span class="comment">通过left join 语句分成左右两张表</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">什么是左外连接？</span></span><br><span class="line"><span class="comment">左外连接就是把左表的数据当主要参考点</span></span><br><span class="line"><span class="comment">也就是说左表中的每一列数据</span></span><br><span class="line"><span class="comment">都要在右表找到对应的值</span></span><br><span class="line"><span class="comment">在这个例子中</span></span><br><span class="line"><span class="comment">People是主表</span></span><br><span class="line"><span class="comment">abc这列数据在people中有 </span></span><br><span class="line"><span class="comment">所以生成的虚表中一定会有这一列</span></span><br><span class="line"><span class="comment">然后在department表中又找不到这一列对应的数据</span></span><br><span class="line"><span class="comment">所以就用null来表示</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">所以这类左外连接适用的范围就是对于左表中的每一行数据</span></span><br><span class="line"><span class="comment">都必须要找到他的对应关系的情况</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> Department</span><br><span class="line"><span class="keyword">left</span> <span class="keyword">join</span> People <span class="keyword">on</span> People.DepartmentId <span class="operator">=</span> Department.DepartmentId</span><br><span class="line"><span class="comment">/*以department 作为主表</span></span><br><span class="line"><span class="comment">那么所有的部门都会显示出来</span></span><br><span class="line"><span class="comment">同时 没有人的部门会用null的样子来表示*/</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*咨询员工信息  显示职级名称 */</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> </span><br><span class="line"><span class="keyword">from</span> People</span><br><span class="line"><span class="keyword">left</span> <span class="keyword">join</span> [Rank] <span class="keyword">on</span> People.RankId <span class="operator">=</span> [Rank].RankId</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/*咨询员工信息 显示部门名称 显示职级名称*/</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> </span><br><span class="line"><span class="keyword">from</span> People</span><br><span class="line"><span class="keyword">left</span> <span class="keyword">join</span> Department <span class="keyword">on</span> People.DepartmentId <span class="operator">=</span> Department.DepartmentId</span><br><span class="line"><span class="keyword">left</span> <span class="keyword">join</span> [Rank] <span class="keyword">on</span> People.RankId <span class="operator">=</span> [Rank].RankId</span><br><span class="line"></span><br><span class="line"><span class="comment">/*右连 </span></span><br><span class="line"><span class="comment">A left join B = B right join A</span></span><br><span class="line"><span class="comment">右连 就是把右边的表格当成主表</span></span><br><span class="line"><span class="comment">然后查询出的结果中带着右边的表格中的每一列</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*下面两种咨询咨询出来的结果相同 </span></span><br><span class="line"><span class="comment">只是列显示的顺序不同 可以说是等价的*/</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> </span><br><span class="line">People <span class="keyword">left</span> <span class="keyword">join</span> Department <span class="keyword">on</span> People.DepartmentId <span class="operator">=</span> Department.DepartmentId</span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> </span><br><span class="line">Department <span class="keyword">right</span> <span class="keyword">join</span> People <span class="keyword">on</span> People.DepartmentId <span class="operator">=</span> Department.DepartmentId</span><br><span class="line"></span><br><span class="line"><span class="comment">/*全外连</span></span><br><span class="line"><span class="comment">两张表的数据 无论是否符合关系 都要显示</span></span><br><span class="line"><span class="comment">在这个表的关系中</span></span><br><span class="line"><span class="comment">如果说left join 可以显示说有的人（无论这个人是否有部门</span></span><br><span class="line"><span class="comment">right join 可以显示所有的部门（无论部门是否有人</span></span><br><span class="line"><span class="comment">那么 full join 既可以显示所有的人 又可以显示 所有的部门</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> </span><br><span class="line">People <span class="keyword">full</span> <span class="keyword">join</span> Department <span class="keyword">on</span> People.DepartmentId <span class="operator">=</span> Department.DepartmentId</span><br><span class="line"></span><br><span class="line"><span class="comment">/*多表查询综合实例*/</span></span><br><span class="line"> <span class="comment">/*查询出武汉地区所有员工信息，要求显示部门名称以及员工的详细资料*/</span></span><br><span class="line"> <span class="keyword">select</span> <span class="operator">*</span> </span><br><span class="line"> <span class="keyword">from</span> People</span><br><span class="line"> <span class="keyword">inner</span> <span class="keyword">join</span> Department <span class="keyword">on</span> People.DepartmentId<span class="operator">=</span>Department.DepartmentId</span><br><span class="line"> <span class="keyword">where</span> PeopleAddress <span class="operator">=</span> <span class="string">&#x27;武汉&#x27;</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">select</span> <span class="operator">*</span> </span><br><span class="line"> <span class="keyword">from</span> People</span><br><span class="line"> <span class="keyword">left</span> <span class="keyword">join</span> Department <span class="keyword">on</span> People.DepartmentId<span class="operator">=</span>Department.DepartmentId</span><br><span class="line"> <span class="keyword">where</span> PeopleAddress <span class="operator">=</span> <span class="string">&#x27;武汉&#x27;</span></span><br><span class="line"> <span class="comment">/*这里应该用哪一种连接方式 </span></span><br><span class="line"><span class="comment"> 如果用inner join 则如果有人位于武汉但是没有部门名称不会被显示</span></span><br><span class="line"><span class="comment"> 如果用left join 则没有部门名称会显示null*/</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"> <span class="comment">/*咨询处武汉地区所有员工信息，要求显示部门名称</span></span><br><span class="line"><span class="comment"> 职级名称 以及员工的详细 资料*/</span></span><br><span class="line"> <span class="comment">/*这种情况就不需要考虑 肯定是用left join</span></span><br><span class="line"><span class="comment"> 因为可能出现有人没有部门编号 但是有职业级编号 的情况 */</span></span><br><span class="line"> <span class="keyword">select</span> PeopleName <span class="keyword">as</span> 姓名,</span><br><span class="line"> DepartmentName <span class="keyword">as</span> 部门名,</span><br><span class="line"> RankName <span class="keyword">as</span> 职级</span><br><span class="line"> <span class="keyword">from</span> People <span class="keyword">left</span> <span class="keyword">join</span> Department <span class="keyword">on</span> People.DepartmentId <span class="operator">=</span> Department.DepartmentId</span><br><span class="line"> <span class="keyword">left</span> <span class="keyword">join</span> [Rank] <span class="keyword">on</span> People.RankId <span class="operator">=</span> [Rank].RankId</span><br><span class="line"> <span class="keyword">where</span> PeopleAddress <span class="operator">=</span> <span class="string">&#x27;武汉&#x27;</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">select</span> PeopleName <span class="keyword">as</span> 姓名,</span><br><span class="line"> DepartmentName <span class="keyword">as</span> 部门名,</span><br><span class="line"> People.DepartmentId <span class="keyword">as</span> 部门编号,<span class="comment">/*</span></span><br><span class="line"><span class="comment"> 如果要写下面连接的子句的话 </span></span><br><span class="line"><span class="comment"> 一定要说明这个是左表还是右表里面的数据</span></span><br><span class="line"><span class="comment"> 虽然左表和右表里面到店数据理论上是相同的*/</span></span><br><span class="line"> RankName <span class="keyword">as</span> 职级</span><br><span class="line"> <span class="keyword">from</span> People <span class="keyword">left</span> <span class="keyword">join</span> Department <span class="keyword">on</span> People.DepartmentId <span class="operator">=</span> Department.DepartmentId</span><br><span class="line"> <span class="keyword">left</span> <span class="keyword">join</span> [Rank] <span class="keyword">on</span> People.RankId <span class="operator">=</span> [Rank].RankId</span><br><span class="line"> <span class="keyword">where</span> PeopleAddress <span class="operator">=</span> <span class="string">&#x27;武汉&#x27;</span></span><br><span class="line"> </span><br><span class="line"> <span class="comment">/*根据部门分组同居员工人数</span></span><br><span class="line"><span class="comment"> 员工工资总和 平均工资 最高最低工资*/</span></span><br><span class="line"><span class="keyword">select</span> </span><br><span class="line"><span class="built_in">count</span>(<span class="operator">*</span>) <span class="keyword">as</span> 员工人数,</span><br><span class="line"><span class="built_in">sum</span>(PeopleSalary) <span class="keyword">as</span> 员工工资总和,</span><br><span class="line"><span class="built_in">avg</span>(PeopleSalary) <span class="keyword">as</span> 平均工资,</span><br><span class="line"><span class="built_in">max</span>(PeopleSalary) <span class="keyword">as</span> 最高工资,</span><br><span class="line"><span class="built_in">min</span>(PeopleSalary) <span class="keyword">as</span> 最低工资,</span><br><span class="line">DepartmentName <span class="keyword">as</span> 部门名称</span><br><span class="line"><span class="keyword">from</span> People</span><br><span class="line"><span class="keyword">left</span> <span class="keyword">join</span> Department <span class="keyword">on</span> People.DepartmentId <span class="operator">=</span> Department.DepartmentId</span><br><span class="line"><span class="keyword">group</span> <span class="keyword">by</span> Department.DepartmentId,Department.DepartmentName</span><br><span class="line"><span class="comment">/*这样会发现 有一条错误的数据 没有部门名称 不希望显示 所以改成内连接*/</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> </span><br><span class="line"><span class="built_in">count</span>(<span class="operator">*</span>) <span class="keyword">as</span> 员工人数,</span><br><span class="line"><span class="built_in">sum</span>(PeopleSalary) <span class="keyword">as</span> 员工工资总和,</span><br><span class="line"><span class="built_in">avg</span>(PeopleSalary) <span class="keyword">as</span> 平均工资,</span><br><span class="line"><span class="built_in">max</span>(PeopleSalary) <span class="keyword">as</span> 最高工资,</span><br><span class="line"><span class="built_in">min</span>(PeopleSalary) <span class="keyword">as</span> 最低工资,</span><br><span class="line">DepartmentName <span class="keyword">as</span> 部门名称</span><br><span class="line"><span class="keyword">from</span> People</span><br><span class="line"><span class="keyword">inner</span> <span class="keyword">join</span> Department <span class="keyword">on</span> People.DepartmentId <span class="operator">=</span> Department.DepartmentId</span><br><span class="line"><span class="keyword">group</span> <span class="keyword">by</span> Department.DepartmentId,DepartmentName</span><br><span class="line"></span><br><span class="line"><span class="comment">/*根据部门分组统计员工人数</span></span><br><span class="line"><span class="comment">员工工资总和 平均工资 最高和最低工资</span></span><br><span class="line"><span class="comment">平均工资10000以下的不参与统计 并且根据平均工资降序排列*/</span></span><br><span class="line"><span class="keyword">select</span> <span class="built_in">count</span>(<span class="operator">*</span>) <span class="keyword">as</span> 员工人数,</span><br><span class="line"><span class="built_in">sum</span>(PeopleSalary) <span class="keyword">as</span> 员工工资总和,</span><br><span class="line"><span class="built_in">avg</span>(PeopleSalary) <span class="keyword">as</span> 平均工资,</span><br><span class="line"><span class="built_in">max</span>(PeopleSalary) <span class="keyword">as</span> 最高工资,</span><br><span class="line"><span class="built_in">min</span>(PeopleSalary) <span class="keyword">as</span> 最低工资,</span><br><span class="line">DepartmentName <span class="keyword">as</span> 部门名称</span><br><span class="line"><span class="keyword">from</span> People</span><br><span class="line"><span class="keyword">inner</span> <span class="keyword">join</span> Department <span class="keyword">on</span> People.DepartmentId <span class="operator">=</span> Department.Departmentid</span><br><span class="line"><span class="keyword">group</span> <span class="keyword">by</span> People.DepartmentId,DepartmentName</span><br><span class="line"><span class="keyword">having</span> <span class="built_in">avg</span>(PeopleSalary) <span class="operator">&gt;=</span> <span class="number">10000</span></span><br><span class="line"><span class="keyword">order</span> <span class="keyword">by</span> 平均工资 <span class="keyword">desc</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/*根据部门名称 然后根据职位名称</span></span><br><span class="line"><span class="comment">分组统计员工人数 员工工资总和 平均工资 最高最低工资*/</span></span><br><span class="line"><span class="keyword">select</span> <span class="built_in">count</span>(<span class="operator">*</span>) <span class="keyword">as</span> 员工人数,</span><br><span class="line"><span class="built_in">sum</span>(PeopleSalary) <span class="keyword">as</span> 员工工资总和,</span><br><span class="line"><span class="built_in">avg</span>(PeopleSalary) <span class="keyword">as</span> 平均工资,</span><br><span class="line"><span class="built_in">max</span>(PeopleSalary) <span class="keyword">as</span> 最高工资,</span><br><span class="line"><span class="built_in">min</span>(PeopleSalary) <span class="keyword">as</span> 最低工资,</span><br><span class="line">DepartmentName <span class="keyword">as</span> 部门名称,</span><br><span class="line">Rankname <span class="keyword">as</span> 职级</span><br><span class="line"><span class="keyword">from</span> People</span><br><span class="line"><span class="keyword">inner</span> <span class="keyword">join</span> Department <span class="keyword">on</span> People.DepartmentId <span class="operator">=</span> Department.Departmentid</span><br><span class="line"><span class="keyword">inner</span> <span class="keyword">join</span> [Rank] <span class="keyword">on</span> People.RankId <span class="operator">=</span> [Rank].RankId</span><br><span class="line"><span class="keyword">group</span> <span class="keyword">by</span> People.DepartmentId,People.RankId,DepartmentName,RankName</span><br><span class="line"><span class="keyword">having</span> <span class="built_in">avg</span>(PeopleSalary) <span class="operator">&gt;=</span> <span class="number">10000</span></span><br><span class="line"><span class="keyword">order</span> <span class="keyword">by</span> 平均工资 <span class="keyword">desc</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*自连接</span></span><br><span class="line"><span class="comment">自己连自己*/</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> Dept</span><br><span class="line">(</span><br><span class="line">DeptId <span class="type">int</span> <span class="keyword">Primary</span> key , <span class="comment">--部门编号</span></span><br><span class="line">DeptName <span class="type">varchar</span>(<span class="number">50</span>),<span class="comment">--部门名称</span></span><br><span class="line">ParentId <span class="type">int</span>,<span class="comment">--上级部门编号</span></span><br><span class="line"></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">DeptId DeptName ParentId</span></span><br><span class="line"><span class="comment">1       软件部    0</span></span><br><span class="line"><span class="comment">2		硬件部	  0</span></span><br><span class="line"><span class="comment">3		软件研发部 1</span></span><br><span class="line"><span class="comment">4		硬件测试部 2</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="comment">/*一级部门*/</span></span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> Dept(DeptId,DeptName,ParentId)</span><br><span class="line"><span class="keyword">values</span> (<span class="number">1</span>,<span class="string">&#x27;软件部&#x27;</span>,<span class="number">0</span>)</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> Dept(DeptId,DeptName,ParentId)</span><br><span class="line"><span class="keyword">values</span> (<span class="number">2</span>,<span class="string">&#x27;硬件部&#x27;</span>,<span class="number">0</span>)</span><br><span class="line"><span class="comment">/*二级部门*/</span></span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> Dept(DeptId,DeptName,ParentId)</span><br><span class="line"><span class="keyword">values</span> (<span class="number">3</span>,<span class="string">&#x27;软件研发部&#x27;</span>,<span class="number">1</span>)</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> Dept(DeptId,DeptName,ParentId)</span><br><span class="line"><span class="keyword">values</span> (<span class="number">4</span>,<span class="string">&#x27;软件测试部&#x27;</span>,<span class="number">1</span>)</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> Dept(DeptId,DeptName,ParentId)</span><br><span class="line"><span class="keyword">values</span> (<span class="number">5</span>,<span class="string">&#x27;软件实施部&#x27;</span>,<span class="number">1</span>)</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> Dept(DeptId,DeptName,ParentId)</span><br><span class="line"><span class="keyword">values</span> (<span class="number">6</span>,<span class="string">&#x27;硬件研发部&#x27;</span>,<span class="number">2</span>)</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> Dept(DeptId,DeptName,ParentId)</span><br><span class="line"><span class="keyword">values</span> (<span class="number">7</span>,<span class="string">&#x27;硬件测试部&#x27;</span>,<span class="number">2</span>)</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> Dept(DeptId,DeptName,ParentId)</span><br><span class="line"><span class="keyword">values</span> (<span class="number">8</span>,<span class="string">&#x27;硬件实施部&#x27;</span>,<span class="number">2</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> Dept</span><br><span class="line"><span class="comment">/*要查询每个部门的上级部门*/</span></span><br><span class="line"><span class="keyword">select</span> A.DeptId <span class="keyword">as</span> 部门编号,</span><br><span class="line">A.DeptName <span class="keyword">as</span> 部门名称,</span><br><span class="line">B.DeptName <span class="keyword">as</span> 上级部门</span><br><span class="line"><span class="keyword">from</span> Dept A</span><br><span class="line"><span class="keyword">left</span> <span class="keyword">join</span> Dept B <span class="keyword">on</span> A.ParentId <span class="operator">=</span> B.DeptId</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/*视图*/</span></span><br><span class="line"><span class="comment">/*视图  可以理解陈 虚拟表</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/*存储过程*/</span></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h2 id="其他课堂的代码"><a href="#其他课堂的代码" class="headerlink" title="其他课堂的代码"></a>其他课堂的代码</h2><h3 id="建库表"><a href="#建库表" class="headerlink" title="建库表"></a>建库表</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 创建数据库 DB1</span></span><br><span class="line"><span class="keyword">CREATE</span> DATABASE DB1</span><br><span class="line"><span class="keyword">ON</span></span><br><span class="line">(</span><br><span class="line">    NAME <span class="operator">=</span> DB1_data,</span><br><span class="line">    FILENAME <span class="operator">=</span> <span class="string">&#x27;D:\SQL2019\数据库代码\Y24M9D29\DB1_data.mdf&#x27;</span>,</span><br><span class="line">    SIZE <span class="operator">=</span> <span class="number">30</span>MB,</span><br><span class="line">    MAXSIZE <span class="operator">=</span> <span class="number">100</span>MB,</span><br><span class="line">    FILEGROWTH <span class="operator">=</span> <span class="number">10</span><span class="operator">%</span></span><br><span class="line">)</span><br><span class="line">LOG <span class="keyword">ON</span></span><br><span class="line">(</span><br><span class="line">    NAME <span class="operator">=</span> DB1_log,</span><br><span class="line">    FILENAME <span class="operator">=</span> <span class="string">&#x27;D:\SQL2019\数据库代码\Y24M9D29\DB1_log.ldf&#x27;</span>,</span><br><span class="line">    SIZE <span class="operator">=</span> <span class="number">10</span>MB,</span><br><span class="line">    FILEGROWTH <span class="operator">=</span> <span class="number">20</span>MB</span><br><span class="line">);</span><br><span class="line">GO</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 检查数据库</span></span><br><span class="line"><span class="keyword">EXEC</span> sp_helpdb DB1;</span><br><span class="line">GO</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 添加一个数据文件 DB1_data2，位置自定义，其他设置采用默认</span></span><br><span class="line"><span class="keyword">ALTER</span> DATABASE DB1</span><br><span class="line"><span class="keyword">ADD</span> FILE</span><br><span class="line">(</span><br><span class="line">    NAME <span class="operator">=</span> DB1_data2,</span><br><span class="line">    FILENAME <span class="operator">=</span> <span class="string">&#x27;D:\SQL2019\数据库代码\Y24M9D29\DB1_data2.ndf&#x27;</span></span><br><span class="line">);</span><br><span class="line">GO</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 将数据文件 DB1_data2 扩大到 20MB</span></span><br><span class="line"><span class="keyword">ALTER</span> DATABASE DB1</span><br><span class="line">MODIFY FILE</span><br><span class="line">(</span><br><span class="line">    NAME <span class="operator">=</span> DB1_data2,</span><br><span class="line">    SIZE <span class="operator">=</span> <span class="number">20</span>MB</span><br><span class="line">);</span><br><span class="line">GO</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 使用数据库 DB1</span></span><br><span class="line">USE DB1;</span><br><span class="line">GO</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 创建表格 StudentT</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> StudentT (</span><br><span class="line">    sno <span class="type">INT</span> <span class="keyword">NOT</span> <span class="keyword">NULL</span>,</span><br><span class="line">    sname <span class="type">VARCHAR</span>(<span class="number">20</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span>,</span><br><span class="line">    sex <span class="type">CHAR</span>(<span class="number">2</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">&#x27;男&#x27;</span>,</span><br><span class="line">    birthday <span class="type">DATE</span> <span class="keyword">NOT</span> <span class="keyword">NULL</span>,</span><br><span class="line">    IDcard <span class="type">CHAR</span>(<span class="number">18</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span>,</span><br><span class="line">    phone <span class="type">VARCHAR</span>(<span class="number">20</span>) <span class="keyword">NULL</span>,</span><br><span class="line">    email <span class="type">VARCHAR</span>(<span class="number">20</span>) <span class="keyword">NULL</span>,</span><br><span class="line">    <span class="keyword">CONSTRAINT</span> pk_Student <span class="keyword">PRIMARY</span> KEY (sno),</span><br><span class="line">    <span class="keyword">CONSTRAINT</span> uq_IDcard <span class="keyword">UNIQUE</span> (IDcard),</span><br><span class="line">    <span class="keyword">CONSTRAINT</span> chk_sex <span class="keyword">CHECK</span> (sex <span class="keyword">IN</span> (<span class="string">&#x27;男&#x27;</span>, <span class="string">&#x27;女&#x27;</span>)),</span><br><span class="line">    <span class="keyword">CONSTRAINT</span> chk_birthday <span class="keyword">CHECK</span> (birthday <span class="operator">&lt;</span> GETDATE()),</span><br><span class="line">    <span class="keyword">CONSTRAINT</span> chk_phone_email <span class="keyword">CHECK</span> (phone <span class="keyword">IS</span> <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">OR</span> email <span class="keyword">IS</span> <span class="keyword">NOT</span> <span class="keyword">NULL</span>)</span><br><span class="line">);</span><br><span class="line">GO</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 删除主键约束</span></span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> StudentT</span><br><span class="line"><span class="keyword">DROP</span> <span class="keyword">CONSTRAINT</span> pk_Student;</span><br><span class="line">GO</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 将学号字段的数据类型修改为定长8位字符型</span></span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> StudentT</span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">COLUMN</span> sno <span class="type">CHAR</span>(<span class="number">8</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span>;</span><br><span class="line">GO</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 将学号字段的数据类型修改为 int 型</span></span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> StudentT</span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">COLUMN</span> sno <span class="type">INT</span> <span class="keyword">NOT</span> <span class="keyword">NULL</span>;</span><br><span class="line">GO</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 重新创建主键约束</span></span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> StudentT</span><br><span class="line"><span class="keyword">ADD</span> <span class="keyword">CONSTRAINT</span> pk_Student <span class="keyword">PRIMARY</span> KEY (sno);</span><br><span class="line">GO</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 创建选课表 SC</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> SC (</span><br><span class="line">    sno <span class="type">INT</span> <span class="keyword">NOT</span> <span class="keyword">NULL</span>,</span><br><span class="line">    cno <span class="type">INT</span> <span class="keyword">NOT</span> <span class="keyword">NULL</span>,</span><br><span class="line">    score <span class="type">DECIMAL</span>(<span class="number">5</span>, <span class="number">2</span>) <span class="keyword">NULL</span>,</span><br><span class="line">    <span class="keyword">CONSTRAINT</span> pk_SC <span class="keyword">PRIMARY</span> KEY (sno, cno),</span><br><span class="line">    <span class="keyword">CONSTRAINT</span> chk_score <span class="keyword">CHECK</span> (score <span class="keyword">BETWEEN</span> <span class="number">0</span> <span class="keyword">AND</span> <span class="number">100</span>),</span><br><span class="line">    <span class="keyword">CONSTRAINT</span> fk_sno <span class="keyword">FOREIGN</span> KEY (sno) <span class="keyword">REFERENCES</span> StudentT(sno)</span><br><span class="line">);</span><br><span class="line">GO</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">--创建表格StudentT</span></span><br><span class="line"><span class="comment">--学号：sno	int型		不允许空</span></span><br><span class="line"><span class="comment">--姓名：sname	变长20位字符型	不允许空 </span></span><br><span class="line"><span class="comment">--性别：sex	定长2位字符型	不允许空 </span></span><br><span class="line"><span class="comment">--生日：birthday	日期型		不允许空</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">-- 检查表是否存在，若存在则删除</span></span><br><span class="line">IF OBJECT_ID(<span class="string">&#x27;dbo.StudentT&#x27;</span>, <span class="string">&#x27;U&#x27;</span>) <span class="keyword">IS</span> <span class="keyword">NOT</span> <span class="keyword">NULL</span></span><br><span class="line"><span class="keyword">BEGIN</span></span><br><span class="line">    <span class="keyword">DROP</span> <span class="keyword">TABLE</span> dbo.StudentT;</span><br><span class="line"><span class="keyword">END</span></span><br><span class="line">GO</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 创建表格 StudentT</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> StudentT (</span><br><span class="line">    sno <span class="type">INT</span> <span class="keyword">NOT</span> <span class="keyword">NULL</span>,                 <span class="comment">-- 学号：int 型，不允许空</span></span><br><span class="line">    sname <span class="type">VARCHAR</span>(<span class="number">20</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span>,      <span class="comment">-- 姓名：变长 20 位字符型，不允许空</span></span><br><span class="line">    sex <span class="type">CHAR</span>(<span class="number">2</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span>,            <span class="comment">-- 性别：定长 2 位字符型，不允许空</span></span><br><span class="line">    birthday <span class="type">DATE</span> <span class="keyword">NOT</span> <span class="keyword">NULL</span>,           <span class="comment">-- 生日：日期型，不允许空</span></span><br><span class="line">    <span class="keyword">CONSTRAINT</span> pk_Student <span class="keyword">PRIMARY</span> KEY (sno)  <span class="comment">-- 设置学号为主键</span></span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">--增加一个字段：身份证号码IDcard	定长18位字符型	不允许空A</span></span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> StudentT</span><br><span class="line"><span class="keyword">ADD</span> IDcard <span class="type">CHAR</span>(<span class="number">18</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">--增加2个字段：电话phone	变长20位字符型	允许空</span></span><br><span class="line"><span class="comment">--	        邮箱email	变长20位字符型	允许空</span></span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> StudentT</span><br><span class="line"><span class="keyword">ADD</span> phone <span class="type">VARCHAR</span>(<span class="number">20</span>) <span class="keyword">NULL</span>,  <span class="comment">-- 增加电话字段，变长20位字符型，允许空</span></span><br><span class="line">    email <span class="type">VARCHAR</span>(<span class="number">20</span>) <span class="keyword">NULL</span>;  <span class="comment">-- 增加邮箱字段，变长20位字符型，允许空</span></span><br><span class="line"></span><br><span class="line"><span class="comment">--删除一下主键约束</span></span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> StudentT <span class="keyword">DROP</span> <span class="keyword">CONSTRAINT</span> pk_Student;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">--将学号字段的数据类型修改为定长8位字符型</span></span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> StudentT</span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">COLUMN</span> sno <span class="type">CHAR</span>(<span class="number">8</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">--将学号设置为主键</span></span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> StudentT</span><br><span class="line"><span class="keyword">ADD</span> <span class="keyword">PRIMARY</span> KEY(sno);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">--删除与 sno 列相关的主键约束</span></span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> StudentT <span class="keyword">DROP</span> <span class="keyword">CONSTRAINT</span> PK_sno;</span><br><span class="line"></span><br><span class="line"><span class="comment">--将学号字段的数据类型修改为int型</span></span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> StudentT</span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">COLUMN</span> sno <span class="type">INT</span> <span class="keyword">NOT</span> <span class="keyword">NULL</span>;</span><br><span class="line"></span><br><span class="line"> <span class="keyword">ALTER</span> <span class="keyword">TABLE</span> StudentT</span><br><span class="line"> <span class="keyword">ADD</span> <span class="keyword">PRIMARY</span> KEY(sno)</span><br><span class="line"></span><br><span class="line"><span class="comment">--将身份证号设为惟一</span></span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> StudentT</span><br><span class="line"><span class="keyword">ADD</span> IDcard <span class="type">VARCHAR</span>(<span class="number">18</span>);</span><br><span class="line"> </span><br><span class="line"></span><br><span class="line"><span class="comment">--将性别默认设为“男”</span></span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> StudentT</span><br><span class="line"><span class="keyword">ADD</span> <span class="keyword">CONSTRAINT</span> DF_sex <span class="keyword">DEFAULT</span> <span class="string">&#x27;&#x27;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">--将性别字段规定为只能是“男”和“女”</span></span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> StudentT</span><br><span class="line"><span class="keyword">ADD</span> <span class="keyword">CONSTRAINT</span> CK_sex <span class="keyword">CHECK</span> (sex <span class="keyword">IN</span>(<span class="string">&#x27;男&#x27;</span>, <span class="string">&#x27;女&#x27;</span>));</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">--将生日字段规定为必须小于今天</span></span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> StudentT</span><br><span class="line"><span class="keyword">ADD</span> <span class="keyword">CONSTRAINT</span> CK_birthday <span class="keyword">CHECK</span> (birthday <span class="operator">&lt;</span> GETDATE());</span><br><span class="line"></span><br><span class="line"><span class="comment">--要求电话号码和邮箱不能同时为空</span></span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> StudentT</span><br><span class="line"><span class="comment">--加上 with nocheck 达到的效果就是前面的情况不管看（非唯一约束）</span></span><br><span class="line"><span class="keyword">ADD</span> <span class="keyword">CONSTRAINT</span> CK_phone_email <span class="keyword">CHECK</span> (phone <span class="keyword">is</span> <span class="keyword">not</span> <span class="keyword">null</span> <span class="keyword">or</span> email <span class="keyword">is</span> <span class="keyword">not</span> <span class="keyword">null</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">--创建一张选课表SC，包含字段：</span></span><br><span class="line"><span class="comment">--学号：sno	int型		不可为空</span></span><br><span class="line"><span class="comment">--课程号：cno	int型		不可为空</span></span><br><span class="line"><span class="comment">--成绩：score	可保留2位小数	可为空</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> sc(</span><br><span class="line">sno <span class="type">int</span> <span class="keyword">not</span> <span class="keyword">null</span>,</span><br><span class="line">cno <span class="type">int</span> <span class="keyword">not</span> <span class="keyword">null</span>,</span><br><span class="line">score <span class="type">decimal</span>(<span class="number">5</span>,<span class="number">2</span>)<span class="keyword">null</span>,);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">--将学号和课程号设为主键</span></span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> sc</span><br><span class="line"><span class="keyword">add</span> <span class="keyword">constraint</span> pk_SC <span class="keyword">primary</span> key (sno,cno);</span><br><span class="line"></span><br><span class="line"><span class="comment">--将成绩规定为0~100之间</span></span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> sc</span><br><span class="line"><span class="keyword">add</span> <span class="keyword">constraint</span> ck_score <span class="keyword">check</span>(score <span class="keyword">between</span> <span class="number">0</span> <span class="keyword">and</span> <span class="number">100</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">--设置学号为外键</span></span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> sc</span><br><span class="line"><span class="keyword">add</span> <span class="keyword">constraint</span> fk_sno <span class="keyword">foreign</span> key (sno) <span class="keyword">references</span> StudentT(sno);</span><br><span class="line"></span><br><span class="line"><span class="comment">--创建S表格</span></span><br><span class="line"><span class="comment">/*表名 S</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">列名 数据类型 长度 是否允许为空 默认值 说明</span></span><br><span class="line"><span class="comment">sid  char  8  不允许为空 主键</span></span><br><span class="line"><span class="comment">sname varchar 20 不允许 无</span></span><br><span class="line"><span class="comment">sex char 2 不允许 男 男，女</span></span><br><span class="line"><span class="comment">birthday date 3 不允许 无 必须小于今天</span></span><br><span class="line"><span class="comment">IDCard char 18 不允许  无 必须唯一</span></span><br><span class="line"><span class="comment">phone varchar 20 允许 无</span></span><br><span class="line"><span class="comment">email varchar 20 允许 无 Phone与email不能同时为空*/</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> S (</span><br><span class="line">    sid <span class="type">CHAR</span>(<span class="number">8</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">PRIMARY</span> KEY,</span><br><span class="line">    sname <span class="type">VARCHAR</span>(<span class="number">20</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span>,</span><br><span class="line">    sex <span class="type">CHAR</span>(<span class="number">2</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">CHECK</span> (sex <span class="keyword">IN</span> (<span class="string">&#x27;男&#x27;</span>, <span class="string">&#x27;女&#x27;</span>)),</span><br><span class="line">    birthday <span class="type">DATE</span> <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">CHECK</span> (birthday <span class="operator">&lt;</span> GETDATE()),</span><br><span class="line">    IDCard <span class="type">CHAR</span>(<span class="number">18</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">UNIQUE</span>,</span><br><span class="line">    phone <span class="type">VARCHAR</span>(<span class="number">20</span>) <span class="keyword">NULL</span>,</span><br><span class="line">    email <span class="type">VARCHAR</span>(<span class="number">20</span>) <span class="keyword">NULL</span>,</span><br><span class="line">    <span class="keyword">CONSTRAINT</span> CK_PhoneEmail <span class="keyword">CHECK</span> (phone <span class="keyword">IS</span> <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">OR</span> email <span class="keyword">IS</span> <span class="keyword">NOT</span> <span class="keyword">NULL</span>)</span><br><span class="line">);</span><br><span class="line"><span class="comment">--查看建表情况</span></span><br><span class="line"><span class="keyword">EXEC</span> sp_help <span class="string">&#x27;S&#x27;</span>;</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="数据操作"><a href="#数据操作" class="headerlink" title="数据操作"></a>数据操作</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">--向学生表StudentT(在DB1数据库中）中添加字段“联系地址address	变长50位字符型	可为空	默认为‘杭州市临安区青山湖街道杭电路1号’”</span></span><br><span class="line">USE DB1;  <span class="comment">-- 切换到 DB1 数据库</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> StudentT</span><br><span class="line"><span class="keyword">ADD</span> address <span class="type">VARCHAR</span>(<span class="number">50</span>) <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">&#x27;杭州市临安区青山湖街道杭电路1号&#x27;</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">--向学生表中添加字段编号：id		自动增长列	不可为空</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> StudentT</span><br><span class="line"><span class="keyword">DROP</span> <span class="keyword">CONSTRAINT</span> [PK__StudentT__DDDF644604DB6235];</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">USE DB1;  <span class="comment">-- 切换到 DB1 数据库</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> StudentT</span><br><span class="line"><span class="keyword">ADD</span> id <span class="type">INT</span> <span class="keyword">IDENTITY</span>(<span class="number">1</span>,<span class="number">1</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">PRIMARY</span> KEY;</span><br><span class="line"><span class="comment">--出了点问题 清除一下</span></span><br><span class="line"><span class="keyword">DELETE</span> <span class="keyword">FROM</span> StudentT;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">--向学生表StudentT中插入以下数据</span></span><br><span class="line"><span class="comment">--学号	姓名	性别	生日		身份证号		电话		邮箱		地址</span></span><br><span class="line"><span class="comment">--1	s1	男	1999-1-2		11111111	                88166401	                s1@163.com	杭州	</span></span><br><span class="line"><span class="comment">--2	s2	女	1999-12-31	22222222		88166402		不知		不知	</span></span><br><span class="line"><span class="comment">--3	s3	默认	1998-3-4		33333333		不知		s3@163.com	不知</span></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> StudentT (sno, sname, sex, birthday, IDcard, phone, email, address)</span><br><span class="line"><span class="keyword">VALUES</span> (<span class="number">1</span>, <span class="string">&#x27;s1&#x27;</span>, <span class="string">&#x27;男&#x27;</span>, <span class="string">&#x27;1999-01-02&#x27;</span>, <span class="string">&#x27;11111111&#x27;</span>, <span class="string">&#x27;88166401&#x27;</span>, <span class="string">&#x27;s1@163.com&#x27;</span>, <span class="string">&#x27;杭州&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> StudentT (sno, sname, sex, birthday, IDcard, phone, email, address)</span><br><span class="line"><span class="keyword">VALUES</span> (<span class="number">2</span>, <span class="string">&#x27;s2&#x27;</span>, <span class="string">&#x27;女&#x27;</span>, <span class="string">&#x27;1999-12-31&#x27;</span>, <span class="string">&#x27;22222222&#x27;</span>, <span class="string">&#x27;88166402&#x27;</span>, <span class="string">&#x27;不知&#x27;</span>, <span class="string">&#x27;不知&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> StudentT (sno, sname, sex, birthday, IDcard, phone, email, address)</span><br><span class="line"><span class="keyword">VALUES</span> (<span class="number">3</span>, <span class="string">&#x27;s3&#x27;</span>, <span class="string">&#x27;默认&#x27;</span>, <span class="string">&#x27;1998-03-04&#x27;</span>, <span class="string">&#x27;33333333&#x27;</span>, <span class="string">&#x27;不知&#x27;</span>, <span class="string">&#x27;s3@163.com&#x27;</span>, <span class="string">&#x27;不知&#x27;</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> StudentT <span class="keyword">ALTER</span> <span class="keyword">COLUMN</span> sex <span class="type">VARCHAR</span>(<span class="number">4</span>);  </span><br><span class="line"></span><br><span class="line"><span class="keyword">EXEC</span> sp_help <span class="string">&#x27;StudentT&#x27;</span>;  </span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">--向表中继续插入数据：</span></span><br><span class="line"><span class="comment">--学号	姓名	性别	生日		身份证号		电话		邮箱		地址</span></span><br><span class="line"><span class="comment">--4	s4	中	2999-1-2		11111111	                不知		不知		不知</span></span><br><span class="line"><span class="comment">--请观察成功插入后的编号值</span></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> StudentT (sno, sname, sex, birthday, IDcard, phone, email, address)</span><br><span class="line"><span class="keyword">VALUES</span> (<span class="number">4</span>, <span class="string">&#x27;s4&#x27;</span>, <span class="string">&#x27;中&#x27;</span>, <span class="string">&#x27;2999-01-02&#x27;</span>, <span class="string">&#x27;11111111&#x27;</span>, <span class="keyword">null</span>, <span class="keyword">null</span>, <span class="keyword">null</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> StudentT;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">--删除4号学生</span></span><br><span class="line"><span class="keyword">DELETE</span> <span class="keyword">FROM</span> StudentT <span class="keyword">WHERE</span> sno <span class="operator">=</span> <span class="number">4</span>;</span><br><span class="line"><span class="comment">--DELETE FROM StudentT WHERE sno = 3;老师上课的代码 </span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">--将2号同学的邮箱改为“s2@163.com”</span></span><br><span class="line"><span class="keyword">UPDATE</span> StudentT </span><br><span class="line"><span class="keyword">SET</span> email <span class="operator">=</span> <span class="string">&#x27;s2@163.com&#x27;</span> </span><br><span class="line"><span class="keyword">WHERE</span> sno <span class="operator">=</span> <span class="number">2</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">--将3号同学的电话改为“88166403”</span></span><br><span class="line"><span class="keyword">UPDATE</span> StudentT </span><br><span class="line"><span class="keyword">SET</span> phone <span class="operator">=</span> <span class="string">&#x27;88166403&#x27;</span> </span><br><span class="line"><span class="keyword">WHERE</span> sno <span class="operator">=</span> <span class="number">3</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="简单查询"><a href="#简单查询" class="headerlink" title="简单查询"></a>简单查询</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">--使用pubs数据库完成下面操作</span></span><br><span class="line"><span class="comment">--检索title表中的所有列</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> titles</span><br><span class="line"><span class="comment">--检索所有书的书的编号、书名、类型、价格</span></span><br><span class="line"><span class="keyword">select</span> title_id,title,type,price</span><br><span class="line"><span class="keyword">from</span>  titles</span><br><span class="line"><span class="comment">--在titles表中检索所有书的编号、单价、打7折后的价格</span></span><br><span class="line"><span class="keyword">SELECT</span> title_id <span class="keyword">as</span> <span class="string">&#x27;标号&#x27;</span>, price <span class="keyword">as</span> <span class="string">&#x27;原价&#x27;</span>, price <span class="operator">*</span> <span class="number">0.7</span> <span class="keyword">AS</span> <span class="string">&#x27;7折后的价格&#x27;</span> <span class="keyword">FROM</span> titles;</span><br><span class="line"><span class="comment">--在authors表中检索所有作者的编号、作者的姓名（firstname与lastname的组合）</span></span><br><span class="line"><span class="keyword">SELECT</span> au_id, CONCAT(au_fname, <span class="string">&#x27; &#x27;</span>, au_lname) <span class="keyword">AS</span> full_name <span class="keyword">FROM</span> authors;</span><br><span class="line"><span class="comment">--查询作者来自哪些州</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">DISTINCT</span> state <span class="keyword">FROM</span> authors;</span><br><span class="line"><span class="comment">--查询作者来自哪些州、哪些城市</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">DISTINCT</span> state, city <span class="keyword">FROM</span> authors;</span><br><span class="line"><span class="comment">--查询前面6本书的所有信息</span></span><br><span class="line"><span class="keyword">SELECT</span> TOP <span class="number">6</span> <span class="operator">*</span> <span class="keyword">FROM</span> titles;</span><br><span class="line"><span class="comment">--查询前10%的书的所有信息</span></span><br><span class="line"><span class="keyword">SELECT</span> TOP <span class="number">10</span> <span class="keyword">PERCENT</span> <span class="operator">*</span> <span class="keyword">FROM</span> titles;</span><br><span class="line"><span class="comment">--查询前面10本书的编号和单价</span></span><br><span class="line"><span class="keyword">SELECT</span> TOP <span class="number">10</span> title_id, price <span class="keyword">FROM</span> titles;</span><br><span class="line"><span class="comment">--查询书的全部信息，按书的类型和价格升序排列</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> titles <span class="keyword">ORDER</span> <span class="keyword">BY</span> type <span class="keyword">ASC</span>, price <span class="keyword">ASC</span>;</span><br><span class="line"><span class="comment">--查询书的全部信息，按书的类型和价格降序排列</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> titles <span class="keyword">ORDER</span> <span class="keyword">BY</span> type <span class="keyword">DESC</span>, price <span class="keyword">DESC</span>;</span><br><span class="line"><span class="comment">--查询单价最高的10本书的信息</span></span><br><span class="line"><span class="keyword">SELECT</span> TOP <span class="number">10</span><span class="operator">*</span> <span class="keyword">FROM</span> titles <span class="keyword">ORDER</span> <span class="keyword">BY</span> price <span class="keyword">DESC</span>;</span><br><span class="line"><span class="comment">--查询单价最高的5本书的信息（显示并列项）</span></span><br><span class="line"><span class="keyword">SELECT</span> TOP <span class="number">5</span> <span class="keyword">WITH</span> TIES <span class="operator">*</span>  <span class="comment">--这个就是显示并列项</span></span><br><span class="line"><span class="keyword">FROM</span> TITLES</span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span> price <span class="keyword">DESC</span></span><br><span class="line"></span><br><span class="line"><span class="comment">--检索编号为’F-C16315M’的员工的编号、姓、名、雇佣日期</span></span><br><span class="line"><span class="keyword">SELECT</span> emp_id, lname, fname, hire_date <span class="keyword">FROM</span> employee <span class="keyword">WHERE</span> emp_id <span class="operator">=</span> <span class="string">&#x27;F-C16315M&#x27;</span>;</span><br><span class="line"><span class="comment">--查询authors表中所有居住在UT州的作者姓名和电话。（作者的姓名由au_fname和au_lname组合成，中间以空格分隔）</span></span><br><span class="line"><span class="keyword">SELECT</span> au_fname<span class="operator">+</span> <span class="string">&#x27; &#x27;</span><span class="operator">+</span> au_lname <span class="keyword">AS</span> <span class="string">&#x27;姓名&#x27;</span>,phone  <span class="keyword">as</span> <span class="string">&#x27;电话&#x27;</span></span><br><span class="line"><span class="keyword">FROM</span> authors </span><br><span class="line"><span class="keyword">WHERE</span> state <span class="operator">=</span> <span class="string">&#x27;UT&#x27;</span>;</span><br><span class="line"><span class="comment">--查询单价小于10的书的所有信息</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> </span><br><span class="line"><span class="keyword">FROM</span> titles </span><br><span class="line"><span class="keyword">WHERE</span> price <span class="operator">&lt;</span> <span class="number">10</span>;</span><br><span class="line"><span class="comment">--查询类型为’business’的书的书名和单价</span></span><br><span class="line"><span class="keyword">SELECT</span> title, price </span><br><span class="line"><span class="keyword">FROM</span> titles </span><br><span class="line"><span class="keyword">WHERE</span> type <span class="operator">=</span> <span class="string">&#x27;business&#x27;</span>;</span><br><span class="line"><span class="comment">--从表 titles 中，查找书名中包含字符串“computer”的书名。</span></span><br><span class="line"><span class="keyword">SELECT</span> title </span><br><span class="line"><span class="keyword">FROM</span> titles </span><br><span class="line"><span class="keyword">WHERE</span> title <span class="keyword">LIKE</span> <span class="string">&#x27;%computer%&#x27;</span>;</span><br><span class="line"><span class="comment">--从表 authors 中，查找au_fname以字符“D”打头的作者的姓、名。</span></span><br><span class="line"><span class="keyword">SELECT</span> au_lname, au_fname </span><br><span class="line"><span class="keyword">FROM</span> authors </span><br><span class="line"><span class="keyword">WHERE</span> au_fname <span class="keyword">LIKE</span> <span class="string">&#x27;D%&#x27;</span>;</span><br><span class="line"><span class="comment">--从表 authors 中，查找au_id类似于”72?-?”格式的作者的编号、姓、名、电话。</span></span><br><span class="line"><span class="keyword">SELECT</span> au_id, au_lname, au_fname, phone </span><br><span class="line"><span class="keyword">FROM</span> authors </span><br><span class="line"><span class="keyword">WHERE</span> au_id <span class="keyword">LIKE</span> <span class="string">&#x27;72_-%&#x27;</span>;</span><br><span class="line"><span class="comment">--从表 authors 中，查找au_id的第2个数字是7的作者的编号、姓、名、电话。</span></span><br><span class="line"><span class="keyword">SELECT</span> au_id, au_lname, au_fname, phone </span><br><span class="line"><span class="keyword">FROM</span> authors </span><br><span class="line"><span class="keyword">WHERE</span> au_id <span class="keyword">LIKE</span> <span class="string">&#x27;_7%&#x27;</span>;</span><br><span class="line"><span class="comment">--从表 authors 中，查找au_id只能是”723-?”、 ”724-?”、 ”725-?”格式 的作者的编号、姓、名、电话。</span></span><br><span class="line"><span class="keyword">SELECT</span> au_id, au_lname, au_fname, phone </span><br><span class="line"><span class="keyword">FROM</span> authors </span><br><span class="line"><span class="keyword">WHERE</span> au_id <span class="keyword">LIKE</span> <span class="string">&#x27;723-%&#x27;</span> <span class="keyword">OR</span> au_id <span class="keyword">LIKE</span> <span class="string">&#x27;724-%&#x27;</span> <span class="keyword">OR</span> au_id <span class="keyword">LIKE</span> <span class="string">&#x27;725-%&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> au_id, au_lname, au_fname, phone </span><br><span class="line"><span class="keyword">FROM</span> authors </span><br><span class="line"><span class="keyword">WHERE</span> au_id <span class="keyword">LIKE</span> <span class="string">&#x27;72[3-5]-%&#x27;</span></span><br><span class="line"><span class="comment">--从表 authors 中，查找au_id的第1个数字是5-9中的一个，第2个数字是1-4中的一个的作者的编号、姓、名、电话。</span></span><br><span class="line"><span class="keyword">SELECT</span> au_id, au_lname, au_fname, phone </span><br><span class="line"><span class="keyword">FROM</span> authors </span><br><span class="line"><span class="keyword">WHERE</span> au_id <span class="keyword">LIKE</span> <span class="string">&#x27;[5-9][1-4]%&#x27;</span>;</span><br><span class="line"><span class="comment">--从表 authors 中，查找au_id的第1个数字不是5-9中的一个，第2个数字不是1-4中的一个的作者的编号、姓、名、电话。</span></span><br><span class="line"><span class="keyword">SELECT</span> au_id, au_lname, au_fname, phone </span><br><span class="line"><span class="keyword">FROM</span> authors </span><br><span class="line"><span class="keyword">WHERE</span> au_id <span class="keyword">NOT</span> <span class="keyword">LIKE</span> <span class="string">&#x27;[5-9][1-4]%&#x27;</span>;</span><br><span class="line"><span class="keyword">SELECT</span> au_id, au_lname, au_fname, phone </span><br><span class="line"><span class="keyword">FROM</span> authors </span><br><span class="line"><span class="keyword">WHERE</span> au_id <span class="keyword">LIKE</span> <span class="string">&#x27;[^5-9][^1-4]%&#x27;</span>;</span><br><span class="line"><span class="comment">--查找书名中含有“computer”，或书的编号以“B”打头的书，且价格低于15的书的信息。</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> </span><br><span class="line"><span class="keyword">FROM</span> titles </span><br><span class="line"><span class="keyword">WHERE</span> (title <span class="keyword">LIKE</span> <span class="string">&#x27;%computer%&#x27;</span> <span class="keyword">OR</span> title_id <span class="keyword">LIKE</span> <span class="string">&#x27;B%&#x27;</span>) </span><br><span class="line">  <span class="keyword">AND</span> price <span class="operator">&lt;</span> <span class="number">15</span>;</span><br><span class="line"><span class="comment">--从titles表中查询单价在15美元到20美元之间的书名和单价</span></span><br><span class="line"><span class="keyword">SELECT</span> title, price </span><br><span class="line"><span class="keyword">FROM</span> titles </span><br><span class="line"><span class="keyword">WHERE</span> price <span class="keyword">BETWEEN</span> <span class="number">15</span> <span class="keyword">AND</span> <span class="number">20</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> title, price </span><br><span class="line"><span class="keyword">FROM</span> titles </span><br><span class="line"><span class="keyword">WHERE</span> price <span class="operator">&gt;=</span><span class="number">15</span> <span class="keyword">and</span> price <span class="operator">&lt;=</span><span class="number">20</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> title, price </span><br><span class="line"><span class="keyword">FROM</span> titles </span><br><span class="line"><span class="keyword">WHERE</span> price <span class="keyword">not</span> <span class="keyword">BETWEEN</span> <span class="number">15</span> <span class="keyword">AND</span> <span class="number">20</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> title, price </span><br><span class="line"><span class="keyword">FROM</span> titles </span><br><span class="line"><span class="keyword">WHERE</span> price <span class="operator">&lt;</span> <span class="number">15</span> <span class="keyword">or</span> price <span class="operator">&gt;</span><span class="number">20</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">--从表 authors 中搜索state位于‘CA’,‘KS’,‘MI’,‘IN’的作者姓名和所在州。</span></span><br><span class="line"><span class="keyword">SELECT</span> CONCAT(au_fname, <span class="string">&#x27; &#x27;</span>, au_lname) <span class="keyword">AS</span> full_name, state </span><br><span class="line"><span class="keyword">FROM</span> authors </span><br><span class="line"><span class="keyword">WHERE</span> state <span class="keyword">IN</span> (<span class="string">&#x27;CA&#x27;</span>, <span class="string">&#x27;KS&#x27;</span>, <span class="string">&#x27;MI&#x27;</span>, <span class="string">&#x27;IN&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> CONCAT(au_fname, <span class="string">&#x27; &#x27;</span>, au_lname) <span class="keyword">AS</span> full_name, state </span><br><span class="line"><span class="keyword">FROM</span> authors </span><br><span class="line"><span class="keyword">WHERE</span> state <span class="operator">=</span><span class="string">&#x27;CA&#x27;</span> <span class="keyword">or</span> state <span class="operator">=</span>  <span class="string">&#x27;KS&#x27;</span><span class="keyword">or</span> state <span class="operator">=</span>  <span class="string">&#x27;MI&#x27;</span><span class="keyword">or</span> state <span class="operator">=</span>  <span class="string">&#x27;IN&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">--查询表 titles 中还没有定价格的书名和价格。</span></span><br><span class="line"><span class="keyword">SELECT</span> title, price </span><br><span class="line"><span class="keyword">FROM</span> titles </span><br><span class="line"><span class="keyword">WHERE</span> price <span class="keyword">IS</span> <span class="keyword">NULL</span>;</span><br><span class="line"></span><br><span class="line">use pubs</span><br><span class="line"></span><br><span class="line">use gradeManager</span><br><span class="line"><span class="comment">--自我练习部分（使用GradeManager数据库完成下面操作）</span></span><br><span class="line"><span class="comment">--（1）查询班级表（Class）的全部内容；</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> </span><br><span class="line"><span class="keyword">FROM</span> Class;</span><br><span class="line"><span class="comment">--（2）在学生表Student中查询学生姓名、所在班级。</span></span><br><span class="line"><span class="keyword">SELECT</span> sname, Clno </span><br><span class="line"><span class="keyword">FROM</span> Student;</span><br><span class="line"><span class="comment">--（3）找出01311班女学生的个人信息；</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> </span><br><span class="line"><span class="keyword">FROM</span> Student </span><br><span class="line"><span class="keyword">WHERE</span> Clno <span class="operator">=</span> <span class="string">&#x27;01311&#x27;</span> <span class="keyword">AND</span> Ssex <span class="operator">=</span> <span class="string">&#x27;女&#x27;</span>;</span><br><span class="line"><span class="comment">--（4）找出所有被学生选修了的课程号；</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">distinct</span> cno</span><br><span class="line"><span class="keyword">from</span> Grade</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">--（5）找出01311班和01312班的学生姓名、性别、出生年份；</span></span><br><span class="line"><span class="keyword">SELECT</span> sname, Ssex,<span class="keyword">year</span>(GETDATE())<span class="operator">-</span>sage <span class="keyword">as</span><span class="string">&#x27;出生年份&#x27;</span>  </span><br><span class="line"><span class="keyword">FROM</span> Student </span><br><span class="line"><span class="keyword">WHERE</span> Clno <span class="keyword">IN</span> (<span class="string">&#x27;01311&#x27;</span>, <span class="string">&#x27;01312&#x27;</span>);</span><br><span class="line"><span class="comment">--（6）找出所有姓李的学生的个人信息。</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span></span><br><span class="line"><span class="keyword">FROM</span> Student</span><br><span class="line"><span class="keyword">WHERE</span> sname <span class="keyword">LIKE</span> <span class="string">&#x27;李%&#x27;</span>;  <span class="comment">-- 使用LIKE语句来查找姓李的学生</span></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="聚合与分组查询"><a href="#聚合与分组查询" class="headerlink" title="聚合与分组查询"></a>聚合与分组查询</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">--使用pubs数据库完成下面操作</span></span><br><span class="line"><span class="comment">--查询titles表中类型是’popular_comp’的书的平均价格</span></span><br><span class="line"><span class="keyword">select</span> <span class="built_in">avg</span>(price) <span class="keyword">as</span> avgprice</span><br><span class="line"><span class="keyword">from</span> titles</span><br><span class="line"><span class="keyword">where</span> type <span class="operator">=</span> <span class="string">&#x27;popular_comp&#x27;</span></span><br><span class="line"><span class="comment">--查询publishers表中供应商的数量</span></span><br><span class="line"><span class="keyword">select</span> <span class="built_in">count</span>(<span class="operator">*</span>) <span class="string">&#x27;供应商的数量&#x27;</span></span><br><span class="line"><span class="keyword">from</span> publishers</span><br><span class="line"><span class="comment">--查询publishers表中供应商所在州的数量</span></span><br><span class="line"><span class="keyword">select</span> <span class="built_in">count</span>(<span class="keyword">distinct</span> state) <span class="keyword">as</span> 供应商所在州的数量</span><br><span class="line"><span class="keyword">from</span> publishers</span><br><span class="line"></span><br><span class="line"><span class="comment">--查询titles表中书的类型有几种</span></span><br><span class="line"><span class="keyword">select</span> <span class="built_in">count</span>(<span class="keyword">distinct</span> type) <span class="keyword">as</span> 书的类型有几种</span><br><span class="line"><span class="keyword">from</span> titles</span><br><span class="line"></span><br><span class="line"><span class="comment">--按书的种类分类，求出各类书籍的数量</span></span><br><span class="line"><span class="keyword">select</span> type,<span class="built_in">count</span>(<span class="operator">*</span>) <span class="keyword">as</span> book_count</span><br><span class="line"><span class="keyword">from</span> titles</span><br><span class="line"><span class="keyword">group</span> <span class="keyword">by</span> type</span><br><span class="line"></span><br><span class="line"><span class="comment">--按书的种类分类，求出3种类型书籍‘business’,‘mod_cook’,‘trad_cook’的价格总和、平均价格以及该类书籍的数量</span></span><br><span class="line"><span class="keyword">select</span> type,</span><br><span class="line"><span class="built_in">sum</span>(price) <span class="keyword">as</span> total_price,</span><br><span class="line"><span class="built_in">avg</span>(price) <span class="keyword">as</span> avg_price,</span><br><span class="line"><span class="built_in">count</span>(<span class="operator">*</span>) <span class="keyword">as</span> book_count</span><br><span class="line"><span class="keyword">from</span> titles</span><br><span class="line"><span class="keyword">where</span> type <span class="keyword">in</span> (<span class="string">&#x27;business&#x27;</span>,<span class="string">&#x27;mod_cook&#x27;</span>,<span class="string">&#x27;trad_cook&#x27;</span>)</span><br><span class="line"><span class="keyword">group</span> <span class="keyword">by</span> type</span><br><span class="line"><span class="keyword">order</span> <span class="keyword">by</span> book_count <span class="keyword">desc</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">--按书的类型分类，查询每个出版商销售的书的</span></span><br><span class="line"><span class="comment">--平均价和总销售额 </span></span><br><span class="line"><span class="keyword">SELECT</span> type,pub_id <span class="keyword">as</span> pubid,<span class="built_in">AVG</span>(price) avgprice,<span class="built_in">SUM</span>(ytd_sales) total</span><br><span class="line"><span class="keyword">from</span> titles</span><br><span class="line"><span class="keyword">group</span> <span class="keyword">by</span> type,pub_id</span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> type,<span class="built_in">count</span>(<span class="keyword">distinct</span> pub_id),<span class="built_in">AVG</span>(price) avgprice,<span class="built_in">SUM</span>(ytd_sales) total</span><br><span class="line"><span class="keyword">from</span> titles</span><br><span class="line"><span class="keyword">group</span> <span class="keyword">by</span> type</span><br><span class="line"><span class="comment">--按书的类型分类，查询平均价大于15的书的类型、平均价</span></span><br><span class="line"><span class="keyword">select</span> type,<span class="built_in">avg</span>(price)<span class="string">&#x27;平均价&#x27;</span></span><br><span class="line"><span class="keyword">from</span> titles</span><br><span class="line"><span class="keyword">group</span> <span class="keyword">by</span> type</span><br><span class="line"><span class="keyword">having</span> <span class="built_in">avg</span>(price) <span class="operator">&gt;</span><span class="number">15</span>;</span><br><span class="line"><span class="comment">--从titles表中，查询得到总销售额（ytd_sales）超过  $40,000 的出版商。</span></span><br><span class="line"><span class="keyword">select</span> pub_id</span><br><span class="line"><span class="keyword">from</span> titles</span><br><span class="line"><span class="keyword">group</span> <span class="keyword">by</span> pub_id</span><br><span class="line"><span class="keyword">having</span> <span class="built_in">sum</span>(ytd_sales)<span class="operator">&gt;</span><span class="number">40000</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">--从titles表中，查询得到至少出版六本书的出版商及其总销售额。</span></span><br><span class="line"><span class="keyword">select</span>  pub_id,</span><br><span class="line"><span class="built_in">COUNT</span>(<span class="operator">*</span>) <span class="keyword">as</span> 书数,</span><br><span class="line"><span class="built_in">SUM</span>(ytd_sales) <span class="keyword">as</span> 总额</span><br><span class="line"><span class="keyword">from</span> titles</span><br><span class="line"><span class="keyword">group</span> <span class="keyword">by</span> pub_id</span><br><span class="line"><span class="keyword">having</span> <span class="built_in">count</span>(<span class="operator">*</span>) <span class="operator">&gt;=</span><span class="number">6</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">--从titles表中，查询标识号大于 0800、支付的总预付款已超过 $15,000 且销售书籍的平均价格小于 $20 的出版商。 </span></span><br><span class="line"><span class="keyword">select</span>  pub_id</span><br><span class="line"><span class="keyword">from</span> titles</span><br><span class="line"><span class="keyword">where</span> title_id <span class="operator">&gt;</span> <span class="string">&#x27;0800&#x27;</span></span><br><span class="line"><span class="keyword">group</span> <span class="keyword">by</span> pub_id</span><br><span class="line"><span class="keyword">having</span> <span class="built_in">sum</span>(advance) <span class="operator">&gt;</span><span class="number">15000</span> <span class="keyword">and</span> <span class="built_in">AVG</span>(price) <span class="operator">&lt;</span><span class="number">20</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">use GradeManager</span><br><span class="line"><span class="comment">--自我练习1（使用GradeManager数据库完成下面操作）</span></span><br><span class="line"><span class="comment">--（1）计算选2号课程的学生平均成绩，保留2位小数</span></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">convert</span>(<span class="type">decimal</span>(<span class="number">5</span>,<span class="number">2</span>),<span class="built_in">AVG</span>(Gmark)) <span class="keyword">as</span> avggrade</span><br><span class="line"><span class="keyword">from</span> Grade</span><br><span class="line"><span class="keyword">where</span> Cno <span class="operator">=</span> <span class="string">&#x27;2&#x27;</span></span><br><span class="line"><span class="comment">--（2）求各课程相应的选课人数，显示课程号和选课人数</span></span><br><span class="line"><span class="keyword">select</span> Cno <span class="keyword">as</span> 课程号 ,<span class="built_in">count</span>(<span class="operator">*</span>) <span class="keyword">as</span> 选课人数</span><br><span class="line"><span class="keyword">from</span> Grade</span><br><span class="line"><span class="keyword">group</span> <span class="keyword">by</span> Cno</span><br><span class="line"></span><br><span class="line"><span class="comment">--（3）计算有人选修的每门课程的平均成绩，显示课程号和平均成绩</span></span><br><span class="line"><span class="keyword">select</span> Cno <span class="keyword">as</span> 课程号,<span class="built_in">AVG</span>(Gmark) <span class="keyword">as</span> avg_grades</span><br><span class="line"><span class="keyword">from</span> Grade</span><br><span class="line"><span class="keyword">group</span> <span class="keyword">by</span> Cno</span><br><span class="line"><span class="comment">--（4）计算参加过考试的每个学生的平均成绩</span></span><br><span class="line"><span class="keyword">select</span> sno <span class="keyword">as</span> 学号,<span class="built_in">AVG</span>(gmark) <span class="keyword">as</span> 平均成绩</span><br><span class="line"><span class="keyword">from</span> Grade</span><br><span class="line"><span class="keyword">where</span> gmark <span class="keyword">is</span> <span class="keyword">not</span> <span class="keyword">null</span></span><br><span class="line"><span class="keyword">group</span> <span class="keyword">by</span> sno</span><br><span class="line"><span class="comment">--（5）求选课人数最多的课程号及选课人数</span></span><br><span class="line"><span class="keyword">select</span>  top <span class="number">1</span> </span><br><span class="line">cno <span class="keyword">as</span> 课程号,</span><br><span class="line"><span class="built_in">COUNT</span>(<span class="operator">*</span>) <span class="keyword">as</span> 选课人数</span><br><span class="line"><span class="keyword">from</span> Grade</span><br><span class="line"><span class="keyword">group</span> <span class="keyword">by</span> cno</span><br><span class="line"><span class="keyword">order</span> <span class="keyword">by</span> 选课人数 <span class="keyword">desc</span></span><br><span class="line"></span><br><span class="line"><span class="comment">--（6）求平均成绩大于86分的学生学号及平均成绩</span></span><br><span class="line"><span class="keyword">select</span> sno <span class="keyword">as</span> 学号,</span><br><span class="line"><span class="built_in">AVG</span>(gmark) <span class="keyword">as</span> 平均成绩</span><br><span class="line"><span class="keyword">from</span> Grade</span><br><span class="line"><span class="keyword">group</span> <span class="keyword">by</span> sno</span><br><span class="line"><span class="keyword">having</span> <span class="built_in">avg</span>(gmark) <span class="operator">&gt;</span> <span class="number">86</span></span><br><span class="line"><span class="comment">--统计过后的判断用having语句而不是where</span></span><br><span class="line"></span><br><span class="line"><span class="comment">--自我练习2</span></span><br><span class="line"><span class="comment">--（1）统计每年每个专业的班级数</span></span><br><span class="line"><span class="keyword">select</span> inyear <span class="keyword">as</span> 年份 ,</span><br><span class="line">speciality <span class="keyword">as</span> 专业,</span><br><span class="line"><span class="built_in">count</span>(<span class="keyword">distinct</span> Clno) <span class="keyword">as</span> 班级数</span><br><span class="line"><span class="keyword">from</span> Class</span><br><span class="line"><span class="keyword">group</span> <span class="keyword">by</span> inyear,speciality</span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> inyear <span class="keyword">as</span> 年份 ,</span><br><span class="line">speciality <span class="keyword">as</span> 专业,</span><br><span class="line"><span class="built_in">count</span>(<span class="operator">*</span>) <span class="keyword">as</span> 班级数</span><br><span class="line"><span class="keyword">from</span> Class</span><br><span class="line"><span class="keyword">group</span> <span class="keyword">by</span> inyear,speciality</span><br><span class="line"></span><br><span class="line"><span class="comment">--（2）统计每年每个专业的班级数及学生人数</span></span><br><span class="line"><span class="keyword">select</span> inyear <span class="keyword">as</span> 年份 ,</span><br><span class="line">speciality <span class="keyword">as</span> 专业,</span><br><span class="line"><span class="built_in">count</span>(<span class="keyword">distinct</span> Clno) <span class="keyword">as</span> 班级数,</span><br><span class="line"><span class="built_in">sum</span>(number) <span class="keyword">as</span> 学生人数</span><br><span class="line"><span class="keyword">from</span> Class</span><br><span class="line"><span class="keyword">group</span> <span class="keyword">by</span> inyear,speciality</span><br><span class="line"></span><br><span class="line"><span class="comment">--（3）统计每个班级19岁以上的男生人数，显示班级号和人数</span></span><br><span class="line"><span class="keyword">select</span> clno <span class="keyword">as</span> 班级号 ,</span><br><span class="line"><span class="built_in">count</span>(<span class="operator">*</span>) <span class="keyword">as</span> 男生人数</span><br><span class="line"><span class="keyword">from</span> Student</span><br><span class="line"><span class="keyword">where</span> Ssex <span class="operator">=</span> <span class="string">&#x27;男&#x27;</span> <span class="keyword">and</span> sage <span class="operator">&gt;</span><span class="number">19</span></span><br><span class="line"><span class="keyword">group</span> <span class="keyword">by</span> Clno</span><br><span class="line"></span><br><span class="line"><span class="comment">--（4）统计每门课程，显示平均分高于85分的课程号及平均分</span></span><br><span class="line"><span class="keyword">select</span> cno <span class="keyword">as</span> 课程号,</span><br><span class="line"><span class="built_in">avg</span>(gmark) <span class="keyword">as</span> 平均分</span><br><span class="line"><span class="keyword">from</span> Grade</span><br><span class="line"><span class="keyword">group</span> <span class="keyword">by</span> cno</span><br><span class="line"><span class="keyword">having</span> <span class="built_in">avg</span> (gmark)<span class="operator">&gt;</span> <span class="number">85</span></span><br><span class="line"></span><br><span class="line"><span class="comment">--（5）显示没有一门功课不及格的学生的学号</span></span><br><span class="line"><span class="keyword">select</span> sno <span class="keyword">as</span> 学号</span><br><span class="line"><span class="keyword">from</span> Grade</span><br><span class="line"><span class="keyword">group</span> <span class="keyword">by</span> sno</span><br><span class="line"><span class="keyword">having</span> <span class="built_in">min</span>(gmark) <span class="operator">&gt;=</span><span class="number">60</span></span><br><span class="line"><span class="comment">--（6）统计选课人数低于3人且平均分低于80分的课程号</span></span><br><span class="line"><span class="keyword">select</span> cno <span class="keyword">as</span> 课程号</span><br><span class="line"><span class="keyword">from</span> Grade</span><br><span class="line"><span class="keyword">group</span> <span class="keyword">by</span> cno</span><br><span class="line"><span class="keyword">having</span> <span class="built_in">count</span>(<span class="operator">*</span>) <span class="operator">&lt;</span> <span class="number">3</span> <span class="keyword">and</span> <span class="built_in">AVG</span>(Gmark) <span class="operator">&lt;</span> <span class="number">80</span></span><br><span class="line"></span><br><span class="line"><span class="comment">--（7）统计80分（含）以上成绩最多的学生学号</span></span><br><span class="line"><span class="keyword">select</span> top <span class="number">1</span> sno <span class="keyword">as</span>  学号,</span><br><span class="line"><span class="built_in">count</span>(<span class="operator">*</span>) <span class="keyword">as</span> 成绩数量</span><br><span class="line"><span class="keyword">from</span> Grade</span><br><span class="line"><span class="keyword">where</span> gmark <span class="operator">&gt;=</span> <span class="number">80</span></span><br><span class="line"><span class="keyword">group</span> <span class="keyword">by</span> sno</span><br><span class="line"><span class="keyword">order</span> <span class="keyword">by</span> 成绩数量 <span class="keyword">desc</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">--（8）显示”李勇”同学所选课程的课程号和成绩</span></span><br><span class="line"><span class="keyword">select</span> cno <span class="keyword">as</span> 课程号,</span><br><span class="line">gmark <span class="keyword">as</span> 成绩</span><br><span class="line"><span class="keyword">from</span> grade</span><br><span class="line"><span class="keyword">where</span> sno <span class="operator">=</span> (<span class="keyword">select</span> sno <span class="keyword">from</span> Student <span class="keyword">where</span> Sname <span class="operator">=</span> <span class="string">&#x27;李勇&#x27;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> cno <span class="keyword">as</span> 课程号,</span><br><span class="line">gmark <span class="keyword">as</span> 成绩</span><br><span class="line"><span class="keyword">from</span> grade <span class="keyword">join</span> student <span class="keyword">on</span> grade.Sno<span class="operator">=</span>student.Sno</span><br><span class="line"><span class="keyword">where</span> sname <span class="operator">=</span> <span class="string">&#x27;李勇&#x27;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="连接查询"><a href="#连接查询" class="headerlink" title="连接查询"></a>连接查询</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">--使用GradeManager数据库完成下面操作</span></span><br><span class="line"><span class="comment">--（1）查询学生“李勇”选修的课程号</span></span><br><span class="line"><span class="keyword">select</span> cno</span><br><span class="line"><span class="keyword">from</span> grade g <span class="keyword">join</span> student s <span class="keyword">on</span> g.Sno <span class="operator">=</span> s.sno</span><br><span class="line"><span class="keyword">where</span> sname <span class="operator">=</span> <span class="string">&#x27;李勇&#x27;</span></span><br><span class="line"><span class="comment">--（2）查询学生“李勇”选修课程的平均分</span></span><br><span class="line"><span class="keyword">select</span> <span class="built_in">avg</span>(gmark)<span class="string">&#x27;平均分&#x27;</span></span><br><span class="line"><span class="keyword">from</span> grade g <span class="keyword">join</span> Student s <span class="keyword">on</span> s.Sno <span class="operator">=</span> g.Sno</span><br><span class="line"><span class="keyword">where</span> sname <span class="operator">=</span> <span class="string">&#x27;李勇&#x27;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">--（3）查询成绩大于80分的学生的姓名</span></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">distinct</span> sname</span><br><span class="line"><span class="keyword">from</span> student s <span class="keyword">join</span> grade g <span class="keyword">on</span> s.sno <span class="operator">=</span> g.sno</span><br><span class="line"><span class="keyword">where</span> Gmark<span class="operator">&gt;</span><span class="number">80</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">--（4）查询没有一门考试科目成绩低于70分的学生的姓名</span></span><br><span class="line"><span class="keyword">select</span> sname </span><br><span class="line"><span class="keyword">from</span> student s <span class="keyword">join</span> grade g <span class="keyword">on</span> s.sno<span class="operator">=</span>g.Sno</span><br><span class="line"><span class="keyword">group</span> <span class="keyword">by</span> s.sno,sname</span><br><span class="line"><span class="keyword">having</span> <span class="built_in">min</span>(gmark)<span class="operator">&gt;=</span><span class="number">70</span></span><br><span class="line"><span class="comment">--（5）查询选了课的每位同学的总学分，显示学号和总学分</span></span><br><span class="line"><span class="keyword">select</span> sno,<span class="built_in">sum</span>(credit)<span class="string">&#x27;总学分&#x27;</span></span><br><span class="line"><span class="keyword">from</span> Course c <span class="keyword">join</span> Grade g <span class="keyword">on</span> c.cno<span class="operator">=</span>g.cno</span><br><span class="line"><span class="keyword">group</span> <span class="keyword">by</span> Sno</span><br><span class="line"><span class="comment">--（6）查询选课人数最多的课程号、课程名</span></span><br><span class="line"><span class="keyword">select</span> top <span class="number">1</span>  c.cno ,c.cname</span><br><span class="line"><span class="keyword">from</span> grade g</span><br><span class="line"><span class="keyword">join</span> Course c <span class="keyword">on</span> g.Cno <span class="operator">=</span> c.Cno</span><br><span class="line"><span class="keyword">group</span> <span class="keyword">by</span> c.cno,c.Cname</span><br><span class="line"><span class="keyword">order</span> <span class="keyword">by</span> <span class="built_in">count</span>(g.cno) <span class="keyword">desc</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">--（7）查询选课人数超过2人且平均分高于75分的课程号、课程名</span></span><br><span class="line"><span class="keyword">select</span> c.cno,cname</span><br><span class="line"><span class="keyword">from</span> grade g <span class="keyword">join</span> course c <span class="keyword">on</span> c.Cno <span class="operator">=</span> g.cno</span><br><span class="line"><span class="keyword">group</span> <span class="keyword">by</span> c.Cno,</span><br><span class="line">Cname</span><br><span class="line"><span class="keyword">having</span> <span class="built_in">COUNT</span>(<span class="operator">*</span>) <span class="operator">&gt;</span> <span class="number">2</span> <span class="keyword">and</span> <span class="built_in">AVG</span>(Gmark) <span class="operator">&gt;</span><span class="number">75</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">--（8）查询所有学生的选课号和成绩。</span></span><br><span class="line"><span class="keyword">select</span> cno,gmark</span><br><span class="line"><span class="keyword">from</span> grade g <span class="keyword">right</span> <span class="keyword">join</span> Student s <span class="keyword">on</span> g.sno <span class="operator">=</span> s.sno</span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> </span><br><span class="line">    g.Sno, </span><br><span class="line">    g.Cno, </span><br><span class="line">    g.Gmark</span><br><span class="line"><span class="keyword">FROM</span> </span><br><span class="line">    Grade g;</span><br><span class="line"></span><br><span class="line"><span class="comment">--(子)查询选修了数据库和离散数学课程的同学信息，显示学生学号、姓名。</span></span><br><span class="line"><span class="keyword">select</span> g1.sno</span><br><span class="line"><span class="keyword">from</span> Grade g1</span><br><span class="line"><span class="keyword">join</span> Course c1 <span class="keyword">on</span> g1.Cno <span class="operator">=</span> c1.Cno</span><br><span class="line"><span class="keyword">join</span> grade g2 <span class="keyword">on</span> g1.sno <span class="operator">=</span> g2.Sno</span><br><span class="line"><span class="keyword">join</span> Course c2 <span class="keyword">on</span> g2.Cno <span class="operator">=</span> c2.Cno</span><br><span class="line"><span class="keyword">where</span> c1.Cname <span class="operator">=</span> <span class="string">&#x27;数据库&#x27;</span></span><br><span class="line"><span class="keyword">and</span> c2.Cname <span class="operator">=</span> <span class="string">&#x27;离散数学&#x27;</span></span><br><span class="line"><span class="keyword">group</span> <span class="keyword">by</span> g1.Sno</span><br><span class="line"><span class="keyword">having</span> </span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span></span><br><span class="line">(<span class="keyword">select</span> top <span class="number">2</span> s.sno,sname,cname,gmark</span><br><span class="line"><span class="keyword">from</span> grade g <span class="keyword">join</span> student s <span class="keyword">on</span> s.sno <span class="operator">=</span> g.Sno</span><br><span class="line"><span class="keyword">join</span> course c <span class="keyword">on</span> c.cno <span class="operator">=</span> g.cno</span><br><span class="line"><span class="keyword">where</span> cname <span class="operator">=</span> <span class="string">&#x27;数据库&#x27;</span></span><br><span class="line"><span class="keyword">order</span> <span class="keyword">by</span> gmark <span class="keyword">desc</span>) <span class="keyword">as</span> t</span><br><span class="line"><span class="keyword">union</span> <span class="keyword">all</span></span><br><span class="line"><span class="keyword">select</span> top <span class="number">2</span> s.sno,sname,cname,gmark</span><br><span class="line"><span class="keyword">from</span> grade g <span class="keyword">join</span> student s <span class="keyword">on</span> s.sno <span class="operator">=</span> g.Sno</span><br><span class="line"><span class="keyword">join</span> course c <span class="keyword">on</span> c.cno <span class="operator">=</span> g.cno</span><br><span class="line"><span class="keyword">where</span> cname <span class="operator">=</span> <span class="string">&#x27;离散数学&#x27;</span></span><br><span class="line"><span class="keyword">order</span> <span class="keyword">by</span> gmark <span class="keyword">desc</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> s.sno,sname</span><br><span class="line"><span class="keyword">from</span> student s <span class="keyword">join</span> grade g <span class="keyword">on</span> s.sno <span class="operator">=</span> g.sno</span><br><span class="line"><span class="keyword">join</span> course c <span class="keyword">on</span> c.cno <span class="operator">=</span> g.cno</span><br><span class="line"><span class="keyword">where</span> cname <span class="operator">=</span> <span class="string">&#x27;数据库&#x27;</span> <span class="keyword">or</span> cname <span class="operator">=</span> <span class="string">&#x27;离散数学&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> s.sno,sname</span><br><span class="line"><span class="keyword">from</span> student s <span class="keyword">join</span> grade g <span class="keyword">on</span> s.sno <span class="operator">=</span> g.sno</span><br><span class="line"><span class="keyword">join</span> course c <span class="keyword">on</span> c.cno <span class="operator">=</span> g.cno</span><br><span class="line"><span class="keyword">where</span> cname <span class="operator">=</span> <span class="string">&#x27;数据库&#x27;</span> <span class="keyword">or</span> cname <span class="operator">=</span> <span class="string">&#x27;离散数学&#x27;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> s.sno,sname</span><br><span class="line"><span class="keyword">from</span> student s <span class="keyword">join</span> grade g <span class="keyword">on</span> s.sno <span class="operator">=</span> g.sno</span><br><span class="line"><span class="keyword">join</span> course c <span class="keyword">on</span> c.cno <span class="operator">=</span> g.cno</span><br><span class="line"><span class="keyword">where</span> cname <span class="operator">=</span> <span class="string">&#x27;数据库&#x27;</span>  <span class="keyword">and</span> s.sno <span class="keyword">in</span> </span><br><span class="line">(<span class="keyword">select</span> sno</span><br><span class="line"><span class="keyword">from</span>  grade g <span class="keyword">join</span> course c <span class="keyword">on</span> c.cno <span class="operator">=</span> g.Cno</span><br><span class="line"><span class="keyword">where</span>  cname <span class="operator">=</span> <span class="string">&#x27;离散数学&#x27;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">--自我练习</span></span><br><span class="line"><span class="comment">--（1）查看全部选课信息，显示学生姓名、课程名、成绩</span></span><br><span class="line"><span class="keyword">select</span> sname,cname,gmark</span><br><span class="line"><span class="keyword">from</span> student s <span class="keyword">join</span> grade g <span class="keyword">on</span> s.sno <span class="operator">=</span> g.Sno</span><br><span class="line"><span class="keyword">join</span> course c <span class="keyword">on</span> c.cno<span class="operator">=</span>g.Cno</span><br><span class="line"><span class="comment">--（2）查看所有学生的选课情况，显示学生姓名、课程名、成绩</span></span><br><span class="line"><span class="keyword">select</span> s.sname,</span><br><span class="line">c.cname,</span><br><span class="line">g.gmark</span><br><span class="line"><span class="keyword">from</span> grade g</span><br><span class="line"><span class="keyword">join</span> Student s <span class="keyword">on</span> g.Sno <span class="operator">=</span> s.Sno</span><br><span class="line"><span class="keyword">join</span> Course c <span class="keyword">on</span> g.Cno <span class="operator">=</span> c.Cno</span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> s.sname,</span><br><span class="line">c.cname,</span><br><span class="line">g.gmark</span><br><span class="line"><span class="keyword">from</span> student s <span class="keyword">left</span> <span class="keyword">join</span> grade g <span class="keyword">on</span> s.sno<span class="operator">=</span>g.sno</span><br><span class="line"><span class="keyword">left</span> <span class="keyword">join</span> course c <span class="keyword">on</span> c.Cno <span class="operator">=</span> g.Cno</span><br><span class="line"><span class="comment">--（3）查看所有课程的选课人数，显示课程名、选课人数</span></span><br><span class="line"><span class="keyword">SELECT</span> c.Cname <span class="keyword">AS</span> 课程名, <span class="built_in">COUNT</span>(g.Sno) <span class="keyword">AS</span> 选课人数</span><br><span class="line"><span class="keyword">FROM</span> Course c</span><br><span class="line"><span class="keyword">LEFT</span> <span class="keyword">JOIN</span> Grade g <span class="keyword">ON</span> c.Cno <span class="operator">=</span> g.Cno</span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> c.Cname;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> c.cname <span class="keyword">as</span> 课程名,</span><br><span class="line"><span class="built_in">count</span>(g.sno) <span class="keyword">as</span> 选课人数</span><br><span class="line"><span class="keyword">from</span> Course c</span><br><span class="line"><span class="keyword">left</span> <span class="keyword">join</span> Grade g <span class="keyword">on</span> c.cno <span class="operator">=</span> g.cno</span><br><span class="line"><span class="keyword">group</span> <span class="keyword">by</span> c.Cname</span><br><span class="line"></span><br><span class="line"><span class="comment">--（4）查看所有学生的选课总学分，显示学生姓名、总学分</span></span><br><span class="line"><span class="keyword">select</span> sname <span class="keyword">as</span> 学生姓名,</span><br><span class="line">isnull(<span class="built_in">SUM</span>(c.Credit), <span class="number">0</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> Course c</span><br><span class="line"><span class="keyword">join</span> grade g <span class="keyword">on</span> c.cno <span class="operator">=</span> g.Cno</span><br><span class="line"><span class="keyword">right</span> <span class="keyword">join</span> Student s  <span class="keyword">on</span> s.Sno <span class="operator">=</span> g.Sno</span><br><span class="line"><span class="keyword">group</span> <span class="keyword">by</span> s.sno,sname</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="子查询和高级数据操作"><a href="#子查询和高级数据操作" class="headerlink" title="子查询和高级数据操作"></a>子查询和高级数据操作</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">--使用GradeManger数据库完成下面操作</span></span><br><span class="line"><span class="comment">--（1）查询李勇的成绩</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> gmark</span><br><span class="line"><span class="keyword">from</span> grade</span><br><span class="line"><span class="keyword">where</span> sno <span class="operator">=</span>(</span><br><span class="line"><span class="keyword">select</span> sno</span><br><span class="line"><span class="keyword">from</span> student</span><br><span class="line"><span class="keyword">where</span> sname <span class="operator">=</span> <span class="string">&#x27;李勇&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">--（2）查询参加了两次考试以上的学生姓名</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> sname <span class="keyword">from</span> Student <span class="keyword">where</span> sno <span class="keyword">in</span> (</span><br><span class="line"><span class="keyword">select</span> Sno</span><br><span class="line"><span class="keyword">from</span> grade</span><br><span class="line"><span class="keyword">group</span> <span class="keyword">by</span> sno</span><br><span class="line"><span class="keyword">having</span> <span class="built_in">count</span>(Gmark) <span class="operator">&gt;=</span> <span class="number">2</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">--（3）查询没有参加任何一门考试的学生姓名</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> sname <span class="keyword">from</span> Student <span class="keyword">where</span> sno <span class="keyword">not</span> <span class="keyword">in</span> (</span><br><span class="line"><span class="keyword">select</span> Sno</span><br><span class="line"><span class="keyword">from</span> grade</span><br><span class="line"><span class="keyword">group</span> <span class="keyword">by</span> sno</span><br><span class="line"><span class="keyword">having</span> <span class="built_in">count</span>(Gmark) <span class="keyword">is</span> <span class="keyword">not</span> <span class="keyword">null</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> sname <span class="keyword">from</span> Student <span class="keyword">where</span> sno <span class="keyword">not</span> <span class="keyword">in</span> (</span><br><span class="line"><span class="keyword">select</span> Sno</span><br><span class="line"><span class="keyword">from</span> grade</span><br><span class="line"><span class="keyword">group</span> <span class="keyword">by</span> sno</span><br><span class="line"><span class="keyword">having</span> <span class="built_in">count</span>(Gmark) <span class="operator">!=</span> <span class="number">0</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="comment">--（4）查询王一鸣高于其所有课程平均分的那些课程的课程名和成绩</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> cno,gmark</span><br><span class="line"><span class="keyword">from</span> grade</span><br><span class="line"><span class="keyword">where</span> sno <span class="operator">=</span>(</span><br><span class="line"><span class="keyword">select</span> sno <span class="keyword">from</span> student <span class="keyword">where</span> sname <span class="operator">=</span> <span class="string">&#x27;王一鸣&#x27;</span>)</span><br><span class="line"><span class="keyword">and</span> Gmark <span class="operator">&gt;</span></span><br><span class="line">(<span class="keyword">select</span> <span class="built_in">AVG</span>(gmark)</span><br><span class="line"><span class="keyword">from</span> grade</span><br><span class="line"><span class="keyword">where</span> sno <span class="operator">=</span>(</span><br><span class="line"><span class="keyword">select</span> sno <span class="keyword">from</span> student <span class="keyword">where</span> sname <span class="operator">=</span> <span class="string">&#x27;王一鸣&#x27;</span>))</span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> cname,gmark</span><br><span class="line"><span class="keyword">from</span> course c <span class="keyword">join</span></span><br><span class="line">(<span class="keyword">select</span> cno,gmark</span><br><span class="line"><span class="keyword">from</span> grade</span><br><span class="line"><span class="keyword">where</span> sno<span class="operator">=</span>(<span class="keyword">select</span> sno <span class="keyword">from</span> student <span class="keyword">where</span> sname<span class="operator">=</span><span class="string">&#x27;王一鸣&#x27;</span>)</span><br><span class="line"><span class="keyword">and</span> gmark<span class="operator">&gt;</span></span><br><span class="line">(<span class="keyword">select</span> <span class="built_in">avg</span>(gmark)</span><br><span class="line"><span class="keyword">from</span> grade</span><br><span class="line"><span class="keyword">where</span> sno<span class="operator">=</span>(<span class="keyword">select</span> sno <span class="keyword">from</span> student <span class="keyword">where</span> sname<span class="operator">=</span><span class="string">&#x27;王一鸣&#x27;</span>))) <span class="keyword">as</span> t</span><br><span class="line"><span class="keyword">on</span> c.cno<span class="operator">=</span>t.cno</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">--（5）查询王一鸣高于其所选课程平均分的那些课程的课程名和成绩</span></span><br><span class="line"><span class="keyword">select</span> cname,gmark</span><br><span class="line"><span class="keyword">from</span> course c <span class="keyword">join</span> </span><br><span class="line">(<span class="keyword">select</span> cno,gmark</span><br><span class="line"><span class="keyword">from</span> Grade g1</span><br><span class="line"><span class="keyword">where</span> sno <span class="operator">=</span>  (<span class="keyword">select</span> sno <span class="keyword">from</span> student <span class="keyword">where</span> sname <span class="operator">=</span> <span class="string">&#x27;王一鸣&#x27;</span>)</span><br><span class="line"><span class="keyword">and</span> gmark <span class="operator">&gt;</span></span><br><span class="line">(<span class="keyword">select</span> <span class="built_in">avg</span>(gmark)</span><br><span class="line"><span class="keyword">from</span> grade g2</span><br><span class="line"><span class="keyword">where</span> g2.cno <span class="operator">=</span> g1.cno )) <span class="keyword">as</span> t </span><br><span class="line"><span class="keyword">on</span> c.cno <span class="operator">=</span> t.cno</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">--数据高级操作练习</span></span><br><span class="line"><span class="comment">--（1）将李勇的数据库课程的成绩上调5分。</span></span><br><span class="line"><span class="keyword">update</span> grade</span><br><span class="line"><span class="keyword">set</span> gmark <span class="operator">=</span>  gmark <span class="operator">+</span><span class="number">5</span></span><br><span class="line"><span class="keyword">where</span> sno <span class="operator">=</span> </span><br><span class="line">(<span class="keyword">select</span> sno <span class="keyword">from</span> student <span class="keyword">where</span> sname <span class="operator">=</span> <span class="string">&#x27;李勇&#x27;</span>)</span><br><span class="line"><span class="keyword">and</span> cno <span class="operator">=</span> (<span class="keyword">select</span> cno <span class="keyword">from</span> course <span class="keyword">where</span> cname <span class="operator">=</span> <span class="string">&#x27;数据库&#x27;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">--（2）将没有一门考试不及格的学生的各门课成绩上调5分。</span></span><br><span class="line"><span class="keyword">update</span> grade</span><br><span class="line"><span class="keyword">set</span> gmark <span class="operator">=</span>  gmark <span class="operator">+</span><span class="number">0</span></span><br><span class="line"><span class="keyword">where</span> sno <span class="keyword">in</span></span><br><span class="line">(<span class="keyword">select</span> sno <span class="keyword">from</span> grade  <span class="keyword">group</span> <span class="keyword">by</span> sno <span class="keyword">having</span> <span class="built_in">min</span>(gmark) <span class="operator">&gt;=</span><span class="number">60</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">--（3）将01311班的班长更改为贾向东</span></span><br><span class="line"><span class="keyword">update</span> class</span><br><span class="line"><span class="keyword">set</span> monitor <span class="operator">=</span> (</span><br><span class="line"><span class="keyword">select</span> sno <span class="keyword">from</span> Student <span class="keyword">where</span> sname <span class="operator">=</span> <span class="string">&#x27;贾向东&#x27;</span>)</span><br><span class="line"><span class="keyword">where</span> clno <span class="operator">=</span> <span class="number">01311</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> <span class="built_in">avg</span>(price) <span class="keyword">from</span> titles </span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> price,price<span class="operator">-</span>(<span class="keyword">select</span> <span class="built_in">avg</span>(price) <span class="keyword">from</span> titles )</span><br><span class="line"><span class="keyword">from</span> titles</span><br><span class="line"><span class="keyword">where</span> title_id <span class="operator">=</span> <span class="string">&#x27;BU1111&#x27;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">distinct</span> title</span><br><span class="line"><span class="keyword">from</span> titles t <span class="keyword">join</span> sales s <span class="keyword">on</span> t.title_id <span class="operator">=</span> s.title_id</span><br><span class="line"><span class="keyword">where</span> <span class="keyword">year</span>(ord_date) <span class="operator">=</span> <span class="number">1993</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> title <span class="keyword">from</span> titles <span class="keyword">where</span> title_id <span class="keyword">in</span>(</span><br><span class="line"><span class="keyword">select</span> <span class="keyword">distinct</span> title_id</span><br><span class="line"><span class="keyword">from</span> sales</span><br><span class="line"><span class="keyword">where</span> <span class="keyword">year</span>(ord_date) <span class="operator">=</span> <span class="number">1993</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="视图和存储过程"><a href="#视图和存储过程" class="headerlink" title="视图和存储过程"></a>视图和存储过程</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">--视图练习</span></span><br><span class="line"><span class="comment">--使用GradeManger数据库，完成下面操作</span></span><br><span class="line"><span class="comment">--（1）建立00312班选了数据库课程并且成绩不及格的学生信息视图Stu_cs(包括学生学号、姓名、性别、成绩)</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">view</span> Stu_cs <span class="keyword">as</span></span><br><span class="line"><span class="keyword">select</span> s.sno <span class="keyword">as</span> 学号,</span><br><span class="line">s.sname <span class="keyword">as</span> 姓名,</span><br><span class="line">s.ssex <span class="keyword">as</span> 性别,</span><br><span class="line">g.gmark <span class="keyword">as</span> 成绩</span><br><span class="line"><span class="keyword">from</span> Student s <span class="keyword">join</span> Grade G <span class="keyword">on</span> S.sno <span class="operator">=</span> g.sno</span><br><span class="line"><span class="keyword">join</span> course c <span class="keyword">on</span> g.cno <span class="operator">=</span> c.Cno</span><br><span class="line"><span class="keyword">where</span> s.clno <span class="operator">=</span> <span class="string">&#x27;00312&#x27;</span></span><br><span class="line"><span class="keyword">and</span> c.cname <span class="operator">=</span> <span class="string">&#x27;数据库&#x27;</span></span><br><span class="line"><span class="keyword">and</span> g.gmark <span class="operator">&lt;</span> <span class="number">60</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">exec</span> sp_help <span class="string">&#x27;Stu_cs&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">--（2）查询00312班选了数据库课程并且成绩不及格的学生的学号、姓名</span></span><br><span class="line"><span class="keyword">select</span> s.sno <span class="keyword">as</span> 学号,</span><br><span class="line">s.sname <span class="keyword">as</span> 姓名</span><br><span class="line"><span class="keyword">from</span> Student s</span><br><span class="line"><span class="keyword">join</span> grade g <span class="keyword">on</span> s.sno <span class="operator">=</span> g.sno</span><br><span class="line"><span class="keyword">join</span> course c <span class="keyword">on</span> G.cno <span class="operator">=</span> c.cno</span><br><span class="line"><span class="keyword">where</span> s.clno <span class="operator">=</span> <span class="string">&#x27;00312&#x27;</span></span><br><span class="line"><span class="keyword">and</span> c.cname <span class="operator">=</span> <span class="string">&#x27;数据库&#x27;</span></span><br><span class="line"><span class="keyword">and</span> g.gmark <span class="operator">&lt;</span><span class="number">60</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> 学号,姓名 <span class="keyword">from</span> Stu_cs</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">--查00312班，学生学号和选课数</span></span><br><span class="line"><span class="keyword">create</span> proc up_XK</span><br><span class="line"><span class="variable">@clno</span> <span class="type">char</span>(<span class="number">5</span>)</span><br><span class="line"><span class="keyword">as</span></span><br><span class="line"><span class="keyword">select</span> s.sno,<span class="built_in">count</span>(cno)选课数</span><br><span class="line"><span class="keyword">from</span> grade g <span class="keyword">join</span> student s <span class="keyword">on</span> g.sno<span class="operator">=</span>s.sno</span><br><span class="line"><span class="keyword">where</span> clno<span class="operator">=</span><span class="variable">@clno</span></span><br><span class="line"><span class="keyword">group</span> <span class="keyword">by</span> s.sno</span><br><span class="line"></span><br><span class="line"><span class="keyword">exec</span> up_XK <span class="string">&#x27;01311&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">--（3）创建视图vw_XK，查看所有学生的选课数，显示学生学号、姓名和选课数</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">view</span> vw_XK <span class="keyword">as</span></span><br><span class="line"><span class="keyword">select</span> s.sno <span class="keyword">as</span> 学号,</span><br><span class="line">s.sname <span class="keyword">as</span> 姓名,</span><br><span class="line"><span class="built_in">count</span>(G.cno) <span class="keyword">as</span> 选课数</span><br><span class="line"><span class="keyword">from</span> Student S</span><br><span class="line"><span class="keyword">left</span> <span class="keyword">join</span> Grade G <span class="keyword">on</span> s.sno <span class="operator">=</span> g.sno</span><br><span class="line"><span class="keyword">group</span> <span class="keyword">by</span> s.sno, s.sname</span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> vw_XK</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">--（4）创建视图vw_01311，查询01311班的学生信息</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">view</span> vw_01311 <span class="keyword">as</span> </span><br><span class="line"><span class="keyword">select</span> s.sno <span class="keyword">as</span> 学号,</span><br><span class="line">s.sname <span class="keyword">as</span> 姓名,</span><br><span class="line">s.ssex <span class="keyword">as</span> 性别,</span><br><span class="line">s.sage <span class="keyword">as</span> 年龄,</span><br><span class="line">s.Clno <span class="keyword">as</span> 班级号</span><br><span class="line"><span class="keyword">from</span> student s</span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> vw_01311 <span class="keyword">where</span> 班级号 <span class="operator">=</span> <span class="string">&#x27;01311&#x27;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> Stu_cs</span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> vw_XK</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">--存储过程练习</span></span><br><span class="line"><span class="comment">--（1）根据学号，得到该学号的选课情况，包括课程名和成绩 </span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">PROCEDURE</span> GetCourseInfoBySno</span><br><span class="line">    <span class="variable">@student_id</span> <span class="type">VARCHAR</span>(<span class="number">20</span>)</span><br><span class="line"><span class="keyword">AS</span></span><br><span class="line"><span class="keyword">BEGIN</span></span><br><span class="line">    <span class="keyword">SELECT</span> C.Cname, G.Gmark</span><br><span class="line">    <span class="keyword">FROM</span> Grade G</span><br><span class="line">    <span class="keyword">JOIN</span> Course C <span class="keyword">ON</span> G.Cno <span class="operator">=</span> C.Cno</span><br><span class="line">    <span class="keyword">WHERE</span> G.Sno <span class="operator">=</span> <span class="variable">@student_id</span>;</span><br><span class="line"><span class="keyword">END</span>;</span><br><span class="line">GO</span><br><span class="line"></span><br><span class="line"><span class="keyword">create</span> proc up_xkBySno</span><br><span class="line"><span class="variable">@sno</span> <span class="type">char</span>(<span class="number">7</span>)</span><br><span class="line"><span class="keyword">as</span></span><br><span class="line"><span class="keyword">select</span> cname,gmark</span><br><span class="line"><span class="keyword">from</span> course c <span class="keyword">join</span> grade g <span class="keyword">on</span> c.cno <span class="operator">=</span> g.cno</span><br><span class="line"><span class="keyword">where</span> sno<span class="operator">=</span><span class="variable">@sno</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">exec</span> up_xkBySno <span class="string">&#x27;2000101&#x27;</span></span><br><span class="line"><span class="comment">--（2）根据学号、课程号，得到该学生该课程的成绩</span></span><br><span class="line"><span class="keyword">create</span> proc up_CJbYNo</span><br><span class="line"><span class="variable">@sno</span> <span class="type">char</span>(<span class="number">7</span>),</span><br><span class="line"><span class="variable">@cno</span> <span class="type">char</span>(<span class="number">1</span>)</span><br><span class="line"><span class="keyword">as</span></span><br><span class="line"><span class="keyword">select</span> gmark <span class="keyword">from</span> grade</span><br><span class="line"><span class="keyword">where</span> sno <span class="operator">=</span> <span class="variable">@sno</span></span><br><span class="line"><span class="keyword">and</span> cno <span class="operator">=</span> <span class="variable">@cno</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">exec</span> up_CJbYNo <span class="string">&#x27;2000101&#x27;</span>,<span class="string">&#x27;1&#x27;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">--（3）根据班级号，查询该系每位学生总学分，显示学号、姓名、总学分</span></span><br><span class="line"><span class="keyword">create</span> proc up_SumXF</span><br><span class="line"><span class="variable">@clno</span> <span class="type">char</span>(<span class="number">5</span>)</span><br><span class="line"><span class="keyword">as</span></span><br><span class="line"><span class="keyword">select</span> s.sno,sname,<span class="built_in">sum</span>(Credit) 总学分</span><br><span class="line"><span class="keyword">from</span> Student  s  </span><br><span class="line"><span class="keyword">join</span> grade g <span class="keyword">on</span> s.sno <span class="operator">=</span> g.cno</span><br><span class="line"><span class="keyword">join</span> Course c  <span class="keyword">on</span> c.cno <span class="operator">=</span> g.Cno</span><br><span class="line"><span class="keyword">where</span> clno <span class="operator">=</span> <span class="variable">@clno</span></span><br><span class="line"><span class="keyword">group</span> <span class="keyword">by</span> s.Sno,Sname</span><br><span class="line"></span><br><span class="line"><span class="keyword">exec</span> up_SumXF <span class="string">&#x27;01311&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">--（4）根据学生学号、课程号，修改该生该课程成绩为新的成绩</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">create</span> proc up_Updatecj</span><br><span class="line"><span class="variable">@sno</span> <span class="type">char</span>(<span class="number">7</span>),<span class="variable">@cno</span> <span class="type">char</span>(<span class="number">1</span>),<span class="variable">@newgmark</span> <span class="type">decimal</span>(<span class="number">4</span>,<span class="number">1</span>)</span><br><span class="line"><span class="keyword">as</span></span><br><span class="line"><span class="keyword">update</span> grade</span><br><span class="line"><span class="keyword">set</span> gmark<span class="operator">=</span><span class="variable">@newgmark</span></span><br><span class="line"><span class="keyword">where</span> sno<span class="operator">=</span><span class="variable">@sno</span> <span class="keyword">and</span> cno<span class="operator">=</span><span class="variable">@cno</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">exec</span> up_Updatecj <span class="string">&#x27;2000101&#x27;</span>,<span class="string">&#x27;1&#x27;</span>,<span class="number">100</span></span><br><span class="line"><span class="keyword">exec</span> up_cjbyno<span class="string">&#x27;2000101&#x27;</span>,<span class="string">&#x27;1&#x27;</span></span><br></pre></td></tr></table></figure>
<h2 id="知识点复习"><a href="#知识点复习" class="headerlink" title="知识点复习"></a>知识点复习</h2><p><img src="https://spjblogimg-1329562662.cos.ap-shanghai.myqcloud.com/img/f0a7fb8eecd9c6e277499eb05cc0eba.jpg" alt="f0a7fb8eecd9c6e277499eb05cc0eba"></p>
<p><img src="https://spjblogimg-1329562662.cos.ap-shanghai.myqcloud.com/img/ccb6d95adc6d4f2df5a238437177f6b.jpg" alt="ccb6d95adc6d4f2df5a238437177f6b"></p>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta"><i class="fas fa-circle-user fa-fw"></i>文章作者: </span><span class="post-copyright-info"><a href="http://example.com">薯片菌</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta"><i class="fas fa-square-arrow-up-right fa-fw"></i>文章链接: </span><span class="post-copyright-info"><a href="http://example.com/posts/769d2f87.html">http://example.com/posts/769d2f87.html</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta"><i class="fas fa-circle-exclamation fa-fw"></i>版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="http://example.com" target="_blank">薯片菌のBlog</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"></div><div class="post_share"><div class="social-share" data-image="https://spjblogimg-1329562662.cos.ap-shanghai.myqcloud.com/img/wp13618007-clean-4k-desktop-wallpapers.png" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.3/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.3/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/posts/5f366732.html" title="JSP学习笔记"><img class="cover" src="https://spjblogimg-1329562662.cos.ap-shanghai.myqcloud.com/img/wp10348230-aesthetic-anime-scenery-4k-wallpapers%20(1).jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">JSP学习笔记</div></div></a></div><div class="next-post pull-right"><a href="/posts/4a17b156.html" title="Hello World"><div class="cover" style="background: var(--default-bg-color)"></div><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">Hello World</div></div></a></div></nav><hr class="custom-hr"/><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="fas fa-comments fa-fw"></i><span> 评论</span></div></div><div class="comment-wrap"><div><div id="twikoo-wrap"></div></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="https://imgbed.yiyunt.cn/img/220" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">薯片菌</div><div class="author-info__description">记录学习的个人博客</div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">7</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">0</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">0</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/Darksidelr1"><i class="fab fa-github"></i><span>Follow Me</span></a><div class="card-info-social-icons is-center"><a class="social-icon faa-parent animated-hover" href="https://github.com/Darksidelr1" target="_blank" title="Github"><svg class="icon faa-tada" aria-hidden="true"><use xlink:href="#icon-gitHub"></use></svg></a><a class="social-icon faa-parent animated-hover" href="https://mail.qq.com/cgi-bin/qm_share?t=qm_mailme&amp;email=799672044@qq.com" target="_blank" title="Email"><svg class="icon faa-tada" aria-hidden="true"><use xlink:href="#icon-youxiang"></use></svg></a><a class="social-icon faa-parent animated-hover" href="https://spjblogimg-1329562662.cos.ap-shanghai.myqcloud.com/img/f5187fc4b34c0eaf76f260e92939ccd.png" target="_blank" title="Wechat"><svg class="icon faa-tada" aria-hidden="true"><use xlink:href="#icon-rss"></use></svg></a><a class="social-icon faa-parent animated-hover" href="https://space.bilibili.com/9236233?spm_id_from=333.1007.0.0" target="_blank" title="BiliBili"><svg class="icon faa-tada" aria-hidden="true"><use xlink:href="#icon-bilibili"></use></svg></a><a class="social-icon faa-parent animated-hover" href="tencent://Message/?Uin=799672044&amp;amp;websiteName=local.edu.com:8888=&amp;amp;Menu=yes" target="_blank" title="QQ"><svg class="icon faa-tada" aria-hidden="true"><use xlink:href="#icon-QQ1"></use></svg></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content">薯片の博客小站（监修ing）</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E5%BA%93%EF%BC%88%E5%9F%BA%E4%BA%8ESQL-Server%EF%BC%89"><span class="toc-number">1.</span> <span class="toc-text">数据库（基于SQL Server）</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#T-SQL%E8%AF%AD%E5%8F%A5%E7%9A%84%E4%BB%A3%E7%A0%81"><span class="toc-number">1.1.</span> <span class="toc-text">T-SQL语句的代码</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%85%B6%E4%BB%96%E8%AF%BE%E5%A0%82%E7%9A%84%E4%BB%A3%E7%A0%81"><span class="toc-number">1.2.</span> <span class="toc-text">其他课堂的代码</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%BB%BA%E5%BA%93%E8%A1%A8"><span class="toc-number">1.2.1.</span> <span class="toc-text">建库表</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E6%93%8D%E4%BD%9C"><span class="toc-number">1.2.2.</span> <span class="toc-text">数据操作</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%AE%80%E5%8D%95%E6%9F%A5%E8%AF%A2"><span class="toc-number">1.2.3.</span> <span class="toc-text">简单查询</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%81%9A%E5%90%88%E4%B8%8E%E5%88%86%E7%BB%84%E6%9F%A5%E8%AF%A2"><span class="toc-number">1.2.4.</span> <span class="toc-text">聚合与分组查询</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%BF%9E%E6%8E%A5%E6%9F%A5%E8%AF%A2"><span class="toc-number">1.2.5.</span> <span class="toc-text">连接查询</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AD%90%E6%9F%A5%E8%AF%A2%E5%92%8C%E9%AB%98%E7%BA%A7%E6%95%B0%E6%8D%AE%E6%93%8D%E4%BD%9C"><span class="toc-number">1.2.6.</span> <span class="toc-text">子查询和高级数据操作</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%A7%86%E5%9B%BE%E5%92%8C%E5%AD%98%E5%82%A8%E8%BF%87%E7%A8%8B"><span class="toc-number">1.2.7.</span> <span class="toc-text">视图和存储过程</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%9F%A5%E8%AF%86%E7%82%B9%E5%A4%8D%E4%B9%A0"><span class="toc-number">1.3.</span> <span class="toc-text">知识点复习</span></a></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/posts/1fa48c3e.html" title="QT图形界面开发学习笔记"><img src="https://spjblogimg-1329562662.cos.ap-shanghai.myqcloud.com/img/wp10824800-winter-nature-anime-wallpapers.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="QT图形界面开发学习笔记"/></a><div class="content"><a class="title" href="/posts/1fa48c3e.html" title="QT图形界面开发学习笔记">QT图形界面开发学习笔记</a><time datetime="2025-01-10T23:53:58.000Z" title="发表于 2025-01-11 07:53:58">2025-01-11</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/ad4f1e09.html" title="C++学习笔记"><img src="https://spjblogimg-1329562662.cos.ap-shanghai.myqcloud.com/img/wp9184990-sceneries-4k-wallpapers.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="C++学习笔记"/></a><div class="content"><a class="title" href="/posts/ad4f1e09.html" title="C++学习笔记">C++学习笔记</a><time datetime="2024-10-05T11:23:00.000Z" title="发表于 2024-10-05 19:23:00">2024-10-05</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/d7f2c68e.html" title="Java程序设计重新笔记及知识点梳理"><img src="https://spjblogimg-1329562662.cos.ap-shanghai.myqcloud.com/img/uwp4514792.jpeg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Java程序设计重新笔记及知识点梳理"/></a><div class="content"><a class="title" href="/posts/d7f2c68e.html" title="Java程序设计重新笔记及知识点梳理">Java程序设计重新笔记及知识点梳理</a><time datetime="2024-10-02T23:53:58.000Z" title="发表于 2024-10-03 07:53:58">2024-10-03</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/5f366732.html" title="JSP学习笔记"><img src="https://spjblogimg-1329562662.cos.ap-shanghai.myqcloud.com/img/wp10348230-aesthetic-anime-scenery-4k-wallpapers%20(1).jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="JSP学习笔记"/></a><div class="content"><a class="title" href="/posts/5f366732.html" title="JSP学习笔记">JSP学习笔记</a><time datetime="2024-10-01T11:23:00.000Z" title="发表于 2024-10-01 19:23:00">2024-10-01</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/769d2f87.html" title="数据库学习笔记"><img src="https://spjblogimg-1329562662.cos.ap-shanghai.myqcloud.com/img/wp13618007-clean-4k-desktop-wallpapers.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="数据库学习笔记"/></a><div class="content"><a class="title" href="/posts/769d2f87.html" title="数据库学习笔记">数据库学习笔记</a><time datetime="2023-10-03T23:53:58.000Z" title="发表于 2023-10-04 07:53:58">2023-10-04</time></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2025 By 薯片菌</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><a id="to_comment" href="#post-comment" title="直达评论"><i class="fas fa-comments"></i></a><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js?v=4.13.0"></script><script src="/js/main.js?v=4.13.0"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui@5.0.33/dist/fancybox/fancybox.umd.min.js"></script><div class="js-pjax"><script>(() => {
  const getCount = () => {
    const countELement = document.getElementById('twikoo-count')
    if(!countELement) return
    twikoo.getCommentsCount({
      envId: 'https://twikoo.shupianjun.fun/',
      region: '',
      urls: [window.location.pathname],
      includeReply: false
    }).then(res => {
      countELement.textContent = res[0].count
    }).catch(err => {
      console.error(err)
    })
  }

  const init = () => {
    twikoo.init(Object.assign({
      el: '#twikoo-wrap',
      envId: 'https://twikoo.shupianjun.fun/',
      region: '',
      onCommentLoaded: () => {
        btf.loadLightbox(document.querySelectorAll('#twikoo .tk-content img:not(.tk-owo-emotion)'))
      }
    }, null))

    
  }

  const loadTwikoo = () => {
    if (typeof twikoo === 'object') setTimeout(init,0)
    else getScript('https://cdn.jsdelivr.net/npm/twikoo@1.6.31/dist/twikoo.all.min.js').then(init)
  }

  if ('Twikoo' === 'Twikoo' || !true) {
    if (true) btf.loadComment(document.getElementById('twikoo-wrap'), loadTwikoo)
    else loadTwikoo()
  } else {
    window.loadOtherComment = loadTwikoo
  }
})()</script></div><div class="aplayer no-destroy" data-id="12650420800" data-server="netease" data-type="playlist"   data-order="list" data-fixed="true" data-preload="auto" data-autoplay="false" data-mutex="true" ></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/aplayer@1.10.1/dist/APlayer.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/aplayer@1.10.1/dist/APlayer.min.js"></script><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.3/metingjs/dist/Meting.min.js"></script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">搜索</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="is-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span>  数据库加载中</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"/></div></div><hr/><div id="local-search-results"></div><div id="local-search-stats-wrap"></div></div></div><div id="search-mask"></div><script src="/js/search/local-search.js?v=4.13.0"></script></div><div class="app-refresh" id="app-refresh" style="position: fixed;top: -2.2rem;left: 0;right: 0;z-index: 99999;padding: 0 1rem;font-size: 15px;height: 2.2rem;transition: all 0.3s ease;"><div class="app-refresh-wrap" style=" display: flex;color: #fff;height: 100%;align-items: center;justify-content: center;"><label>✨ 有新文章啦！ 👉</label><a href="javascript:void(0)" onclick="location.reload()"><span style="color: #fff;text-decoration: underline;cursor: pointer;">🍗点击食用🍔</span></a></div></div><script>if ('serviceWorker' in navigator) {
if (navigator.serviceWorker.controller) {
navigator.serviceWorker.addEventListener('controllerchange', function() {
showNotification()
})
}
window.addEventListener('load', function() {
navigator.serviceWorker.register('/sw.js')
})
}
function showNotification() {
if (GLOBAL_CONFIG.Snackbar) {
var snackbarBg =
document.documentElement.getAttribute('data-theme') === 'light' ?
GLOBAL_CONFIG.Snackbar.bgLight :
GLOBAL_CONFIG.Snackbar.bgDark
var snackbarPos = GLOBAL_CONFIG.Snackbar.position
Snackbar.show({
text: '✨ 有新文章啦！ 👉',
backgroundColor: snackbarBg,
duration: 500000,
pos: snackbarPos,
actionText: '🍗点击食用🍔',
actionTextColor: '#fff',
onActionClick: function(e) {
location.reload()
},
})
} else {
var showBg =
document.documentElement.getAttribute('data-theme') === 'light' ?
'#3b70fc' :
'#1f1f1f'
var cssText = `top: 0; background: ${showBg};`
document.getElementById('app-refresh').style.cssText = cssText
}
}</script></div><!-- hexo injector body_end start -->
    <link rel="stylesheet" crossorigin href="https://g.alicdn.com/aliyun-documentation/web-chatbot-ui/0.0.11/index.css" />
    <script type="module" crossorigin src="https://g.alicdn.com/aliyun-documentation/web-chatbot-ui/0.0.11/index.js"></script>
    <script>
      window.CHATBOT_CONFIG = {
        endpoint: "http://webchat-bot-yt02.fcv3.1206339714347396.cn-hangzhou.fc.devsapp.net/chat", // 可以替换为 https://{your-fc-http-trigger-domain}/chat
        displayByDefault: false, // 默认不展示 AI 助手聊天框
        aiChatOptions: { // aiChatOptions 中 options 会传递 aiChat 组件，自定义取值参考：https://docs.nlkit.com/nlux/reference/ui/ai-chat
          conversationOptions: { // 自定义取值参考：https://docs.nlkit.com/nlux/reference/ui/ai-chat#conversation-options
            conversationStarters: [
              {prompt: '你是什么模型？'},
              {prompt: '你的主人是？'},
              {prompt: '你叫什么名字?'},
            ]
          },
          displayOptions: { // 自定义取值参考：https://docs.nlkit.com/nlux/reference/ui/ai-chat#display-options
            height: 600,
          },
          personaOptions: { // 自定义取值参考：https://docs.nlkit.com/nlux/reference/ui/ai-chat#chat-personas
            assistant: {
              name: '你好，我是你的 AI 助手',
              // AI 助手的图标
              avatar: 'https://img.alicdn.com/imgextra/i2/O1CN01Pda9nq1YDV0mnZ31H_!!6000000003025-54-tps-120-120.apng',
              tagline: '您可以尝试点击下方的快捷入口开启体验！',
            }
          }
        }
      };
    </script>
    <style>
      :root {
        /* webchat 工具栏的颜色 */
        --webchat-toolbar-background-color: #1464E4;
        /* webchat 工具栏文字和按钮的颜色 */
        --webchat-toolbar-text-color: #FFF;
      }
      /* webchat 对话框如果被遮挡，可以尝试通过 z-index、bottom、right 等设置来调整位置 */
      .webchat-container {
        z-index: 100;
        bottom: 10px;
        right: 10px;
      }
      /* webchat 的唤起按钮如果被遮挡，可以尝试通过 z-index、bottom、right 等设置来调整位置 */
      .webchat-bubble-tip {
        z-index: 99;
        bottom: 20px;
        right: 20px;
      }
    </style><script data-pjax>
  function butterfly_clock_anzhiyu_injector_config(){
    var parent_div_git = document.getElementsByClassName('sticky_layout')[0];
    var item_html = '<div class="card-widget card-clock"><div class="card-glass"><div class="card-background"><div class="card-content"><div id="hexo_electric_clock"><img class="entered loading" id="card-clock-loading" src="https://cdn.cbd.int/hexo-butterfly-clock-anzhiyu/lib/loading.gif" style="height: 120px; width: 100%;" data-ll-status="loading"/></div></div></div></div></div>';
    console.log('已挂载butterfly_clock_anzhiyu')
    if(parent_div_git) {
      parent_div_git.insertAdjacentHTML("afterbegin",item_html)
    }
  }
  var elist = 'null'.split(',');
  var cpage = location.pathname;
  var epage = 'all';
  var qweather_key = 'b16a1fa0e63c46a4b8f28abfb06ae3fe';
  var gaud_map_key = '7c6a3e7d74be928e93585d0203115a19';
  var baidu_ak_key = 'undefined';
  var flag = 0;
  var clock_rectangle = '118.2112030,29.113033';
  var clock_default_rectangle_enable = 'false';

  for (var i=0;i<elist.length;i++){
    if (cpage.includes(elist[i])){
      flag++;
    }
  }

  if ((epage ==='all')&&(flag == 0)){
    butterfly_clock_anzhiyu_injector_config();
  }
  else if (epage === cpage){
    butterfly_clock_anzhiyu_injector_config();
  }
  </script><script src="https://widget.qweather.net/simple/static/js/he-simple-common.js?v=2.0"></script><script data-pjax src="https://cdn.cbd.int/hexo-butterfly-clock-anzhiyu/lib/clock.min.js"></script><script data-pjax>
  function butterfly_footer_beautify_injector_config(){
    var parent_div_git = document.getElementById('footer-wrap');
    var item_html = '<div id="workboard"></div><p id="ghbdages"><a class="github-badge" target="_blank" href="https://hexo.io/" style="margin-inline:5px" data-title="博客框架为Hexo_v5.4.0" title=""><img src="https://img.shields.io/badge/Frame-Hexo-blue?style=flat&amp;logo=hexo" alt=""/></a><a class="github-badge" target="_blank" href="https://butterfly.js.org/" style="margin-inline:5px" data-title="主题版本Butterfly_v4.2.2" title=""><img src="https://img.shields.io/badge/Theme-Butterfly-6513df?style=flat&amp;logo=bitdefender" alt=""/></a><a class="github-badge" target="_blank" href="https://vercel.com/" style="margin-inline:5px" data-title="本站采用托管于Vercel" title=""><img src="https://img.shields.io/badge/Hosted-Vercel-brightgreen?style=flat&amp;logo=Vercel" alt=""/></a><a class="github-badge" target="_blank" href="https://github.com/" style="margin-inline:5px" data-title="本站项目由Github托管" title=""><img src="https://img.shields.io/badge/Source-Github-d021d6?style=flat&amp;logo=GitHub" alt=""/></a><a class="github-badge" target="_blank" href="http://creativecommons.org/licenses/by-nc-sa/4.0/" style="margin-inline:5px" data-title="本站采用知识共享署名-非商业性使用-相同方式共享4.0国际许可协议进行许可" title=""><img src="https://img.shields.io/badge/Copyright-BY--NC--SA%204.0-d42328?style=flat&amp;logo=Claris" alt=""/></a></p>';
    console.log('已挂载butterfly_footer_beautify')
    parent_div_git.insertAdjacentHTML("beforeend",item_html)
    }
  var elist = 'null'.split(',');
  var cpage = location.pathname;
  var epage = 'all';
  var flag = 0;

  for (var i=0;i<elist.length;i++){
    if (cpage.includes(elist[i])){
      flag++;
    }
  }

  if ((epage ==='all')&&(flag == 0)){
    butterfly_footer_beautify_injector_config();
  }
  else if (epage === cpage){
    butterfly_footer_beautify_injector_config();
  }
  </script><script async src="/js/runtime/runtime.min.js"></script><div class="js-pjax"><script async="async">var arr = document.getElementsByClassName('recent-post-item');
for(var i = 0;i<arr.length;i++){
    arr[i].classList.add('wow');
    arr[i].classList.add('animate__zoomIn');
    arr[i].setAttribute('data-wow-duration', '1.5s');
    arr[i].setAttribute('data-wow-delay', '200ms');
    arr[i].setAttribute('data-wow-offset', '30');
    arr[i].setAttribute('data-wow-iteration', '1');
  }</script><script async="async">var arr = document.getElementsByClassName('card-widget');
for(var i = 0;i<arr.length;i++){
    arr[i].classList.add('wow');
    arr[i].classList.add('animate__zoomIn');
    arr[i].setAttribute('data-wow-duration', '');
    arr[i].setAttribute('data-wow-delay', '200ms');
    arr[i].setAttribute('data-wow-offset', '');
    arr[i].setAttribute('data-wow-iteration', '');
  }</script><script async="async">var arr = document.getElementsByClassName('flink-list-card');
for(var i = 0;i<arr.length;i++){
    arr[i].classList.add('wow');
    arr[i].classList.add('animate__flipInY');
    arr[i].setAttribute('data-wow-duration', '3s');
    arr[i].setAttribute('data-wow-delay', '');
    arr[i].setAttribute('data-wow-offset', '');
    arr[i].setAttribute('data-wow-iteration', '');
  }</script><script async="async">var arr = document.getElementsByClassName('flink-list-card');
for(var i = 0;i<arr.length;i++){
    arr[i].classList.add('wow');
    arr[i].classList.add('animate__animated');
    arr[i].setAttribute('data-wow-duration', '3s');
    arr[i].setAttribute('data-wow-delay', '');
    arr[i].setAttribute('data-wow-offset', '');
    arr[i].setAttribute('data-wow-iteration', '');
  }</script><script async="async">var arr = document.getElementsByClassName('article-sort-item');
for(var i = 0;i<arr.length;i++){
    arr[i].classList.add('wow');
    arr[i].classList.add('animate__slideInRight');
    arr[i].setAttribute('data-wow-duration', '1.5s');
    arr[i].setAttribute('data-wow-delay', '');
    arr[i].setAttribute('data-wow-offset', '');
    arr[i].setAttribute('data-wow-iteration', '');
  }</script><script async="async">var arr = document.getElementsByClassName('site-card');
for(var i = 0;i<arr.length;i++){
    arr[i].classList.add('wow');
    arr[i].classList.add('animate__flipInY');
    arr[i].setAttribute('data-wow-duration', '3s');
    arr[i].setAttribute('data-wow-delay', '');
    arr[i].setAttribute('data-wow-offset', '');
    arr[i].setAttribute('data-wow-iteration', '');
  }</script><script async="async">var arr = document.getElementsByClassName('site-card');
for(var i = 0;i<arr.length;i++){
    arr[i].classList.add('wow');
    arr[i].classList.add('animate__animated');
    arr[i].setAttribute('data-wow-duration', '3s');
    arr[i].setAttribute('data-wow-delay', '');
    arr[i].setAttribute('data-wow-offset', '');
    arr[i].setAttribute('data-wow-iteration', '');
  }</script></div><script defer src="https://cdn.cbd.int/hexo-butterfly-wowjs/lib/wow.min.js"></script><script defer src="https://cdn.cbd.int/hexo-butterfly-wowjs/lib/wow_init.js"></script><script async src="/js/ali_font.js"></script><!-- hexo injector body_end end --><script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"tagMode":false,"debug":false,"model":{"jsonPath":"/live2dw/assets/hijiki.model.json"},"display":{"position":"right","width":225,"height":450},"mobile":{"show":false},"log":false,"pluginJsPath":"lib/","pluginModelPath":"assets/","pluginRootPath":"live2dw/"});</script></body></html>